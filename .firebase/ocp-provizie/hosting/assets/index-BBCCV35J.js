import{r as D,a as pC,R as j,t as fb,c as ou,g as ke}from"./vendor-4SJf9OP5.js";import{D as YA,c as ge}from"./utils-Cg_Uj_3r.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var XA={exports:{}},mf={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mC=D,gC=Symbol.for("react.element"),yC=Symbol.for("react.fragment"),vC=Object.prototype.hasOwnProperty,bC=mC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_C={key:!0,ref:!0,__self:!0,__source:!0};function QA(t,e,r){var n,i={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)vC.call(e,n)&&!_C.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:gC,type:t,key:o,ref:a,props:i,_owner:bC.current}}mf.Fragment=yC;mf.jsx=QA;mf.jsxs=QA;XA.exports=mf;var E=XA.exports,JA,hb=pC;JA=hb.createRoot,hb.hydrateRoot;var db={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},wC=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[r++];e[n++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[r++],a=t[r++],s=t[r++],c=((i&7)<<18|(o&63)<<12|(a&63)<<6|s&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const o=t[r++],a=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},eE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const o=t[i],a=i+1<t.length,s=a?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=o>>2,f=(o&3)<<4|s>>4;let d=(s&15)<<2|u>>6,p=u&63;c||(p=64,a||(d=64)),n.push(r[l],r[f],r[d],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const o=r[t.charAt(i++)],s=i<t.length?r[t.charAt(i)]:0;++i;const u=i<t.length?r[t.charAt(i)]:64;++i;const f=i<t.length?r[t.charAt(i)]:64;if(++i,o==null||s==null||u==null||f==null)throw new xC;const d=o<<2|s>>4;if(n.push(d),u!==64){const p=s<<4&240|u>>2;if(n.push(p),f!==64){const m=u<<6&192|f;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AC=function(t){const e=ZA(t);return eE.encodeByteArray(e,!0)},qu=function(t){return AC(t).replace(/\./g,"")},tE=function(t){try{return eE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=()=>EC().__FIREBASE_DEFAULTS__,SC=()=>{if(typeof process>"u"||typeof db>"u")return;const t=db.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},PC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tE(t[1]);return e&&JSON.parse(e)},gf=()=>{try{return TC()||SC()||PC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rE=t=>{var e,r;return(r=(e=gf())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},nE=t=>{const e=rE(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},iE=()=>{var t;return(t=gf())===null||t===void 0?void 0:t.config},oE=t=>{var e;return(e=gf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qu(JSON.stringify(r)),qu(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function CC(){var t;const e=(t=gf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function NC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $C(){const t=Rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function jC(){return!CC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DC(){try{return typeof indexedDB=="object"}catch{return!1}}function MC(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="FirebaseError";class Lr extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=LC,Object.setPrototypeOf(this,Lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mc.prototype.create)}}class mc{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?FC(o,n):"Error",s=`${this.serviceName}: ${a} (${i}).`;return new Lr(i,s,n)}}function FC(t,e){return t.replace(VC,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const VC=/\{\$([^}]+)}/g;function BC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wu(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const o=t[i],a=e[i];if(pb(o)&&pb(a)){if(!Wu(o,a))return!1}else if(o!==a)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function pb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function ts(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,o]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function rs(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function UC(t,e){const r=new qC(t,e);return r.subscribe.bind(r)}class qC{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");WC(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=nd),i.error===void 0&&(i.error=nd),i.complete===void 0&&(i.complete=nd);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WC(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function nd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(t){return t&&t._delegate?t._delegate:t}class Kn{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new IC;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KC(e))try{this.getOrInitializeService({instanceIdentifier:di})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:i});n.resolve(o)}catch{}}}}clearInstance(e=di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=di){return this.instances.has(e)}getOptions(e=di){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[o,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(o);n===s&&a.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),o=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:HC(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=di){return this.component?this.component.multipleInstances?e:di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HC(t){return t===di?void 0:t}function KC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new zC(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const YC={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},XC=we.INFO,QC={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},JC=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=QC[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rg{constructor(e){this.name=e,this._logLevel=XC,this._logHandler=JC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}const ZC=(t,e)=>e.some(r=>t instanceof r);let mb,gb;function eR(){return mb||(mb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tR(){return gb||(gb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sE=new WeakMap,Yd=new WeakMap,cE=new WeakMap,id=new WeakMap,ng=new WeakMap;function rR(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{r(Fn(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&sE.set(r,t)}).catch(()=>{}),ng.set(e,t),e}function nR(t){if(Yd.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{r(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Yd.set(t,e)}let Xd={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Yd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cE.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Fn(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iR(t){Xd=t(Xd)}function oR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(od(this),e,...r);return cE.set(n,e.sort?e.sort():[e]),Fn(n)}:tR().includes(t)?function(...e){return t.apply(od(this),e),Fn(sE.get(this))}:function(...e){return Fn(t.apply(od(this),e))}}function aR(t){return typeof t=="function"?oR(t):(t instanceof IDBTransaction&&nR(t),ZC(t,eR())?new Proxy(t,Xd):t)}function Fn(t){if(t instanceof IDBRequest)return rR(t);if(id.has(t))return id.get(t);const e=aR(t);return e!==t&&(id.set(t,e),ng.set(e,t)),e}const od=t=>ng.get(t);function sR(t,e,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),s=Fn(a);return n&&a.addEventListener("upgradeneeded",c=>{n(Fn(a.result),c.oldVersion,c.newVersion,Fn(a.transaction),c)}),r&&a.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),s.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),s}const cR=["get","getKey","getAll","getAllKeys","count"],uR=["put","add","delete","clear"],ad=new Map;function yb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ad.get(e))return ad.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=uR.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||cR.includes(r)))return;const o=async function(a,...s){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(s.shift())),(await Promise.all([u[r](...s),i&&c.done]))[0]};return ad.set(e,o),o}iR(t=>({...t,get:(e,r,n)=>yb(e,r)||t.get(e,r,n),has:(e,r)=>!!yb(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(fR(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function fR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qd="@firebase/app",vb="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=new rg("@firebase/app"),hR="@firebase/app-compat",dR="@firebase/analytics-compat",pR="@firebase/analytics",mR="@firebase/app-check-compat",gR="@firebase/app-check",yR="@firebase/auth",vR="@firebase/auth-compat",bR="@firebase/database",_R="@firebase/data-connect",wR="@firebase/database-compat",xR="@firebase/functions",AR="@firebase/functions-compat",ER="@firebase/installations",TR="@firebase/installations-compat",SR="@firebase/messaging",PR="@firebase/messaging-compat",IR="@firebase/performance",OR="@firebase/performance-compat",CR="@firebase/remote-config",RR="@firebase/remote-config-compat",kR="@firebase/storage",NR="@firebase/storage-compat",$R="@firebase/firestore",jR="@firebase/vertexai-preview",DR="@firebase/firestore-compat",MR="firebase",LR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="[DEFAULT]",FR={[Qd]:"fire-core",[hR]:"fire-core-compat",[pR]:"fire-analytics",[dR]:"fire-analytics-compat",[gR]:"fire-app-check",[mR]:"fire-app-check-compat",[yR]:"fire-auth",[vR]:"fire-auth-compat",[bR]:"fire-rtdb",[_R]:"fire-data-connect",[wR]:"fire-rtdb-compat",[xR]:"fire-fn",[AR]:"fire-fn-compat",[ER]:"fire-iid",[TR]:"fire-iid-compat",[SR]:"fire-fcm",[PR]:"fire-fcm-compat",[IR]:"fire-perf",[OR]:"fire-perf-compat",[CR]:"fire-rc",[RR]:"fire-rc-compat",[kR]:"fire-gcs",[NR]:"fire-gcs-compat",[$R]:"fire-fst",[DR]:"fire-fst-compat",[jR]:"fire-vertex","fire-js":"fire-js",[MR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=new Map,VR=new Map,Zd=new Map;function bb(t,e){try{t.container.addComponent(e)}catch(r){sn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Ri(t){const e=t.name;if(Zd.has(e))return sn.debug(`There were multiple attempts to register component ${e}.`),!1;Zd.set(e,t);for(const r of zu.values())bb(r,t);for(const r of VR.values())bb(r,t);return!0}function yf(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Ar(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vn=new mc("app","Firebase",BR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Kn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=LR;function uE(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Jd,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Vn.create("bad-app-name",{appName:String(i)});if(r||(r=iE()),!r)throw Vn.create("no-options");const o=zu.get(i);if(o){if(Wu(r,o.options)&&Wu(n,o.config))return o;throw Vn.create("duplicate-app",{appName:i})}const a=new GC(i);for(const c of Zd.values())a.addComponent(c);const s=new UR(r,n,a);return zu.set(i,s),s}function ig(t=Jd){const e=zu.get(t);if(!e&&t===Jd&&iE())return uE();if(!e)throw Vn.create("no-app",{appName:t});return e}function Pr(t,e,r){var n;let i=(n=FR[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const s=[`Unable to register library "${i}" with version "${e}":`];o&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sn.warn(s.join(" "));return}Ri(new Kn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="firebase-heartbeat-database",WR=1,xs="firebase-heartbeat-store";let sd=null;function lE(){return sd||(sd=sR(qR,WR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xs)}catch(r){console.warn(r)}}}}).catch(t=>{throw Vn.create("idb-open",{originalErrorMessage:t.message})})),sd}async function zR(t){try{const r=(await lE()).transaction(xs),n=await r.objectStore(xs).get(fE(t));return await r.done,n}catch(e){if(e instanceof Lr)sn.warn(e.message);else{const r=Vn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});sn.warn(r.message)}}}async function _b(t,e){try{const n=(await lE()).transaction(xs,"readwrite");await n.objectStore(xs).put(e,fE(t)),await n.done}catch(r){if(r instanceof Lr)sn.warn(r.message);else{const n=Vn.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});sn.warn(n.message)}}}function fE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=1024,KR=30*24*60*60*1e3;class GR{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new XR(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=wb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const s=new Date(a.date).valueOf();return Date.now()-s<=KR}),this._storage.overwrite(this._heartbeatsCache))}catch(n){sn.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=wb(),{heartbeatsToSend:n,unsentEntries:i}=YR(this._heartbeatsCache.heartbeats),o=qu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(r){return sn.warn(r),""}}}function wb(){return new Date().toISOString().substring(0,10)}function YR(t,e=HR){const r=[];let n=t.slice();for(const i of t){const o=r.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),xb(r)>e){o.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),xb(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class XR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DC()?MC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await zR(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return _b(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return _b(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function xb(t){return qu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t){Ri(new Kn("platform-logger",e=>new lR(e),"PRIVATE")),Ri(new Kn("heartbeat",e=>new GR(e),"PRIVATE")),Pr(Qd,vb,t),Pr(Qd,vb,"esm2017"),Pr("fire-js","")}QR("");var JR="firebase",ZR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr(JR,ZR,"app");var Ab=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pi,hE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,w){function S(){}S.prototype=w.prototype,b.D=w.prototype,b.prototype=new S,b.prototype.constructor=b,b.C=function(k,O,N){for(var R=Array(arguments.length-2),V=2;V<arguments.length;V++)R[V-2]=arguments[V];return w.prototype[O].apply(k,R)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,w,S){S||(S=0);var k=Array(16);if(typeof w=="string")for(var O=0;16>O;++O)k[O]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(O=0;16>O;++O)k[O]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=b.g[0],S=b.g[1],O=b.g[2];var N=b.g[3],R=w+(N^S&(O^N))+k[0]+3614090360&4294967295;w=S+(R<<7&4294967295|R>>>25),R=N+(O^w&(S^O))+k[1]+3905402710&4294967295,N=w+(R<<12&4294967295|R>>>20),R=O+(S^N&(w^S))+k[2]+606105819&4294967295,O=N+(R<<17&4294967295|R>>>15),R=S+(w^O&(N^w))+k[3]+3250441966&4294967295,S=O+(R<<22&4294967295|R>>>10),R=w+(N^S&(O^N))+k[4]+4118548399&4294967295,w=S+(R<<7&4294967295|R>>>25),R=N+(O^w&(S^O))+k[5]+1200080426&4294967295,N=w+(R<<12&4294967295|R>>>20),R=O+(S^N&(w^S))+k[6]+2821735955&4294967295,O=N+(R<<17&4294967295|R>>>15),R=S+(w^O&(N^w))+k[7]+4249261313&4294967295,S=O+(R<<22&4294967295|R>>>10),R=w+(N^S&(O^N))+k[8]+1770035416&4294967295,w=S+(R<<7&4294967295|R>>>25),R=N+(O^w&(S^O))+k[9]+2336552879&4294967295,N=w+(R<<12&4294967295|R>>>20),R=O+(S^N&(w^S))+k[10]+4294925233&4294967295,O=N+(R<<17&4294967295|R>>>15),R=S+(w^O&(N^w))+k[11]+2304563134&4294967295,S=O+(R<<22&4294967295|R>>>10),R=w+(N^S&(O^N))+k[12]+1804603682&4294967295,w=S+(R<<7&4294967295|R>>>25),R=N+(O^w&(S^O))+k[13]+4254626195&4294967295,N=w+(R<<12&4294967295|R>>>20),R=O+(S^N&(w^S))+k[14]+2792965006&4294967295,O=N+(R<<17&4294967295|R>>>15),R=S+(w^O&(N^w))+k[15]+1236535329&4294967295,S=O+(R<<22&4294967295|R>>>10),R=w+(O^N&(S^O))+k[1]+4129170786&4294967295,w=S+(R<<5&4294967295|R>>>27),R=N+(S^O&(w^S))+k[6]+3225465664&4294967295,N=w+(R<<9&4294967295|R>>>23),R=O+(w^S&(N^w))+k[11]+643717713&4294967295,O=N+(R<<14&4294967295|R>>>18),R=S+(N^w&(O^N))+k[0]+3921069994&4294967295,S=O+(R<<20&4294967295|R>>>12),R=w+(O^N&(S^O))+k[5]+3593408605&4294967295,w=S+(R<<5&4294967295|R>>>27),R=N+(S^O&(w^S))+k[10]+38016083&4294967295,N=w+(R<<9&4294967295|R>>>23),R=O+(w^S&(N^w))+k[15]+3634488961&4294967295,O=N+(R<<14&4294967295|R>>>18),R=S+(N^w&(O^N))+k[4]+3889429448&4294967295,S=O+(R<<20&4294967295|R>>>12),R=w+(O^N&(S^O))+k[9]+568446438&4294967295,w=S+(R<<5&4294967295|R>>>27),R=N+(S^O&(w^S))+k[14]+3275163606&4294967295,N=w+(R<<9&4294967295|R>>>23),R=O+(w^S&(N^w))+k[3]+4107603335&4294967295,O=N+(R<<14&4294967295|R>>>18),R=S+(N^w&(O^N))+k[8]+1163531501&4294967295,S=O+(R<<20&4294967295|R>>>12),R=w+(O^N&(S^O))+k[13]+2850285829&4294967295,w=S+(R<<5&4294967295|R>>>27),R=N+(S^O&(w^S))+k[2]+4243563512&4294967295,N=w+(R<<9&4294967295|R>>>23),R=O+(w^S&(N^w))+k[7]+1735328473&4294967295,O=N+(R<<14&4294967295|R>>>18),R=S+(N^w&(O^N))+k[12]+2368359562&4294967295,S=O+(R<<20&4294967295|R>>>12),R=w+(S^O^N)+k[5]+4294588738&4294967295,w=S+(R<<4&4294967295|R>>>28),R=N+(w^S^O)+k[8]+2272392833&4294967295,N=w+(R<<11&4294967295|R>>>21),R=O+(N^w^S)+k[11]+1839030562&4294967295,O=N+(R<<16&4294967295|R>>>16),R=S+(O^N^w)+k[14]+4259657740&4294967295,S=O+(R<<23&4294967295|R>>>9),R=w+(S^O^N)+k[1]+2763975236&4294967295,w=S+(R<<4&4294967295|R>>>28),R=N+(w^S^O)+k[4]+1272893353&4294967295,N=w+(R<<11&4294967295|R>>>21),R=O+(N^w^S)+k[7]+4139469664&4294967295,O=N+(R<<16&4294967295|R>>>16),R=S+(O^N^w)+k[10]+3200236656&4294967295,S=O+(R<<23&4294967295|R>>>9),R=w+(S^O^N)+k[13]+681279174&4294967295,w=S+(R<<4&4294967295|R>>>28),R=N+(w^S^O)+k[0]+3936430074&4294967295,N=w+(R<<11&4294967295|R>>>21),R=O+(N^w^S)+k[3]+3572445317&4294967295,O=N+(R<<16&4294967295|R>>>16),R=S+(O^N^w)+k[6]+76029189&4294967295,S=O+(R<<23&4294967295|R>>>9),R=w+(S^O^N)+k[9]+3654602809&4294967295,w=S+(R<<4&4294967295|R>>>28),R=N+(w^S^O)+k[12]+3873151461&4294967295,N=w+(R<<11&4294967295|R>>>21),R=O+(N^w^S)+k[15]+530742520&4294967295,O=N+(R<<16&4294967295|R>>>16),R=S+(O^N^w)+k[2]+3299628645&4294967295,S=O+(R<<23&4294967295|R>>>9),R=w+(O^(S|~N))+k[0]+4096336452&4294967295,w=S+(R<<6&4294967295|R>>>26),R=N+(S^(w|~O))+k[7]+1126891415&4294967295,N=w+(R<<10&4294967295|R>>>22),R=O+(w^(N|~S))+k[14]+2878612391&4294967295,O=N+(R<<15&4294967295|R>>>17),R=S+(N^(O|~w))+k[5]+4237533241&4294967295,S=O+(R<<21&4294967295|R>>>11),R=w+(O^(S|~N))+k[12]+1700485571&4294967295,w=S+(R<<6&4294967295|R>>>26),R=N+(S^(w|~O))+k[3]+2399980690&4294967295,N=w+(R<<10&4294967295|R>>>22),R=O+(w^(N|~S))+k[10]+4293915773&4294967295,O=N+(R<<15&4294967295|R>>>17),R=S+(N^(O|~w))+k[1]+2240044497&4294967295,S=O+(R<<21&4294967295|R>>>11),R=w+(O^(S|~N))+k[8]+1873313359&4294967295,w=S+(R<<6&4294967295|R>>>26),R=N+(S^(w|~O))+k[15]+4264355552&4294967295,N=w+(R<<10&4294967295|R>>>22),R=O+(w^(N|~S))+k[6]+2734768916&4294967295,O=N+(R<<15&4294967295|R>>>17),R=S+(N^(O|~w))+k[13]+1309151649&4294967295,S=O+(R<<21&4294967295|R>>>11),R=w+(O^(S|~N))+k[4]+4149444226&4294967295,w=S+(R<<6&4294967295|R>>>26),R=N+(S^(w|~O))+k[11]+3174756917&4294967295,N=w+(R<<10&4294967295|R>>>22),R=O+(w^(N|~S))+k[2]+718787259&4294967295,O=N+(R<<15&4294967295|R>>>17),R=S+(N^(O|~w))+k[9]+3951481745&4294967295,b.g[0]=b.g[0]+w&4294967295,b.g[1]=b.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,b.g[2]=b.g[2]+O&4294967295,b.g[3]=b.g[3]+N&4294967295}n.prototype.u=function(b,w){w===void 0&&(w=b.length);for(var S=w-this.blockSize,k=this.B,O=this.h,N=0;N<w;){if(O==0)for(;N<=S;)i(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<w;)if(k[O++]=b.charCodeAt(N++),O==this.blockSize){i(this,k),O=0;break}}else for(;N<w;)if(k[O++]=b[N++],O==this.blockSize){i(this,k),O=0;break}}this.h=O,this.o+=w},n.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var w=1;w<b.length-8;++w)b[w]=0;var S=8*this.o;for(w=b.length-8;w<b.length;++w)b[w]=S&255,S/=256;for(this.u(b),b=Array(16),w=S=0;4>w;++w)for(var k=0;32>k;k+=8)b[S++]=this.g[w]>>>k&255;return b};function o(b,w){var S=s;return Object.prototype.hasOwnProperty.call(S,b)?S[b]:S[b]=w(b)}function a(b,w){this.h=w;for(var S=[],k=!0,O=b.length-1;0<=O;O--){var N=b[O]|0;k&&N==w||(S[O]=N,k=!1)}this.g=S}var s={};function c(b){return-128<=b&&128>b?o(b,function(w){return new a([w|0],0>w?-1:0)}):new a([b|0],0>b?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return g(u(-b));for(var w=[],S=1,k=0;b>=S;k++)w[k]=b/S|0,S*=4294967296;return new a(w,0)}function l(b,w){if(b.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(b.charAt(0)=="-")return g(l(b.substring(1),w));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(w,8)),k=f,O=0;O<b.length;O+=8){var N=Math.min(8,b.length-O),R=parseInt(b.substring(O,O+N),w);8>N?(N=u(Math.pow(w,N)),k=k.j(N).add(u(R))):(k=k.j(S),k=k.add(u(R)))}return k}var f=c(0),d=c(1),p=c(16777216);t=a.prototype,t.m=function(){if(y(this))return-g(this).m();for(var b=0,w=1,S=0;S<this.g.length;S++){var k=this.i(S);b+=(0<=k?k:4294967296+k)*w,w*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(m(this))return"0";if(y(this))return"-"+g(this).toString(b);for(var w=u(Math.pow(b,6)),S=this,k="";;){var O=C(S,w).g;S=A(S,O.j(w));var N=((0<S.g.length?S.g[0]:S.h)>>>0).toString(b);if(S=O,m(S))return N+k;for(;6>N.length;)N="0"+N;k=N+k}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function m(b){if(b.h!=0)return!1;for(var w=0;w<b.g.length;w++)if(b.g[w]!=0)return!1;return!0}function y(b){return b.h==-1}t.l=function(b){return b=A(this,b),y(b)?-1:m(b)?0:1};function g(b){for(var w=b.g.length,S=[],k=0;k<w;k++)S[k]=~b.g[k];return new a(S,~b.h).add(d)}t.abs=function(){return y(this)?g(this):this},t.add=function(b){for(var w=Math.max(this.g.length,b.g.length),S=[],k=0,O=0;O<=w;O++){var N=k+(this.i(O)&65535)+(b.i(O)&65535),R=(N>>>16)+(this.i(O)>>>16)+(b.i(O)>>>16);k=R>>>16,N&=65535,R&=65535,S[O]=R<<16|N}return new a(S,S[S.length-1]&-2147483648?-1:0)};function A(b,w){return b.add(g(w))}t.j=function(b){if(m(this)||m(b))return f;if(y(this))return y(b)?g(this).j(g(b)):g(g(this).j(b));if(y(b))return g(this.j(g(b)));if(0>this.l(p)&&0>b.l(p))return u(this.m()*b.m());for(var w=this.g.length+b.g.length,S=[],k=0;k<2*w;k++)S[k]=0;for(k=0;k<this.g.length;k++)for(var O=0;O<b.g.length;O++){var N=this.i(k)>>>16,R=this.i(k)&65535,V=b.i(O)>>>16,F=b.i(O)&65535;S[2*k+2*O]+=R*F,T(S,2*k+2*O),S[2*k+2*O+1]+=N*F,T(S,2*k+2*O+1),S[2*k+2*O+1]+=R*V,T(S,2*k+2*O+1),S[2*k+2*O+2]+=N*V,T(S,2*k+2*O+2)}for(k=0;k<w;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=w;k<2*w;k++)S[k]=0;return new a(S,0)};function T(b,w){for(;(b[w]&65535)!=b[w];)b[w+1]+=b[w]>>>16,b[w]&=65535,w++}function P(b,w){this.g=b,this.h=w}function C(b,w){if(m(w))throw Error("division by zero");if(m(b))return new P(f,f);if(y(b))return w=C(g(b),w),new P(g(w.g),g(w.h));if(y(w))return w=C(b,g(w)),new P(g(w.g),w.h);if(30<b.g.length){if(y(b)||y(w))throw Error("slowDivide_ only works with positive integers.");for(var S=d,k=w;0>=k.l(b);)S=x(S),k=x(k);var O=I(S,1),N=I(k,1);for(k=I(k,2),S=I(S,2);!m(k);){var R=N.add(k);0>=R.l(b)&&(O=O.add(S),N=R),k=I(k,1),S=I(S,1)}return w=A(b,O.j(w)),new P(O,w)}for(O=f;0<=b.l(w);){for(S=Math.max(1,Math.floor(b.m()/w.m())),k=Math.ceil(Math.log(S)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),N=u(S),R=N.j(w);y(R)||0<R.l(b);)S-=k,N=u(S),R=N.j(w);m(N)&&(N=d),O=O.add(N),b=A(b,R)}return new P(O,b)}t.A=function(b){return C(this,b).h},t.and=function(b){for(var w=Math.max(this.g.length,b.g.length),S=[],k=0;k<w;k++)S[k]=this.i(k)&b.i(k);return new a(S,this.h&b.h)},t.or=function(b){for(var w=Math.max(this.g.length,b.g.length),S=[],k=0;k<w;k++)S[k]=this.i(k)|b.i(k);return new a(S,this.h|b.h)},t.xor=function(b){for(var w=Math.max(this.g.length,b.g.length),S=[],k=0;k<w;k++)S[k]=this.i(k)^b.i(k);return new a(S,this.h^b.h)};function x(b){for(var w=b.g.length+1,S=[],k=0;k<w;k++)S[k]=b.i(k)<<1|b.i(k-1)>>>31;return new a(S,b.h)}function I(b,w){var S=w>>5;w%=32;for(var k=b.g.length-S,O=[],N=0;N<k;N++)O[N]=0<w?b.i(N+S)>>>w|b.i(N+S+1)<<32-w:b.i(N+S);return new a(O,b.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,hE=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=l,Pi=a}).apply(typeof Ab<"u"?Ab:typeof self<"u"?self:typeof window<"u"?window:{});var au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dE,ns,pE,ku,ep,mE,gE,yE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,_){return h==Array.prototype||h==Object.prototype||(h[v]=_.value),h};function r(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof au=="object"&&au];for(var v=0;v<h.length;++v){var _=h[v];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var n=r(this);function i(h,v){if(v)e:{var _=n;h=h.split(".");for(var $=0;$<h.length-1;$++){var M=h[$];if(!(M in _))break e;_=_[M]}h=h[h.length-1],$=_[h],v=v($),v!=$&&v!=null&&e(_,h,{configurable:!0,writable:!0,value:v})}}function o(h,v){h instanceof String&&(h+="");var _=0,$=!1,M={next:function(){if(!$&&_<h.length){var L=_++;return{value:v(L,h[L]),done:!1}}return $=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(h){return h||function(){return o(this,function(v,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},s=this||self;function c(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function u(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function l(h,v,_){return h.call.apply(h.bind,arguments)}function f(h,v,_){if(!h)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,$),h.apply(v,M)}}return function(){return h.apply(v,arguments)}}function d(h,v,_){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?l:f,d.apply(null,arguments)}function p(h,v){var _=Array.prototype.slice.call(arguments,1);return function(){var $=_.slice();return $.push.apply($,arguments),h.apply(this,$)}}function m(h,v){function _(){}_.prototype=v.prototype,h.aa=v.prototype,h.prototype=new _,h.prototype.constructor=h,h.Qb=function($,M,L){for(var X=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)X[Ne-2]=arguments[Ne];return v.prototype[M].apply($,X)}}function y(h){const v=h.length;if(0<v){const _=Array(v);for(let $=0;$<v;$++)_[$]=h[$];return _}return[]}function g(h,v){for(let _=1;_<arguments.length;_++){const $=arguments[_];if(c($)){const M=h.length||0,L=$.length||0;h.length=M+L;for(let X=0;X<L;X++)h[M+X]=$[X]}else h.push($)}}class A{constructor(v,_){this.i=v,this.j=_,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function T(h){return/^[\s\xa0]*$/.test(h)}function P(){var h=s.navigator;return h&&(h=h.userAgent)?h:""}function C(h){return C[" "](h),h}C[" "]=function(){};var x=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function I(h,v,_){for(const $ in h)v.call(_,h[$],$,h)}function b(h,v){for(const _ in h)v.call(void 0,h[_],_,h)}function w(h){const v={};for(const _ in h)v[_]=h[_];return v}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(h,v){let _,$;for(let M=1;M<arguments.length;M++){$=arguments[M];for(_ in $)h[_]=$[_];for(let L=0;L<S.length;L++)_=S[L],Object.prototype.hasOwnProperty.call($,_)&&(h[_]=$[_])}}function O(h){var v=1;h=h.split(":");const _=[];for(;0<v&&h.length;)_.push(h.shift()),v--;return h.length&&_.push(h.join(":")),_}function N(h){s.setTimeout(()=>{throw h},0)}function R(){var h=Y;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class V{constructor(){this.h=this.g=null}add(v,_){const $=F.get();$.set(v,_),this.h?this.h.next=$:this.g=$,this.h=$}}var F=new A(()=>new U,h=>h.reset());class U{constructor(){this.next=this.g=this.h=null}set(v,_){this.h=v,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let W,K=!1,Y=new V,ne=()=>{const h=s.Promise.resolve(void 0);W=()=>{h.then(oe)}};var oe=()=>{for(var h;h=R();){try{h.h.call(h.g)}catch(_){N(_)}var v=F;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}K=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var Pe=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};s.addEventListener("test",_,v),s.removeEventListener("test",_,v)}catch{}return h}();function Ae(h,v){if(Q.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var _=this.type=h.type,$=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(x){e:{try{C(v.nodeName);var M=!0;break e}catch{}M=!1}M||(v=null)}}else _=="mouseover"?v=h.fromElement:_=="mouseout"&&(v=h.toElement);this.relatedTarget=v,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ht[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ae.aa.h.call(this)}}m(Ae,Q);var ht={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var _t="closure_listenable_"+(1e6*Math.random()|0),Ye=0;function Z(h,v,_,$,M){this.listener=h,this.proxy=null,this.src=v,this.type=_,this.capture=!!$,this.ha=M,this.key=++Ye,this.da=this.fa=!1}function le(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function de(h){this.src=h,this.g={},this.h=0}de.prototype.add=function(h,v,_,$,M){var L=h.toString();h=this.g[L],h||(h=this.g[L]=[],this.h++);var X=je(h,v,$,M);return-1<X?(v=h[X],_||(v.fa=!1)):(v=new Z(v,this.src,L,!!$,M),v.fa=_,h.push(v)),v};function z(h,v){var _=v.type;if(_ in h.g){var $=h.g[_],M=Array.prototype.indexOf.call($,v,void 0),L;(L=0<=M)&&Array.prototype.splice.call($,M,1),L&&(le(v),h.g[_].length==0&&(delete h.g[_],h.h--))}}function je(h,v,_,$){for(var M=0;M<h.length;++M){var L=h[M];if(!L.da&&L.listener==v&&L.capture==!!_&&L.ha==$)return M}return-1}var ve="closure_lm_"+(1e6*Math.random()|0),We={};function He(h,v,_,$,M){if(Array.isArray(v)){for(var L=0;L<v.length;L++)He(h,v[L],_,$,M);return null}return _=Oa(_),h&&h[_t]?h.K(v,_,u($)?!!$.capture:!!$,M):wt(h,v,_,!1,$,M)}function wt(h,v,_,$,M,L){if(!v)throw Error("Invalid event type");var X=u(M)?!!M.capture:!!M,Ne=oi(h);if(Ne||(h[ve]=Ne=new de(h)),_=Ne.add(v,_,$,X,L),_.proxy)return _;if($=wr(),_.proxy=$,$.src=h,$.listener=_,h.addEventListener)Pe||(M=X),M===void 0&&(M=!1),h.addEventListener(v.toString(),$,M);else if(h.attachEvent)h.attachEvent(xr(v.toString()),$);else if(h.addListener&&h.removeListener)h.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return _}function wr(){function h(_){return v.call(h.src,h.listener,_)}const v=qr;return h}function Ur(h,v,_,$,M){if(Array.isArray(v))for(var L=0;L<v.length;L++)Ur(h,v[L],_,$,M);else $=u($)?!!$.capture:!!$,_=Oa(_),h&&h[_t]?(h=h.i,v=String(v).toString(),v in h.g&&(L=h.g[v],_=je(L,_,$,M),-1<_&&(le(L[_]),Array.prototype.splice.call(L,_,1),L.length==0&&(delete h.g[v],h.h--)))):h&&(h=oi(h))&&(v=h.g[v.toString()],h=-1,v&&(h=je(v,_,$,M)),(_=-1<h?v[h]:null)&&xn(_))}function xn(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[_t])z(v.i,h);else{var _=h.type,$=h.proxy;v.removeEventListener?v.removeEventListener(_,$,h.capture):v.detachEvent?v.detachEvent(xr(_),$):v.addListener&&v.removeListener&&v.removeListener($),(_=oi(v))?(z(_,h),_.h==0&&(_.src=null,v[ve]=null)):le(h)}}}function xr(h){return h in We?We[h]:We[h]="on"+h}function qr(h,v){if(h.da)h=!0;else{v=new Ae(v,this);var _=h.listener,$=h.ha||h.src;h.fa&&xn(h),h=_.call($,v)}return h}function oi(h){return h=h[ve],h instanceof de?h:null}var eo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oa(h){return typeof h=="function"?h:(h[eo]||(h[eo]=function(v){return h.handleEvent(v)}),h[eo])}function xt(){J.call(this),this.i=new de(this),this.M=this,this.F=null}m(xt,J),xt.prototype[_t]=!0,xt.prototype.removeEventListener=function(h,v,_,$){Ur(this,h,v,_,$)};function kt(h,v){var _,$=h.F;if($)for(_=[];$;$=$.F)_.push($);if(h=h.M,$=v.type||v,typeof v=="string")v=new Q(v,h);else if(v instanceof Q)v.target=v.target||h;else{var M=v;v=new Q($,h),k(v,M)}if(M=!0,_)for(var L=_.length-1;0<=L;L--){var X=v.g=_[L];M=qc(X,$,!0,v)&&M}if(X=v.g=h,M=qc(X,$,!0,v)&&M,M=qc(X,$,!1,v)&&M,_)for(L=0;L<_.length;L++)X=v.g=_[L],M=qc(X,$,!1,v)&&M}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var _=h.g[v],$=0;$<_.length;$++)le(_[$]);delete h.g[v],h.h--}}this.F=null},xt.prototype.K=function(h,v,_,$){return this.i.add(String(h),v,!1,_,$)},xt.prototype.L=function(h,v,_,$){return this.i.add(String(h),v,!0,_,$)};function qc(h,v,_,$){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var M=!0,L=0;L<v.length;++L){var X=v[L];if(X&&!X.da&&X.capture==_){var Ne=X.listener,dt=X.ha||X.src;X.fa&&z(h.i,X),M=Ne.call(dt,$)!==!1&&M}}return M&&!$.defaultPrevented}function gv(h,v,_){if(typeof h=="function")_&&(h=d(h,_));else if(h&&typeof h.handleEvent=="function")h=d(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:s.setTimeout(h,v||0)}function yv(h){h.g=gv(()=>{h.g=null,h.i&&(h.i=!1,yv(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class UO extends J{constructor(v,_){super(),this.m=v,this.l=_,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:yv(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ca(h){J.call(this),this.h=h,this.g={}}m(Ca,J);var vv=[];function bv(h){I(h.g,function(v,_){this.g.hasOwnProperty(_)&&xn(v)},h),h.g={}}Ca.prototype.N=function(){Ca.aa.N.call(this),bv(this)},Ca.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bh=s.JSON.stringify,qO=s.JSON.parse,WO=class{stringify(h){return s.JSON.stringify(h,void 0)}parse(h){return s.JSON.parse(h,void 0)}};function Uh(){}Uh.prototype.h=null;function _v(h){return h.h||(h.h=h.i())}function wv(){}var Ra={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qh(){Q.call(this,"d")}m(qh,Q);function Wh(){Q.call(this,"c")}m(Wh,Q);var ai={},xv=null;function Wc(){return xv=xv||new xt}ai.La="serverreachability";function Av(h){Q.call(this,ai.La,h)}m(Av,Q);function ka(h){const v=Wc();kt(v,new Av(v))}ai.STAT_EVENT="statevent";function Ev(h,v){Q.call(this,ai.STAT_EVENT,h),this.stat=v}m(Ev,Q);function Nt(h){const v=Wc();kt(v,new Ev(v,h))}ai.Ma="timingevent";function Tv(h,v){Q.call(this,ai.Ma,h),this.size=v}m(Tv,Q);function Na(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){h()},v)}function $a(){this.g=!0}$a.prototype.xa=function(){this.g=!1};function zO(h,v,_,$,M,L){h.info(function(){if(h.g)if(L)for(var X="",Ne=L.split("&"),dt=0;dt<Ne.length;dt++){var Ee=Ne[dt].split("=");if(1<Ee.length){var At=Ee[0];Ee=Ee[1];var Et=At.split("_");X=2<=Et.length&&Et[1]=="type"?X+(At+"="+Ee+"&"):X+(At+"=redacted&")}}else X=null;else X=L;return"XMLHTTP REQ ("+$+") [attempt "+M+"]: "+v+`
`+_+`
`+X})}function HO(h,v,_,$,M,L,X){h.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+M+"]: "+v+`
`+_+`
`+L+" "+X})}function to(h,v,_,$){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+GO(h,_)+($?" "+$:"")})}function KO(h,v){h.info(function(){return"TIMEOUT: "+v})}$a.prototype.info=function(){};function GO(h,v){if(!h.g)return v;if(!v)return null;try{var _=JSON.parse(v);if(_){for(h=0;h<_.length;h++)if(Array.isArray(_[h])){var $=_[h];if(!(2>$.length)){var M=$[1];if(Array.isArray(M)&&!(1>M.length)){var L=M[0];if(L!="noop"&&L!="stop"&&L!="close")for(var X=1;X<M.length;X++)M[X]=""}}}}return Bh(_)}catch{return v}}var zc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zh;function Hc(){}m(Hc,Uh),Hc.prototype.g=function(){return new XMLHttpRequest},Hc.prototype.i=function(){return{}},zh=new Hc;function An(h,v,_,$){this.j=h,this.i=v,this.l=_,this.R=$||1,this.U=new Ca(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pv}function Pv(){this.i=null,this.g="",this.h=!1}var Iv={},Hh={};function Kh(h,v,_){h.L=1,h.v=Xc(Wr(v)),h.m=_,h.P=!0,Ov(h,null)}function Ov(h,v){h.F=Date.now(),Kc(h),h.A=Wr(h.v);var _=h.A,$=h.R;Array.isArray($)||($=[String($)]),qv(_.i,"t",$),h.C=0,_=h.j.J,h.h=new Pv,h.g=sb(h.j,_?v:null,!h.m),0<h.O&&(h.M=new UO(d(h.Y,h,h.g),h.O)),v=h.U,_=h.g,$=h.ca;var M="readystatechange";Array.isArray(M)||(M&&(vv[0]=M.toString()),M=vv);for(var L=0;L<M.length;L++){var X=He(_,M[L],$||v.handleEvent,!1,v.h||v);if(!X)break;v.g[X.key]=X}v=h.H?w(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),ka(),zO(h.i,h.u,h.A,h.l,h.R,h.m)}An.prototype.ca=function(h){h=h.target;const v=this.M;v&&zr(h)==3?v.j():this.Y(h)},An.prototype.Y=function(h){try{if(h==this.g)e:{const Et=zr(this.g);var v=this.g.Ba();const io=this.g.Z();if(!(3>Et)&&(Et!=3||this.g&&(this.h.h||this.g.oa()||Xv(this.g)))){this.J||Et!=4||v==7||(v==8||0>=io?ka(3):ka(2)),Gh(this);var _=this.g.Z();this.X=_;t:if(Cv(this)){var $=Xv(this.g);h="";var M=$.length,L=zr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){si(this),ja(this);var X="";break t}this.h.i=new s.TextDecoder}for(v=0;v<M;v++)this.h.h=!0,h+=this.h.i.decode($[v],{stream:!(L&&v==M-1)});$.length=0,this.h.g+=h,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=_==200,HO(this.i,this.u,this.A,this.l,this.R,Et,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,dt=this.g;if((Ne=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Ne)){var Ee=Ne;break t}}Ee=null}if(_=Ee)to(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yh(this,_);else{this.o=!1,this.s=3,Nt(12),si(this),ja(this);break e}}if(this.P){_=!0;let cr;for(;!this.J&&this.C<X.length;)if(cr=YO(this,X),cr==Hh){Et==4&&(this.s=4,Nt(14),_=!1),to(this.i,this.l,null,"[Incomplete Response]");break}else if(cr==Iv){this.s=4,Nt(15),to(this.i,this.l,X,"[Invalid Chunk]"),_=!1;break}else to(this.i,this.l,cr,null),Yh(this,cr);if(Cv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||X.length!=0||this.h.h||(this.s=1,Nt(16),_=!1),this.o=this.o&&_,!_)to(this.i,this.l,X,"[Invalid Chunked Response]"),si(this),ja(this);else if(0<X.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),td(At),At.M=!0,Nt(11))}}else to(this.i,this.l,X,null),Yh(this,X);Et==4&&si(this),this.o&&!this.J&&(Et==4?nb(this.j,this):(this.o=!1,Kc(this)))}else hC(this.g),_==400&&0<X.indexOf("Unknown SID")?(this.s=3,Nt(12)):(this.s=0,Nt(13)),si(this),ja(this)}}}catch{}finally{}};function Cv(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function YO(h,v){var _=h.C,$=v.indexOf(`
`,_);return $==-1?Hh:(_=Number(v.substring(_,$)),isNaN(_)?Iv:($+=1,$+_>v.length?Hh:(v=v.slice($,$+_),h.C=$+_,v)))}An.prototype.cancel=function(){this.J=!0,si(this)};function Kc(h){h.S=Date.now()+h.I,Rv(h,h.I)}function Rv(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Na(d(h.ba,h),v)}function Gh(h){h.B&&(s.clearTimeout(h.B),h.B=null)}An.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(KO(this.i,this.A),this.L!=2&&(ka(),Nt(17)),si(this),this.s=2,ja(this)):Rv(this,this.S-h)};function ja(h){h.j.G==0||h.J||nb(h.j,h)}function si(h){Gh(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,bv(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Yh(h,v){try{var _=h.j;if(_.G!=0&&(_.g==h||Xh(_.h,h))){if(!h.K&&Xh(_.h,h)&&_.G==3){try{var $=_.Da.g.parse(v)}catch{$=null}if(Array.isArray($)&&$.length==3){var M=$;if(M[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<h.F)ru(_),eu(_);else break e;ed(_),Nt(18)}}else _.za=M[1],0<_.za-_.T&&37500>M[2]&&_.F&&_.v==0&&!_.C&&(_.C=Na(d(_.Za,_),6e3));if(1>=$v(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else ui(_,11)}else if((h.K||_.g==h)&&ru(_),!T(v))for(M=_.Da.g.parse(v),v=0;v<M.length;v++){let Ee=M[v];if(_.T=Ee[0],Ee=Ee[1],_.G==2)if(Ee[0]=="c"){_.K=Ee[1],_.ia=Ee[2];const At=Ee[3];At!=null&&(_.la=At,_.j.info("VER="+_.la));const Et=Ee[4];Et!=null&&(_.Aa=Et,_.j.info("SVER="+_.Aa));const io=Ee[5];io!=null&&typeof io=="number"&&0<io&&($=1.5*io,_.L=$,_.j.info("backChannelRequestTimeoutMs_="+$)),$=_;const cr=h.g;if(cr){const iu=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(iu){var L=$.h;L.g||iu.indexOf("spdy")==-1&&iu.indexOf("quic")==-1&&iu.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Qh(L,L.h),L.h=null))}if($.D){const rd=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;rd&&($.ya=rd,Fe($.I,$.D,rd))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-h.F,_.j.info("Handshake RTT: "+_.R+"ms")),$=_;var X=h;if($.qa=ab($,$.J?$.ia:null,$.W),X.K){jv($.h,X);var Ne=X,dt=$.L;dt&&(Ne.I=dt),Ne.B&&(Gh(Ne),Kc(Ne)),$.g=X}else tb($);0<_.i.length&&tu(_)}else Ee[0]!="stop"&&Ee[0]!="close"||ui(_,7);else _.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?ui(_,7):Zh(_):Ee[0]!="noop"&&_.l&&_.l.ta(Ee),_.v=0)}}ka(4)}catch{}}var XO=class{constructor(h,v){this.g=h,this.map=v}};function kv(h){this.l=h||10,s.PerformanceNavigationTiming?(h=s.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nv(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function $v(h){return h.h?1:h.g?h.g.size:0}function Xh(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Qh(h,v){h.g?h.g.add(v):h.h=v}function jv(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}kv.prototype.cancel=function(){if(this.i=Dv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Dv(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const _ of h.g.values())v=v.concat(_.D);return v}return y(h.i)}function QO(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var v=[],_=h.length,$=0;$<_;$++)v.push(h[$]);return v}v=[],_=0;for($ in h)v[_++]=h[$];return v}function JO(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var v=[];h=h.length;for(var _=0;_<h;_++)v.push(_);return v}v=[],_=0;for(const $ in h)v[_++]=$;return v}}}function Mv(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var _=JO(h),$=QO(h),M=$.length,L=0;L<M;L++)v.call(void 0,$[L],_&&_[L],h)}var Lv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ZO(h,v){if(h){h=h.split("&");for(var _=0;_<h.length;_++){var $=h[_].indexOf("="),M=null;if(0<=$){var L=h[_].substring(0,$);M=h[_].substring($+1)}else L=h[_];v(L,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function ci(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ci){this.h=h.h,Gc(this,h.j),this.o=h.o,this.g=h.g,Yc(this,h.s),this.l=h.l;var v=h.i,_=new La;_.i=v.i,v.g&&(_.g=new Map(v.g),_.h=v.h),Fv(this,_),this.m=h.m}else h&&(v=String(h).match(Lv))?(this.h=!1,Gc(this,v[1]||"",!0),this.o=Da(v[2]||""),this.g=Da(v[3]||"",!0),Yc(this,v[4]),this.l=Da(v[5]||"",!0),Fv(this,v[6]||"",!0),this.m=Da(v[7]||"")):(this.h=!1,this.i=new La(null,this.h))}ci.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Ma(v,Vv,!0),":");var _=this.g;return(_||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Ma(v,Vv,!0),"@"),h.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&h.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(Ma(_,_.charAt(0)=="/"?rC:tC,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",Ma(_,iC)),h.join("")};function Wr(h){return new ci(h)}function Gc(h,v,_){h.j=_?Da(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Yc(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function Fv(h,v,_){v instanceof La?(h.i=v,oC(h.i,h.h)):(_||(v=Ma(v,nC)),h.i=new La(v,h.h))}function Fe(h,v,_){h.i.set(v,_)}function Xc(h){return Fe(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Da(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ma(h,v,_){return typeof h=="string"?(h=encodeURI(h).replace(v,eC),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function eC(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Vv=/[#\/\?@]/g,tC=/[#\?:]/g,rC=/[#\?]/g,nC=/[#\?@]/g,iC=/#/g;function La(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function En(h){h.g||(h.g=new Map,h.h=0,h.i&&ZO(h.i,function(v,_){h.add(decodeURIComponent(v.replace(/\+/g," ")),_)}))}t=La.prototype,t.add=function(h,v){En(this),this.i=null,h=ro(this,h);var _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(v),this.h+=1,this};function Bv(h,v){En(h),v=ro(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Uv(h,v){return En(h),v=ro(h,v),h.g.has(v)}t.forEach=function(h,v){En(this),this.g.forEach(function(_,$){_.forEach(function(M){h.call(v,M,$,this)},this)},this)},t.na=function(){En(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),_=[];for(let $=0;$<v.length;$++){const M=h[$];for(let L=0;L<M.length;L++)_.push(v[$])}return _},t.V=function(h){En(this);let v=[];if(typeof h=="string")Uv(this,h)&&(v=v.concat(this.g.get(ro(this,h))));else{h=Array.from(this.g.values());for(let _=0;_<h.length;_++)v=v.concat(h[_])}return v},t.set=function(h,v){return En(this),this.i=null,h=ro(this,h),Uv(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},t.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function qv(h,v,_){Bv(h,v),0<_.length&&(h.i=null,h.g.set(ro(h,v),y(_)),h.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var _=0;_<v.length;_++){var $=v[_];const L=encodeURIComponent(String($)),X=this.V($);for($=0;$<X.length;$++){var M=L;X[$]!==""&&(M+="="+encodeURIComponent(String(X[$]))),h.push(M)}}return this.i=h.join("&")};function ro(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function oC(h,v){v&&!h.j&&(En(h),h.i=null,h.g.forEach(function(_,$){var M=$.toLowerCase();$!=M&&(Bv(this,$),qv(this,M,_))},h)),h.j=v}function aC(h,v){const _=new $a;if(s.Image){const $=new Image;$.onload=p(Tn,_,"TestLoadImage: loaded",!0,v,$),$.onerror=p(Tn,_,"TestLoadImage: error",!1,v,$),$.onabort=p(Tn,_,"TestLoadImage: abort",!1,v,$),$.ontimeout=p(Tn,_,"TestLoadImage: timeout",!1,v,$),s.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=h}else v(!1)}function sC(h,v){const _=new $a,$=new AbortController,M=setTimeout(()=>{$.abort(),Tn(_,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:$.signal}).then(L=>{clearTimeout(M),L.ok?Tn(_,"TestPingServer: ok",!0,v):Tn(_,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(M),Tn(_,"TestPingServer: error",!1,v)})}function Tn(h,v,_,$,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),$(_)}catch{}}function cC(){this.g=new WO}function uC(h,v,_){const $=_||"";try{Mv(h,function(M,L){let X=M;u(M)&&(X=Bh(M)),v.push($+L+"="+encodeURIComponent(X))})}catch(M){throw v.push($+"type="+encodeURIComponent("_badmap")),M}}function Qc(h){this.l=h.Ub||null,this.j=h.eb||!1}m(Qc,Uh),Qc.prototype.g=function(){return new Jc(this.l,this.j)},Qc.prototype.i=function(h){return function(){return h}}({});function Jc(h,v){xt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Jc,xt),t=Jc.prototype,t.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,Va(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||s).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fa(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Va(this)),this.g&&(this.readyState=3,Va(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wv(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wv(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Fa(this):Va(this),this.readyState==3&&Wv(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Fa(this))},t.Qa=function(h){this.g&&(this.response=h,Fa(this))},t.ga=function(){this.g&&Fa(this)};function Fa(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Va(h)}t.setRequestHeader=function(h,v){this.u.append(h,v)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var _=v.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=v.next();return h.join(`\r
`)};function Va(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Jc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function zv(h){let v="";return I(h,function(_,$){v+=$,v+=":",v+=_,v+=`\r
`}),v}function Jh(h,v,_){e:{for($ in _){var $=!1;break e}$=!0}$||(_=zv(_),typeof h=="string"?_!=null&&encodeURIComponent(String(_)):Fe(h,v,_))}function Ke(h){xt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Ke,xt);var lC=/^https?$/i,fC=["POST","PUT"];t=Ke.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,v,_,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zh.g(),this.v=this.o?_v(this.o):_v(zh),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(L){Hv(this,L);return}if(h=_||"",_=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var M in $)_.set(M,$[M]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const L of $.keys())_.set(L,$.get(L));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(_.keys()).find(L=>L.toLowerCase()=="content-type"),M=s.FormData&&h instanceof s.FormData,!(0<=Array.prototype.indexOf.call(fC,v,void 0))||$||M||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,X]of _)this.g.setRequestHeader(L,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yv(this),this.u=!0,this.g.send(h),this.u=!1}catch(L){Hv(this,L)}};function Hv(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,Kv(h),Zc(h)}function Kv(h){h.A||(h.A=!0,kt(h,"complete"),kt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,kt(this,"complete"),kt(this,"abort"),Zc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zc(this,!0)),Ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Gv(this):this.bb())},t.bb=function(){Gv(this)};function Gv(h){if(h.h&&typeof a<"u"&&(!h.v[1]||zr(h)!=4||h.Z()!=2)){if(h.u&&zr(h)==4)gv(h.Ea,0,h);else if(kt(h,"readystatechange"),zr(h)==4){h.h=!1;try{const X=h.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var _;if(!(_=v)){var $;if($=X===0){var M=String(h.D).match(Lv)[1]||null;!M&&s.self&&s.self.location&&(M=s.self.location.protocol.slice(0,-1)),$=!lC.test(M?M.toLowerCase():"")}_=$}if(_)kt(h,"complete"),kt(h,"success");else{h.m=6;try{var L=2<zr(h)?h.g.statusText:""}catch{L=""}h.l=L+" ["+h.Z()+"]",Kv(h)}}finally{Zc(h)}}}}function Zc(h,v){if(h.g){Yv(h);const _=h.g,$=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||kt(h,"ready");try{_.onreadystatechange=$}catch{}}}function Yv(h){h.I&&(s.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function zr(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<zr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),qO(v)}};function Xv(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function hC(h){const v={};h=(h.g&&2<=zr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<h.length;$++){if(T(h[$]))continue;var _=O(h[$]);const M=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const L=v[M]||[];v[M]=L,L.push(_)}b(v,function($){return $.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ba(h,v,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||v}function Qv(h){this.Aa=0,this.i=[],this.j=new $a,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ba("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ba("baseRetryDelayMs",5e3,h),this.cb=Ba("retryDelaySeedMs",1e4,h),this.Wa=Ba("forwardChannelMaxRetries",2,h),this.wa=Ba("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new kv(h&&h.concurrentRequestLimit),this.Da=new cC,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Qv.prototype,t.la=8,t.G=1,t.connect=function(h,v,_,$){Nt(0),this.W=h,this.H=v||{},_&&$!==void 0&&(this.H.OSID=_,this.H.OAID=$),this.F=this.X,this.I=ab(this,null,this.W),tu(this)};function Zh(h){if(Jv(h),h.G==3){var v=h.U++,_=Wr(h.I);if(Fe(_,"SID",h.K),Fe(_,"RID",v),Fe(_,"TYPE","terminate"),Ua(h,_),v=new An(h,h.j,v),v.L=2,v.v=Xc(Wr(_)),_=!1,s.navigator&&s.navigator.sendBeacon)try{_=s.navigator.sendBeacon(v.v.toString(),"")}catch{}!_&&s.Image&&(new Image().src=v.v,_=!0),_||(v.g=sb(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Kc(v)}ob(h)}function eu(h){h.g&&(td(h),h.g.cancel(),h.g=null)}function Jv(h){eu(h),h.u&&(s.clearTimeout(h.u),h.u=null),ru(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&s.clearTimeout(h.s),h.s=null)}function tu(h){if(!Nv(h.h)&&!h.s){h.s=!0;var v=h.Ga;W||ne(),K||(W(),K=!0),Y.add(v,h),h.B=0}}function dC(h,v){return $v(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Na(d(h.Ga,h,v),ib(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const M=new An(this,this.j,h);let L=this.o;if(this.S&&(L?(L=w(L),k(L,this.S)):L=this.S),this.m!==null||this.O||(M.H=L,L=null),this.P)e:{for(var v=0,_=0;_<this.i.length;_++){t:{var $=this.i[_];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(v+=$,4096<v){v=_;break e}if(v===4096||_===this.i.length-1){v=_+1;break e}}v=1e3}else v=1e3;v=eb(this,M,v),_=Wr(this.I),Fe(_,"RID",h),Fe(_,"CVER",22),this.D&&Fe(_,"X-HTTP-Session-Id",this.D),Ua(this,_),L&&(this.O?v="headers="+encodeURIComponent(String(zv(L)))+"&"+v:this.m&&Jh(_,this.m,L)),Qh(this.h,M),this.Ua&&Fe(_,"TYPE","init"),this.P?(Fe(_,"$req",v),Fe(_,"SID","null"),M.T=!0,Kh(M,_,null)):Kh(M,_,v),this.G=2}}else this.G==3&&(h?Zv(this,h):this.i.length==0||Nv(this.h)||Zv(this))};function Zv(h,v){var _;v?_=v.l:_=h.U++;const $=Wr(h.I);Fe($,"SID",h.K),Fe($,"RID",_),Fe($,"AID",h.T),Ua(h,$),h.m&&h.o&&Jh($,h.m,h.o),_=new An(h,h.j,_,h.B+1),h.m===null&&(_.H=h.o),v&&(h.i=v.D.concat(h.i)),v=eb(h,_,1e3),_.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Qh(h.h,_),Kh(_,$,v)}function Ua(h,v){h.H&&I(h.H,function(_,$){Fe(v,$,_)}),h.l&&Mv({},function(_,$){Fe(v,$,_)})}function eb(h,v,_){_=Math.min(h.i.length,_);var $=h.l?d(h.l.Na,h.l,h):null;e:{var M=h.i;let L=-1;for(;;){const X=["count="+_];L==-1?0<_?(L=M[0].g,X.push("ofs="+L)):L=0:X.push("ofs="+L);let Ne=!0;for(let dt=0;dt<_;dt++){let Ee=M[dt].g;const At=M[dt].map;if(Ee-=L,0>Ee)L=Math.max(0,M[dt].g-100),Ne=!1;else try{uC(At,X,"req"+Ee+"_")}catch{$&&$(At)}}if(Ne){$=X.join("&");break e}}}return h=h.i.splice(0,_),v.D=h,$}function tb(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;W||ne(),K||(W(),K=!0),Y.add(v,h),h.v=0}}function ed(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Na(d(h.Fa,h),ib(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,rb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Na(d(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Nt(10),eu(this),rb(this))};function td(h){h.A!=null&&(s.clearTimeout(h.A),h.A=null)}function rb(h){h.g=new An(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=Wr(h.qa);Fe(v,"RID","rpc"),Fe(v,"SID",h.K),Fe(v,"AID",h.T),Fe(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&Fe(v,"TO",h.ja),Fe(v,"TYPE","xmlhttp"),Ua(h,v),h.m&&h.o&&Jh(v,h.m,h.o),h.L&&(h.g.I=h.L);var _=h.g;h=h.ia,_.L=1,_.v=Xc(Wr(v)),_.m=null,_.P=!0,Ov(_,h)}t.Za=function(){this.C!=null&&(this.C=null,eu(this),ed(this),Nt(19))};function ru(h){h.C!=null&&(s.clearTimeout(h.C),h.C=null)}function nb(h,v){var _=null;if(h.g==v){ru(h),td(h),h.g=null;var $=2}else if(Xh(h.h,v))_=v.D,jv(h.h,v),$=1;else return;if(h.G!=0){if(v.o)if($==1){_=v.m?v.m.length:0,v=Date.now()-v.F;var M=h.B;$=Wc(),kt($,new Tv($,_)),tu(h)}else tb(h);else if(M=v.s,M==3||M==0&&0<v.X||!($==1&&dC(h,v)||$==2&&ed(h)))switch(_&&0<_.length&&(v=h.h,v.i=v.i.concat(_)),M){case 1:ui(h,5);break;case 4:ui(h,10);break;case 3:ui(h,6);break;default:ui(h,2)}}}function ib(h,v){let _=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(_*=2),_*v}function ui(h,v){if(h.j.info("Error code "+v),v==2){var _=d(h.fb,h),$=h.Xa;const M=!$;$=new ci($||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Gc($,"https"),Xc($),M?aC($.toString(),_):sC($.toString(),_)}else Nt(2);h.G=0,h.l&&h.l.sa(v),ob(h),Jv(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function ob(h){if(h.G=0,h.ka=[],h.l){const v=Dv(h.h);(v.length!=0||h.i.length!=0)&&(g(h.ka,v),g(h.ka,h.i),h.h.i.length=0,y(h.i),h.i.length=0),h.l.ra()}}function ab(h,v,_){var $=_ instanceof ci?Wr(_):new ci(_);if($.g!="")v&&($.g=v+"."+$.g),Yc($,$.s);else{var M=s.location;$=M.protocol,v=v?v+"."+M.hostname:M.hostname,M=+M.port;var L=new ci(null);$&&Gc(L,$),v&&(L.g=v),M&&Yc(L,M),_&&(L.l=_),$=L}return _=h.D,v=h.ya,_&&v&&Fe($,_,v),Fe($,"VER",h.la),Ua(h,$),$}function sb(h,v,_){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new Ke(new Qc({eb:_})):new Ke(h.pa),v.Ha(h.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function cb(){}t=cb.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function nu(){}nu.prototype.g=function(h,v){return new qt(h,v)};function qt(h,v){xt.call(this),this.g=new Qv(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!T(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!T(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new no(this)}m(qt,xt),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Zh(this.g)},qt.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.u&&(_={},_.__data__=Bh(h),h=_);v.i.push(new XO(v.Ya++,h)),v.G==3&&tu(v)},qt.prototype.N=function(){this.g.l=null,delete this.j,Zh(this.g),delete this.g,qt.aa.N.call(this)};function ub(h){qh.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const _ in v){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}m(ub,qh);function lb(){Wh.call(this),this.status=1}m(lb,Wh);function no(h){this.g=h}m(no,cb),no.prototype.ua=function(){kt(this.g,"a")},no.prototype.ta=function(h){kt(this.g,new ub(h))},no.prototype.sa=function(h){kt(this.g,new lb)},no.prototype.ra=function(){kt(this.g,"b")},nu.prototype.createWebChannel=nu.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,yE=function(){return new nu},gE=function(){return Wc()},mE=ai,ep={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zc.NO_ERROR=0,zc.TIMEOUT=8,zc.HTTP_ERROR=6,ku=zc,Sv.COMPLETE="complete",pE=Sv,wv.EventType=Ra,Ra.OPEN="a",Ra.CLOSE="b",Ra.ERROR="c",Ra.MESSAGE="d",xt.prototype.listen=xt.prototype.K,ns=wv,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,dE=Ke}).apply(typeof au<"u"?au:typeof self<"u"?self:typeof window<"u"?window:{});const Eb="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Pt.UNAUTHENTICATED=new Pt(null),Pt.GOOGLE_CREDENTIALS=new Pt("google-credentials-uid"),Pt.FIRST_PARTY=new Pt("first-party-uid"),Pt.MOCK_USER=new Pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new rg("@firebase/firestore");function qa(){return ki.logLevel}function re(t,...e){if(ki.logLevel<=we.DEBUG){const r=e.map(og);ki.debug(`Firestore (${sa}): ${t}`,...r)}}function cn(t,...e){if(ki.logLevel<=we.ERROR){const r=e.map(og);ki.error(`Firestore (${sa}): ${t}`,...r)}}function Po(t,...e){if(ki.logLevel<=we.WARN){const r=e.map(og);ki.warn(`Firestore (${sa}): ${t}`,...r)}}function og(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: `+t;throw cn(e),new Error(e)}function Ie(t,e){t||fe()}function me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Lr{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ek{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Pt.UNAUTHENTICATED))}shutdown(){}}class tk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class rk{constructor(e){this.t=e,this.currentUser=Pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Ie(this.o===void 0);let n=this.i;const i=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let o=new tn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new tn,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},s=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>s(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?s(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new tn)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ie(typeof n.accessToken=="string"),new vE(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new Pt(e)}}class nk{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ik{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new nk(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ok{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ak{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Ie(this.o===void 0);const n=o=>{o.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,re("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>n(o))};const i=o=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Ie(typeof r.token=="string"),this.R=r.token,new ok(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=sk(40);for(let o=0;o<i.length;++o)n.length<20&&i[o]<r&&(n+=e.charAt(i[o]%e.length))}return n}}function Te(t,e){return t<e?-1:t>e?1:0}function Io(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ee(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ee(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ee(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new at(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pe(e)}static min(){return new pe(new at(0,0))}static max(){return new pe(new at(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,r,n){r===void 0?r=0:r>e.length&&fe(),n===void 0?n=e.length-r:n>e.length-r&&fe(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return As.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof As?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const o=e.get(i),a=r.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Ue extends As{construct(e,r,n){return new Ue(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ee(q.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new Ue(r)}static emptyPath(){return new Ue([])}}const ck=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gt extends As{construct(e,r,n){return new gt(e,r,n)}static isValidIdentifier(e){return ck.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new gt(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const o=()=>{if(n.length===0)throw new ee(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new ee(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ee(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,i+=2}else s==="`"?(a=!a,i++):s!=="."||a?(n+=s,i++):(o(),i++)}if(o(),a)throw new ee(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gt(r)}static emptyPath(){return new gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Ue.fromString(e))}static fromName(e){return new ae(Ue.fromString(e).popFirst(5))}static empty(){return new ae(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Ue.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Ue(e.slice()))}}function uk(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=pe.fromTimestamp(n===1e9?new at(r+1,0):new at(r,n));return new Gn(i,ae.empty(),e)}function lk(t){return new Gn(t.readTime,t.key,-1)}class Gn{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Gn(pe.min(),ae.empty(),-1)}static max(){return new Gn(pe.max(),ae.empty(),-1)}}function fk(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ae.comparator(t.documentKey,e.documentKey),r!==0?r:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yc(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==hk)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new H((n,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,i)},this.catchCallback=o=>{this.wrapFailure(r,o).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof H?r:H.resolve(r)}catch(r){return H.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):H.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):H.reject(r)}static resolve(e){return new H((r,n)=>{r(e)})}static reject(e){return new H((r,n)=>{n(e)})}static waitFor(e){return new H((r,n)=>{let i=0,o=0,a=!1;e.forEach(s=>{++i,s.next(()=>{++o,a&&o===i&&r()},c=>n(c))}),a=!0,o===i&&r()})}static or(e){let r=H.resolve(!1);for(const n of e)r=r.next(i=>i?H.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,o)=>{n.push(r.call(this,i,o))}),this.waitFor(n)}static mapArray(e,r){return new H((n,i)=>{const o=e.length,a=new Array(o);let s=0;for(let c=0;c<o;c++){const u=c;r(e[u]).next(l=>{a[u]=l,++s,s===o&&n(a)},l=>i(l))}})}static doWhile(e,r){return new H((n,i)=>{const o=()=>{e()===!0?r().next(()=>{o()},i):n()};o()})}}function pk(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function vc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ag.oe=-1;function vf(t){return t==null}function Hu(t){return t===0&&1/t==-1/0}function mk(t){return typeof t=="number"&&Number.isInteger(t)&&!Hu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Hi(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function _E(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,r){this.comparator=e,this.root=r||mt.EMPTY}insert(e,r){return new ze(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new su(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new su(this.root,e,this.comparator,!1)}getReverseIterator(){return new su(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new su(this.root,e,this.comparator,!0)}}class su{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?n(e.key,r):1,r&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mt{constructor(e,r,n,i,o){this.key=e,this.value=r,this.color=n??mt.RED,this.left=i??mt.EMPTY,this.right=o??mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,o){return new mt(e??this.key,r??this.value,n??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const o=n(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,r,n),null):o===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return mt.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1;mt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,r,n,i,o){return this}insert(e,r,n){return new mt(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Sb(this.data.getIterator())}getIteratorFrom(e){return new Sb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new vt(this.comparator);return r.data=e,r}}class Sb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new Yt([])}unionWith(e){let r=new vt(gt.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Yt(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Io(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new wE("Invalid base64 string: "+o):o}}(e);return new bt(r)}static fromUint8Array(e){const r=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new bt(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const gk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yn(t){if(Ie(!!t),typeof t=="string"){let e=0;const r=gk.exec(t);if(Ie(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ni(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function cg(t){const e=t.mapValue.fields.__previous_value__;return sg(e)?cg(e):e}function Es(t){const e=Yn(t.mapValue.fields.__local_write_time__.timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,r,n,i,o,a,s,c,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=s,this.longPollingOptions=c,this.useFetchStreams=u}}class Ts{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Ts("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ts&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function $i(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sg(t)?4:bk(t)?9007199254740991:vk(t)?10:11:fe()}function jr(t,e){if(t===e)return!0;const r=$i(t);if(r!==$i(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Es(t).isEqual(Es(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const a=Yn(i.timestampValue),s=Yn(o.timestampValue);return a.seconds===s.seconds&&a.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Ni(i.bytesValue).isEqual(Ni(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Xe(i.geoPointValue.latitude)===Xe(o.geoPointValue.latitude)&&Xe(i.geoPointValue.longitude)===Xe(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Xe(i.integerValue)===Xe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const a=Xe(i.doubleValue),s=Xe(o.doubleValue);return a===s?Hu(a)===Hu(s):isNaN(a)&&isNaN(s)}return!1}(t,e);case 9:return Io(t.arrayValue.values||[],e.arrayValue.values||[],jr);case 10:case 11:return function(i,o){const a=i.mapValue.fields||{},s=o.mapValue.fields||{};if(Tb(a)!==Tb(s))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(s[c]===void 0||!jr(a[c],s[c])))return!1;return!0}(t,e);default:return fe()}}function Ss(t,e){return(t.values||[]).find(r=>jr(r,e))!==void 0}function Oo(t,e){if(t===e)return 0;const r=$i(t),n=$i(e);if(r!==n)return Te(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(o,a){const s=Xe(o.integerValue||o.doubleValue),c=Xe(a.integerValue||a.doubleValue);return s<c?-1:s>c?1:s===c?0:isNaN(s)?isNaN(c)?0:-1:1}(t,e);case 3:return Pb(t.timestampValue,e.timestampValue);case 4:return Pb(Es(t),Es(e));case 5:return Te(t.stringValue,e.stringValue);case 6:return function(o,a){const s=Ni(o),c=Ni(a);return s.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const s=o.split("/"),c=a.split("/");for(let u=0;u<s.length&&u<c.length;u++){const l=Te(s[u],c[u]);if(l!==0)return l}return Te(s.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const s=Te(Xe(o.latitude),Xe(a.latitude));return s!==0?s:Te(Xe(o.longitude),Xe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ib(t.arrayValue,e.arrayValue);case 10:return function(o,a){var s,c,u,l;const f=o.fields||{},d=a.fields||{},p=(s=f.value)===null||s===void 0?void 0:s.arrayValue,m=(c=d.value)===null||c===void 0?void 0:c.arrayValue,y=Te(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((l=m==null?void 0:m.values)===null||l===void 0?void 0:l.length)||0);return y!==0?y:Ib(p,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===cu.mapValue&&a===cu.mapValue)return 0;if(o===cu.mapValue)return 1;if(a===cu.mapValue)return-1;const s=o.fields||{},c=Object.keys(s),u=a.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let f=0;f<c.length&&f<l.length;++f){const d=Te(c[f],l[f]);if(d!==0)return d;const p=Oo(s[c[f]],u[l[f]]);if(p!==0)return p}return Te(c.length,l.length)}(t.mapValue,e.mapValue);default:throw fe()}}function Pb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const r=Yn(t),n=Yn(e),i=Te(r.seconds,n.seconds);return i!==0?i:Te(r.nanos,n.nanos)}function Ib(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const o=Oo(r[i],n[i]);if(o)return o}return Te(r.length,n.length)}function Co(t){return tp(t)}function tp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Yn(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Ni(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return ae.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const o of r.values||[])i?i=!1:n+=",",n+=tp(o);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of n)o?o=!1:i+=",",i+=`${a}:${tp(r.fields[a])}`;return i+"}"}(t.mapValue):fe()}function Ob(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function rp(t){return!!t&&"integerValue"in t}function ug(t){return!!t&&"arrayValue"in t}function Cb(t){return!!t&&"nullValue"in t}function Rb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Nu(t){return!!t&&"mapValue"in t}function vk(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function cs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Hi(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=cs(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=cs(t.arrayValue.values[r]);return e}return Object.assign({},t)}function bk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.value=e}static empty(){return new Lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Nu(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=cs(r)}setAll(e){let r=gt.emptyPath(),n={},i=[];e.forEach((a,s)=>{if(!r.isImmediateParentOf(s)){const c=this.getFieldsMap(r);this.applyChanges(c,n,i),n={},i=[],r=s.popLast()}a?n[s.lastSegment()]=cs(a):i.push(s.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,n,i)}delete(e){const r=this.field(e.popLast());Nu(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return jr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];Nu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Hi(r,(i,o)=>e[i]=o);for(const i of n)delete e[i]}clone(){return new Lt(cs(this.value))}}function xE(t){const e=[];return Hi(t.fields,(r,n)=>{const i=new gt([r]);if(Nu(n)){const o=xE(n.mapValue).fields;if(o.length===0)e.push(i);else for(const a of o)e.push(i.child(a))}else e.push(i)}),new Yt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,r,n,i,o,a,s){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=o,this.data=a,this.documentState=s}static newInvalidDocument(e){return new It(e,0,pe.min(),pe.min(),pe.min(),Lt.empty(),0)}static newFoundDocument(e,r,n,i){return new It(e,1,r,pe.min(),n,i,0)}static newNoDocument(e,r){return new It(e,2,r,pe.min(),pe.min(),Lt.empty(),0)}static newUnknownDocument(e,r){return new It(e,3,r,pe.min(),pe.min(),Lt.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof It&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new It(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,r){this.position=e,this.inclusive=r}}function kb(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const o=e[i],a=t.position[i];if(o.field.isKeyField()?n=ae.comparator(ae.fromName(a.referenceValue),r.key):n=Oo(a,r.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function Nb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!jr(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,r="asc"){this.field=e,this.dir=r}}function _k(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{}class tt extends AE{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new xk(e,r,n):r==="array-contains"?new Tk(e,n):r==="in"?new Sk(e,n):r==="not-in"?new Pk(e,n):r==="array-contains-any"?new Ik(e,n):new tt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new Ak(e,n):new Ek(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Oo(r,this.value)):r!==null&&$i(this.value)===$i(r)&&this.matchesComparison(Oo(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yr extends AE{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new yr(e,r)}matches(e){return EE(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function EE(t){return t.op==="and"}function TE(t){return wk(t)&&EE(t)}function wk(t){for(const e of t.filters)if(e instanceof yr)return!1;return!0}function np(t){if(t instanceof tt)return t.field.canonicalString()+t.op.toString()+Co(t.value);if(TE(t))return t.filters.map(e=>np(e)).join(",");{const e=t.filters.map(r=>np(r)).join(",");return`${t.op}(${e})`}}function SE(t,e){return t instanceof tt?function(n,i){return i instanceof tt&&n.op===i.op&&n.field.isEqual(i.field)&&jr(n.value,i.value)}(t,e):t instanceof yr?function(n,i){return i instanceof yr&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((o,a,s)=>o&&SE(a,i.filters[s]),!0):!1}(t,e):void fe()}function PE(t){return t instanceof tt?function(r){return`${r.field.canonicalString()} ${r.op} ${Co(r.value)}`}(t):t instanceof yr?function(r){return r.op.toString()+" {"+r.getFilters().map(PE).join(" ,")+"}"}(t):"Filter"}class xk extends tt{constructor(e,r,n){super(e,r,n),this.key=ae.fromName(n.referenceValue)}matches(e){const r=ae.comparator(e.key,this.key);return this.matchesComparison(r)}}class Ak extends tt{constructor(e,r){super(e,"in",r),this.keys=IE("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Ek extends tt{constructor(e,r){super(e,"not-in",r),this.keys=IE("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function IE(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>ae.fromName(n.referenceValue))}class Tk extends tt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return ug(r)&&Ss(r.arrayValue,this.value)}}class Sk extends tt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Ss(this.value.arrayValue,r)}}class Pk extends tt{constructor(e,r){super(e,"not-in",r)}matches(e){if(Ss(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Ss(this.value.arrayValue,r)}}class Ik extends tt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!ug(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Ss(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,r=null,n=[],i=[],o=null,a=null,s=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=o,this.startAt=a,this.endAt=s,this.ue=null}}function $b(t,e=null,r=[],n=[],i=null,o=null,a=null){return new Ok(t,e,r,n,i,o,a)}function lg(t){const e=me(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>np(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),vf(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Co(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Co(n)).join(",")),e.ue=r}return e.ue}function fg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!_k(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!SE(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Nb(t.startAt,e.startAt)&&Nb(t.endAt,e.endAt)}function ip(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,r=null,n=[],i=[],o=null,a="F",s=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=o,this.limitType=a,this.startAt=s,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ck(t,e,r,n,i,o,a,s){return new ca(t,e,r,n,i,o,a,s)}function bf(t){return new ca(t)}function jb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function OE(t){return t.collectionGroup!==null}function us(t){const e=me(t);if(e.ce===null){e.ce=[];const r=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),r.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let s=new vt(gt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(s=s.add(u.field))})}),s})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ps(o,n))}),r.has(gt.keyField().canonicalString())||e.ce.push(new Ps(gt.keyField(),n))}return e.ce}function Ir(t){const e=me(t);return e.le||(e.le=Rk(e,us(t))),e.le}function Rk(t,e){if(t.limitType==="F")return $b(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Ps(i.field,o)});const r=t.endAt?new Ku(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Ku(t.startAt.position,t.startAt.inclusive):null;return $b(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function op(t,e){const r=t.filters.concat([e]);return new ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function ap(t,e,r){return new ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function _f(t,e){return fg(Ir(t),Ir(e))&&t.limitType===e.limitType}function CE(t){return`${lg(Ir(t))}|lt:${t.limitType}`}function uo(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>PE(i)).join(", ")}]`),vf(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>Co(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>Co(i)).join(",")),`Target(${n})`}(Ir(t))}; limitType=${t.limitType})`}function wf(t,e){return e.isFoundDocument()&&function(n,i){const o=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):ae.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(t,e)&&function(n,i){for(const o of us(n))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const o of n.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(a,s,c){const u=kb(a,s,c);return a.inclusive?u<=0:u<0}(n.startAt,us(n),i)||n.endAt&&!function(a,s,c){const u=kb(a,s,c);return a.inclusive?u>=0:u>0}(n.endAt,us(n),i))}(t,e)}function kk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function RE(t){return(e,r)=>{let n=!1;for(const i of us(t)){const o=Nk(i,e,r);if(o!==0)return o;n=n||i.field.isKeyField()}return 0}}function Nk(t,e,r){const n=t.field.isKeyField()?ae.comparator(e.key,r.key):function(o,a,s){const c=a.data.field(o),u=s.data.field(o);return c!==null&&u!==null?Oo(c,u):fe()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,o]of n)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hi(this.inner,(r,n)=>{for(const[i,o]of n)e(i,o)})}isEmpty(){return _E(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=new ze(ae.comparator);function un(){return $k}const kE=new ze(ae.comparator);function is(...t){let e=kE;for(const r of t)e=e.insert(r.key,r);return e}function NE(t){let e=kE;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function bi(){return ls()}function $E(){return ls()}function ls(){return new ua(t=>t.toString(),(t,e)=>t.isEqual(e))}const jk=new ze(ae.comparator),Dk=new vt(ae.comparator);function _e(...t){let e=Dk;for(const r of t)e=e.add(r);return e}const Mk=new vt(Te);function Lk(){return Mk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hu(e)?"-0":e}}function jE(t){return{integerValue:""+t}}function Fk(t,e){return mk(e)?jE(e):hg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(){this._=void 0}}function Vk(t,e,r){return t instanceof Is?function(i,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&sg(o)&&(o=cg(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(r,e):t instanceof Os?ME(t,e):t instanceof Cs?LE(t,e):function(i,o){const a=DE(i,o),s=Db(a)+Db(i.Pe);return rp(a)&&rp(i.Pe)?jE(s):hg(i.serializer,s)}(t,e)}function Bk(t,e,r){return t instanceof Os?ME(t,e):t instanceof Cs?LE(t,e):r}function DE(t,e){return t instanceof Gu?function(n){return rp(n)||function(o){return!!o&&"doubleValue"in o}(n)}(e)?e:{integerValue:0}:null}class Is extends xf{}class Os extends xf{constructor(e){super(),this.elements=e}}function ME(t,e){const r=FE(e);for(const n of t.elements)r.some(i=>jr(i,n))||r.push(n);return{arrayValue:{values:r}}}class Cs extends xf{constructor(e){super(),this.elements=e}}function LE(t,e){let r=FE(e);for(const n of t.elements)r=r.filter(i=>!jr(i,n));return{arrayValue:{values:r}}}class Gu extends xf{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function Db(t){return Xe(t.integerValue||t.doubleValue)}function FE(t){return ug(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,r){this.field=e,this.transform=r}}function qk(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Os&&i instanceof Os||n instanceof Cs&&i instanceof Cs?Io(n.elements,i.elements,jr):n instanceof Gu&&i instanceof Gu?jr(n.Pe,i.Pe):n instanceof Is&&i instanceof Is}(t.transform,e.transform)}class Wk{constructor(e,r){this.version=e,this.transformResults=r}}class ir{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $u(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Af{}function VE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new dg(t.key,ir.none()):new bc(t.key,t.data,ir.none());{const r=t.data,n=Lt.empty();let i=new vt(gt.comparator);for(let o of e.fields)if(!i.has(o)){let a=r.field(o);a===null&&o.length>1&&(o=o.popLast(),a=r.field(o)),a===null?n.delete(o):n.set(o,a),i=i.add(o)}return new Jn(t.key,n,new Yt(i.toArray()),ir.none())}}function zk(t,e,r){t instanceof bc?function(i,o,a){const s=i.value.clone(),c=Lb(i.fieldTransforms,o,a.transformResults);s.setAll(c),o.convertToFoundDocument(a.version,s).setHasCommittedMutations()}(t,e,r):t instanceof Jn?function(i,o,a){if(!$u(i.precondition,o))return void o.convertToUnknownDocument(a.version);const s=Lb(i.fieldTransforms,o,a.transformResults),c=o.data;c.setAll(BE(i)),c.setAll(s),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,r):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function fs(t,e,r,n){return t instanceof bc?function(o,a,s,c){if(!$u(o.precondition,a))return s;const u=o.value.clone(),l=Fb(o.fieldTransforms,c,a);return u.setAll(l),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof Jn?function(o,a,s,c){if(!$u(o.precondition,a))return s;const u=Fb(o.fieldTransforms,c,a),l=a.data;return l.setAll(BE(o)),l.setAll(u),a.convertToFoundDocument(a.version,l).setHasLocalMutations(),s===null?null:s.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(o,a,s){return $u(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):s}(t,e,r)}function Hk(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),o=DE(n.transform,i||null);o!=null&&(r===null&&(r=Lt.empty()),r.set(n.field,o))}return r||null}function Mb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Io(n,i,(o,a)=>qk(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bc extends Af{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Jn extends Af{constructor(e,r,n,i,o=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function BE(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function Lb(t,e,r){const n=new Map;Ie(t.length===r.length);for(let i=0;i<r.length;i++){const o=t[i],a=o.transform,s=e.data.field(o.field);n.set(o.field,Bk(a,s,r[i]))}return n}function Fb(t,e,r){const n=new Map;for(const i of t){const o=i.transform,a=r.data.field(i.field);n.set(i.field,Vk(o,a,e))}return n}class dg extends Af{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kk extends Af{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&zk(o,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=fs(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=fs(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=$E();return this.mutations.forEach(i=>{const o=e.get(i.key),a=o.overlayedDocument;let s=this.applyToLocalView(a,o.mutatedFields);s=r.has(i.key)?null:s;const c=VE(a,s);c!==null&&n.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(pe.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),_e())}isEqual(e){return this.batchId===e.batchId&&Io(this.mutations,e.mutations,(r,n)=>Mb(r,n))&&Io(this.baseMutations,e.baseMutations,(r,n)=>Mb(r,n))}}class pg{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){Ie(e.mutations.length===n.length);let i=function(){return jk}();const o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,n[a].version);return new pg(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze,xe;function Qk(t){switch(t){default:return fe();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0}}function UE(t){if(t===void 0)return cn("GRPC error has no .code"),q.UNKNOWN;switch(t){case Ze.OK:return q.OK;case Ze.CANCELLED:return q.CANCELLED;case Ze.UNKNOWN:return q.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return q.INTERNAL;case Ze.UNAVAILABLE:return q.UNAVAILABLE;case Ze.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Ze.NOT_FOUND:return q.NOT_FOUND;case Ze.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Ze.ABORTED:return q.ABORTED;case Ze.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Ze.DATA_LOSS:return q.DATA_LOSS;default:return fe()}}(xe=Ze||(Ze={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=new Pi([4294967295,4294967295],0);function Vb(t){const e=Jk().encode(t),r=new hE;return r.update(e),new Uint8Array(r.digest())}function Bb(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Pi([r,n],0),new Pi([i,o],0)]}class mg{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new os(`Invalid padding: ${r}`);if(n<0)throw new os(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new os(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new os(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Pi.fromNumber(this.Ie)}Ee(e,r,n){let i=e.add(r.multiply(Pi.fromNumber(n)));return i.compare(Zk)===1&&(i=new Pi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=Vb(e),[n,i]=Bb(r);for(let o=0;o<this.hashCount;o++){const a=this.Ee(n,i,o);if(!this.de(a))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new mg(o,i,r);return n.forEach(s=>a.insert(s)),a}insert(e){if(this.Ie===0)return;const r=Vb(e),[n,i]=Bb(r);for(let o=0;o<this.hashCount;o++){const a=this.Ee(n,i,o);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class os extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,r,n,i,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,_c.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Ef(pe.min(),i,new ze(Te),un(),_e())}}class _c{constructor(e,r,n,i,o){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new _c(n,r,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,r,n,i){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=i}}class qE{constructor(e,r){this.targetId=e,this.me=r}}class WE{constructor(e,r,n=bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class Ub{constructor(){this.fe=0,this.ge=Wb(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=_e(),r=_e(),n=_e();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:fe()}}),new _c(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=Wb()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class eN{constructor(e){this.Le=e,this.Be=new Map,this.ke=un(),this.qe=qb(),this.Qe=new ze(Te)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:fe()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,i)=>{this.ze(i)&&r(i)})}He(e){const r=e.targetId,n=e.me.count,i=this.Je(r);if(i){const o=i.target;if(ip(o))if(n===0){const a=new ae(o.path);this.Ue(r,a,It.newNoDocument(a,pe.min()))}else Ie(n===1);else{const a=this.Ye(r);if(a!==n){const s=this.Ze(e),c=s?this.Xe(s,e,a):1;if(c!==0){this.je(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:o=0}=r;let a,s;try{a=Ni(n).toUint8Array()}catch(c){if(c instanceof wE)return Po("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{s=new mg(a,i,o)}catch(c){return Po(c instanceof os?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return s.Ie===0?null:s}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach(o=>{const a=this.Le.tt(),s=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(s)||(this.Ue(r,o,null),i++)}),i}rt(e){const r=new Map;this.Be.forEach((o,a)=>{const s=this.Je(a);if(s){if(o.current&&ip(s.target)){const c=new ae(s.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,It.newNoDocument(c,e))}o.be&&(r.set(a,o.ve()),o.Ce())}});let n=_e();this.qe.forEach((o,a)=>{let s=!0;a.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(n=n.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const i=new Ef(e,r,this.Qe,this.ke,n);return this.ke=un(),this.qe=qb(),this.Qe=new ze(Te),i}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new Ub,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new vt(Te),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||re("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ub),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function qb(){return new ze(ae.comparator)}function Wb(){return new ze(ae.comparator)}const tN={asc:"ASCENDING",desc:"DESCENDING"},rN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nN={and:"AND",or:"OR"};class iN{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function sp(t,e){return t.useProto3Json||vf(e)?e:{value:e}}function Yu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oN(t,e){return Yu(t,e.toTimestamp())}function Or(t){return Ie(!!t),pe.fromTimestamp(function(r){const n=Yn(r);return new at(n.seconds,n.nanos)}(t))}function gg(t,e){return cp(t,e).canonicalString()}function cp(t,e){const r=function(i){return new Ue(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function HE(t){const e=Ue.fromString(t);return Ie(QE(e)),e}function up(t,e){return gg(t.databaseId,e.path)}function cd(t,e){const r=HE(e);if(r.get(1)!==t.databaseId.projectId)throw new ee(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ee(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ae(GE(r))}function KE(t,e){return gg(t.databaseId,e)}function aN(t){const e=HE(t);return e.length===4?Ue.emptyPath():GE(e)}function lp(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GE(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function zb(t,e,r){return{name:up(t,e),fields:r.value.mapValue.fields}}function sN(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,l){return u.useProto3Json?(Ie(l===void 0||typeof l=="string"),bt.fromBase64String(l||"")):(Ie(l===void 0||l instanceof Buffer||l instanceof Uint8Array),bt.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,s=a&&function(u){const l=u.code===void 0?q.UNKNOWN:UE(u.code);return new ee(l,u.message||"")}(a);r=new WE(n,i,o,s||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=cd(t,n.document.name),o=Or(n.document.updateTime),a=n.document.createTime?Or(n.document.createTime):pe.min(),s=new Lt({mapValue:{fields:n.document.fields}}),c=It.newFoundDocument(i,o,a,s),u=n.targetIds||[],l=n.removedTargetIds||[];r=new ju(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=cd(t,n.document),o=n.readTime?Or(n.readTime):pe.min(),a=It.newNoDocument(i,o),s=n.removedTargetIds||[];r=new ju([],s,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=cd(t,n.document),o=n.removedTargetIds||[];r=new ju([],o,i,null)}else{if(!("filter"in e))return fe();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:o}=n,a=new Xk(i,o),s=n.targetId;r=new qE(s,a)}}return r}function cN(t,e){let r;if(e instanceof bc)r={update:zb(t,e.key,e.value)};else if(e instanceof dg)r={delete:up(t,e.key)};else if(e instanceof Jn)r={update:zb(t,e.key,e.data),updateMask:yN(e.fieldMask)};else{if(!(e instanceof Kk))return fe();r={verify:up(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(o,a){const s=a.transform;if(s instanceof Is)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof Os)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof Cs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof Gu)return{fieldPath:a.field.canonicalString(),increment:s.Pe};throw fe()}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:oN(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:fe()}(t,e.precondition)),r}function uN(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map(r=>function(i,o){let a=i.updateTime?Or(i.updateTime):Or(o);return a.isEqual(pe.min())&&(a=Or(o)),new Wk(a,i.transformResults||[])}(r,e))):[]}function lN(t,e){return{documents:[KE(t,e.path)]}}function fN(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=KE(t,i);const o=function(u){if(u.length!==0)return XE(yr.create(u,"and"))}(e.filters);o&&(r.structuredQuery.where=o);const a=function(u){if(u.length!==0)return u.map(l=>function(d){return{field:lo(d.field),direction:pN(d.dir)}}(l))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const s=sp(t,e.limit);return s!==null&&(r.structuredQuery.limit=s),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:r,parent:i}}function hN(t){let e=aN(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Ie(n===1);const l=r.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];r.where&&(o=function(f){const d=YE(f);return d instanceof yr&&TE(d)?d.getFilters():[d]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(d=>function(m){return new Ps(fo(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(d))}(r.orderBy));let s=null;r.limit&&(s=function(f){let d;return d=typeof f=="object"?f.value:f,vf(d)?null:d}(r.limit));let c=null;r.startAt&&(c=function(f){const d=!!f.before,p=f.values||[];return new Ku(p,d)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const d=!f.before,p=f.values||[];return new Ku(p,d)}(r.endAt)),Ck(e,i,a,o,s,"F",c,u)}function dN(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function YE(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=fo(r.unaryFilter.field);return tt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=fo(r.unaryFilter.field);return tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=fo(r.unaryFilter.field);return tt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=fo(r.unaryFilter.field);return tt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(r){return tt.create(fo(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return yr.create(r.compositeFilter.filters.map(n=>YE(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe()}}(r.compositeFilter.op))}(t):fe()}function pN(t){return tN[t]}function mN(t){return rN[t]}function gN(t){return nN[t]}function lo(t){return{fieldPath:t.canonicalString()}}function fo(t){return gt.fromServerFormat(t.fieldPath)}function XE(t){return t instanceof tt?function(r){if(r.op==="=="){if(Rb(r.value))return{unaryFilter:{field:lo(r.field),op:"IS_NAN"}};if(Cb(r.value))return{unaryFilter:{field:lo(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Rb(r.value))return{unaryFilter:{field:lo(r.field),op:"IS_NOT_NAN"}};if(Cb(r.value))return{unaryFilter:{field:lo(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lo(r.field),op:mN(r.op),value:r.value}}}(t):t instanceof yr?function(r){const n=r.getFilters().map(i=>XE(i));return n.length===1?n[0]:{compositeFilter:{op:gN(r.op),filters:n}}}(t):fe()}function yN(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function QE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,r,n,i,o=pe.min(),a=pe.min(),s=bt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=s,this.expectedCount=c}withSequenceNumber(e){return new jn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new jn(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.ct=e}}function bN(t){const e=hN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ap(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(){this.un=new wN}addToCollectionParentIndex(e,r){return this.un.add(r),H.resolve()}getCollectionParents(e,r){return H.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return H.resolve()}deleteFieldIndex(e,r){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,r){return H.resolve()}getDocumentsMatchingTarget(e,r){return H.resolve(null)}getIndexType(e,r){return H.resolve(0)}getFieldIndexes(e,r){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,r){return H.resolve(Gn.min())}getMinOffsetFromCollectionGroup(e,r){return H.resolve(Gn.min())}updateCollectionGroup(e,r,n){return H.resolve()}updateIndexEntries(e,r){return H.resolve()}}class wN{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new vt(Ue.comparator),o=!i.has(n);return this.index[r]=i.add(n),o}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new vt(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ro(0)}static kn(){return new Ro(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.changes=new ua(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?H.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&fs(n.mutation,i,Yt.empty(),at.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,_e()).next(()=>n))}getLocalViewOfDocuments(e,r,n=_e()){const i=bi();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(o=>{let a=is();return o.forEach((s,c)=>{a=a.insert(s,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=bi();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,_e()))}populateOverlays(e,r,n){const i=[];return n.forEach(o=>{r.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,s)=>{r.set(a,s)})})}computeViews(e,r,n,i){let o=un();const a=ls(),s=function(){return ls()}();return r.forEach((c,u)=>{const l=n.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof Jn)?o=o.insert(u.key,u):l!==void 0?(a.set(u.key,l.mutation.getFieldMask()),fs(l.mutation,u,l.mutation.getFieldMask(),at.now())):a.set(u.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,l)=>a.set(u,l)),r.forEach((u,l)=>{var f;return s.set(u,new AN(l,(f=a.get(u))!==null&&f!==void 0?f:null))}),s))}recalculateAndSaveOverlays(e,r){const n=ls();let i=new ze((a,s)=>a-s),o=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const s of a)s.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let l=n.get(c)||Yt.empty();l=s.applyToLocalView(u,l),n.set(c,l);const f=(i.get(s.batchId)||_e()).add(c);i=i.insert(s.batchId,f)})}).next(()=>{const a=[],s=i.getReverseIterator();for(;s.hasNext();){const c=s.getNext(),u=c.key,l=c.value,f=$E();l.forEach(d=>{if(!o.has(d)){const p=VE(r.get(d),n.get(d));p!==null&&f.set(d,p),o=o.add(d)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return H.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(a){return ae.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):OE(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(o=>{const a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-o.size):H.resolve(bi());let s=-1,c=o;return a.next(u=>H.forEach(u,(l,f)=>(s<f.largestBatchId&&(s=f.largestBatchId),o.get(l)?H.resolve():this.remoteDocumentCache.getEntry(e,l).next(d=>{c=c.insert(l,d)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,_e())).next(l=>({batchId:s,changes:NE(l)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ae(r)).next(n=>{let i=is();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const o=r.collectionGroup;let a=is();return this.indexManager.getCollectionParents(e,o).next(s=>H.forEach(s,c=>{const u=function(f,d){return new ca(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,n,i).next(l=>{l.forEach((f,d)=>{a=a.insert(f,d)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,o,i))).next(a=>{o.forEach((c,u)=>{const l=u.getKey();a.get(l)===null&&(a=a.insert(l,It.newInvalidDocument(l)))});let s=is();return a.forEach((c,u)=>{const l=o.get(c);l!==void 0&&fs(l.mutation,u,Yt.empty(),at.now()),wf(r,u)&&(s=s.insert(c,u))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return H.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Or(i.createTime)}}(r)),H.resolve()}getNamedQuery(e,r){return H.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(i){return{name:i.name,query:bN(i.bundledQuery),readTime:Or(i.readTime)}}(r)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.overlays=new ze(ae.comparator),this.Ir=new Map}getOverlay(e,r){return H.resolve(this.overlays.get(r))}getOverlays(e,r){const n=bi();return H.forEach(r,i=>this.getOverlay(e,i).next(o=>{o!==null&&n.set(i,o)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,o)=>{this.ht(e,r,o)}),H.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(n)),H.resolve()}getOverlaysForCollection(e,r,n){const i=bi(),o=r.length+1,a=new ae(r.child("")),s=this.overlays.getIteratorFrom(a);for(;s.hasNext();){const c=s.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>n&&i.set(c.getKey(),c)}return H.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let o=new ze((u,l)=>u-l);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let l=o.get(u.largestBatchId);l===null&&(l=bi(),o=o.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}const s=bi(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>s.set(u,l)),!(s.size()>=i)););return H.resolve(s)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Yk(r,n));let o=this.Ir.get(r);o===void 0&&(o=_e(),this.Ir.set(r,o)),this.Ir.set(r,o.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(){this.Tr=new vt(ct.Er),this.dr=new vt(ct.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new ct(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new ct(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new ae(new Ue([])),n=new ct(r,e),i=new ct(r,e+1),o=[];return this.dr.forEachInRange([n,i],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new ae(new Ue([])),n=new ct(r,e),i=new ct(r,e+1);let o=_e();return this.dr.forEachInRange([n,i],a=>{o=o.add(a.key)}),o}containsKey(e){const r=new ct(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class ct{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return ae.comparator(e.key,r.key)||Te(e.wr,r.wr)}static Ar(e,r){return Te(e.wr,r.wr)||ae.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new vt(ct.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Gk(o,r,n,i);this.mutationQueue.push(a);for(const s of i)this.br=this.br.add(new ct(s.key,o)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return H.resolve(a)}lookupMutationBatch(e,r){return H.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.vr(n),o=i<0?0:i;return H.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new ct(r,0),i=new ct(r,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([n,i],a=>{const s=this.Dr(a.wr);o.push(s)}),H.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new vt(Te);return r.forEach(i=>{const o=new ct(i,0),a=new ct(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],s=>{n=n.add(s.wr)})}),H.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let o=n;ae.isDocumentKey(o)||(o=o.child(""));const a=new ct(new ae(o),0);let s=new vt(Te);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(s=s.add(c.wr)),!0)},a),H.resolve(this.Cr(s))}Cr(e){const r=[];return e.forEach(n=>{const i=this.Dr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){Ie(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return H.forEach(r.mutations,i=>{const o=new ct(i.key,r.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new ct(r,0),i=this.br.firstAfterOrEqual(n);return H.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.Mr=e,this.docs=function(){return new ze(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),o=i?i.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return H.resolve(n?n.document.mutableCopy():It.newInvalidDocument(r))}getEntries(e,r){let n=un();return r.forEach(i=>{const o=this.docs.get(i);n=n.insert(i,o?o.document.mutableCopy():It.newInvalidDocument(i))}),H.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let o=un();const a=r.path,s=new ae(a.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:u,value:{document:l}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||fk(lk(l),n)<=0||(i.has(l.key)||wf(r,l))&&(o=o.insert(l.key,l.mutableCopy()))}return H.resolve(o)}getAllFromCollectionGroup(e,r,n,i){fe()}Or(e,r){return H.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new CN(this)}getSize(e){return H.resolve(this.size)}}class CN extends xN{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)}),H.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.persistence=e,this.Nr=new ua(r=>lg(r),fg),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new yg,this.targetCount=0,this.kr=Ro.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,i)=>r(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),H.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Ro(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,H.resolve()}updateTargetData(e,r){return this.Kn(r),H.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,r,n){let i=0;const o=[];return this.Nr.forEach((a,s)=>{s.sequenceNumber<=r&&n.get(s.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),H.waitFor(o).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return H.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),H.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const i=this.persistence.referenceDelegate,o=[];return i&&r.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),H.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),H.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return H.resolve(n)}containsKey(e,r){return H.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,r){this.qr={},this.overlays={},this.Qr=new ag(0),this.Kr=!1,this.Kr=!0,this.$r=new PN,this.referenceDelegate=e(this),this.Ur=new RN(this),this.indexManager=new _N,this.remoteDocumentCache=function(i){return new ON(i)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new vN(r),this.Gr=new TN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new SN,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new IN(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){re("MemoryPersistence","Starting transaction:",e);const i=new NN(this.Qr.next());return this.referenceDelegate.zr(),n(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,r){return H.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class NN extends dk{constructor(e){super(),this.currentSequenceNumber=e}}class vg{constructor(e){this.persistence=e,this.Jr=new yg,this.Yr=null}static Zr(e){return new vg(e)}get Xr(){if(this.Yr)return this.Yr;throw fe()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),H.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),H.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),H.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(i=>this.Xr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,n=>{const i=ae.fromPath(n);return this.ei(e,i).next(o=>{o||r.removeEntry(i,pe.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return H.or([()=>H.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=i}static Wi(e,r){let n=_e(),i=_e();for(const o of r.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new bg(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return jC()?8:pk(Rt())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,i){const o={result:null};return this.Yi(e,r).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,r,i,n).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new $N;return this.Xi(e,r,a).next(s=>{if(o.result=s,this.zi)return this.es(e,r,a,s.size)})}).next(()=>o.result)}es(e,r,n,i){return n.documentReadCount<this.ji?(qa()<=we.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",uo(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(qa()<=we.DEBUG&&re("QueryEngine","Query:",uo(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(qa()<=we.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",uo(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ir(r))):H.resolve())}Yi(e,r){if(jb(r))return H.resolve(null);let n=Ir(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=ap(r,null,"F"),n=Ir(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(o=>{const a=_e(...o);return this.Ji.getDocuments(e,a).next(s=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(r,s);return this.ns(r,u,a,c.readTime)?this.Yi(e,ap(r,null,"F")):this.rs(e,u,r,c)}))})))}Zi(e,r,n,i){return jb(r)||i.isEqual(pe.min())?H.resolve(null):this.Ji.getDocuments(e,n).next(o=>{const a=this.ts(r,o);return this.ns(r,a,n,i)?H.resolve(null):(qa()<=we.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),uo(r)),this.rs(e,a,r,uk(i,-1)).next(s=>s))})}ts(e,r){let n=new vt(RE(e));return r.forEach((i,o)=>{wf(e,o)&&(n=n.add(o))}),n}ns(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,r,n){return qa()<=we.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",uo(r)),this.Ji.getDocumentsMatchingQuery(e,r,Gn.min(),n)}rs(e,r,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next(o=>(r.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,r,n,i){this.persistence=e,this.ss=r,this.serializer=i,this.os=new ze(Te),this._s=new ua(o=>lg(o),fg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function MN(t,e,r,n){return new DN(t,e,r,n)}async function JE(t,e){const r=me(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(o=>(i=o,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(o=>{const a=[],s=[];let c=_e();for(const u of i){a.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}for(const u of o){s.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}return r.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:a,addedBatchIds:s}))})})}function LN(t,e){const r=me(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),o=r.cs.newChangeBuffer({trackRemovals:!0});return function(s,c,u,l){const f=u.batch,d=f.keys();let p=H.resolve();return d.forEach(m=>{p=p.next(()=>l.getEntry(c,m)).next(y=>{const g=u.docVersions.get(m);Ie(g!==null),y.version.compareTo(g)<0&&(f.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),l.addEntry(y)))})}),p.next(()=>s.mutationQueue.removeMutationBatch(c,f))}(r,n,e,o).next(()=>o.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(s){let c=_e();for(let u=0;u<s.mutationResults.length;++u)s.mutationResults[u].transformResults.length>0&&(c=c.add(s.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function ZE(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function FN(t,e){const r=me(t),n=e.snapshotVersion;let i=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});i=r.os;const s=[];e.targetChanges.forEach((l,f)=>{const d=i.get(f);if(!d)return;s.push(r.Ur.removeMatchingKeys(o,l.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(o,l.addedDocuments,f)));let p=d.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(bt.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):l.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(l.resumeToken,n)),i=i.insert(f,p),function(y,g,A){return y.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(d,p,l)&&s.push(r.Ur.updateTargetData(o,p))});let c=un(),u=_e();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&s.push(r.persistence.referenceDelegate.updateLimboDocument(o,l))}),s.push(VN(o,a,e.documentUpdates).next(l=>{c=l.Ps,u=l.Is})),!n.isEqual(pe.min())){const l=r.Ur.getLastRemoteSnapshotVersion(o).next(f=>r.Ur.setTargetsMetadata(o,o.currentSequenceNumber,n));s.push(l)}return H.waitFor(s).next(()=>a.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(r.os=i,o))}function VN(t,e,r){let n=_e(),i=_e();return r.forEach(o=>n=n.add(o)),e.getEntries(t,n).next(o=>{let a=un();return r.forEach((s,c)=>{const u=o.get(s);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(s)),c.isNoDocument()&&c.version.isEqual(pe.min())?(e.removeEntry(s,c.readTime),a=a.insert(s,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(s,c)):re("LocalStore","Ignoring outdated watch update for ",s,". Current version:",u.version," Watch version:",c.version)}),{Ps:a,Is:i}})}function BN(t,e){const r=me(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function UN(t,e){const r=me(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Ur.getTargetData(n,e).next(o=>o?(i=o,H.resolve(i)):r.Ur.allocateTargetId(n).next(a=>(i=new jn(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function fp(t,e,r){const n=me(t),i=n.os.get(e),o=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",o,a=>n.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!vc(a))throw a;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function Hb(t,e,r){const n=me(t);let i=pe.min(),o=_e();return n.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,l){const f=me(c),d=f._s.get(l);return d!==void 0?H.resolve(f.os.get(d)):f.Ur.getTargetData(u,l)}(n,a,Ir(e)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,s.targetId).next(c=>{o=c})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?i:pe.min(),r?o:_e())).next(s=>(qN(n,kk(e),s),{documents:s,Ts:o})))}function qN(t,e,r){let n=t.us.get(e)||pe.min();r.forEach((i,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),t.us.set(e,n)}class Kb{constructor(){this.activeTargetIds=Lk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WN{constructor(){this.so=new Kb,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Kb,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu=null;function ud(){return uu===null?uu=function(){return 268435456+Math.round(2147483648*Math.random())}():uu++,"0x"+uu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt="WebChannelConnection";class GN extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(r,n,i,o,a){const s=ud(),c=this.xo(r,n.toUriEncodedString());re("RestConnection",`Sending RPC '${r}' ${s}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,a),this.No(r,c,u,i).then(l=>(re("RestConnection",`Received RPC '${r}' ${s}: `,l),l),l=>{throw Po("RestConnection",`RPC '${r}' ${s} failed with error: `,l,"url: ",c,"request:",i),l})}Lo(r,n,i,o,a,s){return this.Mo(r,n,i,o,a)}Oo(r,n,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sa}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,a)=>r[a]=o),i&&i.headers.forEach((o,a)=>r[a]=o)}xo(r,n){const i=HN[r];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,i){const o=ud();return new Promise((a,s)=>{const c=new dE;c.setWithCredentials(!0),c.listenOnce(pE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ku.NO_ERROR:const l=c.getResponseJson();re(Tt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),a(l);break;case ku.TIMEOUT:re(Tt,`RPC '${e}' ${o} timed out`),s(new ee(q.DEADLINE_EXCEEDED,"Request time out"));break;case ku.HTTP_ERROR:const f=c.getStatus();if(re(Tt,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let d=c.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const m=function(g){const A=g.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(A)>=0?A:q.UNKNOWN}(p.status);s(new ee(m,p.message))}else s(new ee(q.UNKNOWN,"Server responded with status "+c.getStatus()))}else s(new ee(q.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{re(Tt,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(i);re(Tt,`RPC '${e}' ${o} sending request:`,i),c.send(r,"POST",u,n,15)})}Bo(e,r,n){const i=ud(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=yE(),s=gE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const l=o.join("");re(Tt,`Creating RPC '${e}' stream ${i}: ${l}`,c);const f=a.createWebChannel(l,c);let d=!1,p=!1;const m=new KN({Io:g=>{p?re(Tt,`Not sending because RPC '${e}' stream ${i} is closed:`,g):(d||(re(Tt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),d=!0),re(Tt,`RPC '${e}' stream ${i} sending:`,g),f.send(g))},To:()=>f.close()}),y=(g,A,T)=>{g.listen(A,P=>{try{T(P)}catch(C){setTimeout(()=>{throw C},0)}})};return y(f,ns.EventType.OPEN,()=>{p||(re(Tt,`RPC '${e}' stream ${i} transport opened.`),m.yo())}),y(f,ns.EventType.CLOSE,()=>{p||(p=!0,re(Tt,`RPC '${e}' stream ${i} transport closed`),m.So())}),y(f,ns.EventType.ERROR,g=>{p||(p=!0,Po(Tt,`RPC '${e}' stream ${i} transport errored:`,g),m.So(new ee(q.UNAVAILABLE,"The operation could not be completed")))}),y(f,ns.EventType.MESSAGE,g=>{var A;if(!p){const T=g.data[0];Ie(!!T);const P=T,C=P.error||((A=P[0])===null||A===void 0?void 0:A.error);if(C){re(Tt,`RPC '${e}' stream ${i} received error:`,C);const x=C.status;let I=function(S){const k=Ze[S];if(k!==void 0)return UE(k)}(x),b=C.message;I===void 0&&(I=q.INTERNAL,b="Unknown error status: "+x+" with message "+C.message),p=!0,m.So(new ee(I,b)),f.close()}else re(Tt,`RPC '${e}' stream ${i} received:`,T),m.bo(T)}}),y(s,mE.STAT_EVENT,g=>{g.stat===ep.PROXY?re(Tt,`RPC '${e}' stream ${i} detected buffering proxy`):g.stat===ep.NOPROXY&&re(Tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}function ld(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(t){return new iN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,r,n=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,r,n,i,o,a,s,c){this.ui=e,this.Ho=n,this.Jo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=s,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new eT(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===q.RESOURCE_EXHAUSTED?(cn(r.toString()),cn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Yo===r&&this.P_(n,i)},n=>{e(()=>{const i=new ee(q.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{n(()=>this.I_(i))}),this.stream.onMessage(i=>{n(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YN extends tT{constructor(e,r,n,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,a),this.serializer=o}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=sN(this.serializer,e),n=function(o){if(!("targetChange"in o))return pe.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?pe.min():a.readTime?Or(a.readTime):pe.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=lp(this.serializer),r.addTarget=function(o,a){let s;const c=a.target;if(s=ip(c)?{documents:lN(o,c)}:{query:fN(o,c)._t},s.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){s.resumeToken=zE(o,a.resumeToken);const u=sp(o,a.expectedCount);u!==null&&(s.expectedCount=u)}else if(a.snapshotVersion.compareTo(pe.min())>0){s.readTime=Yu(o,a.snapshotVersion.toTimestamp());const u=sp(o,a.expectedCount);u!==null&&(s.expectedCount=u)}return s}(this.serializer,e);const n=dN(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=lp(this.serializer),r.removeTarget=e,this.a_(r)}}class XN extends tT{constructor(e,r,n,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=uN(e.writeResults,e.commitTime),n=Or(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=lp(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>cN(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ee(q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,cp(r,n),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(q.UNKNOWN,o.toString())})}Lo(e,r,n,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Lo(e,cp(r,n),i,a,s,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ee(q.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class JN{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(cn(r),this.D_=!1):re("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,r,n,i,o){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{n.enqueueAndForget(async()=>{Ki(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=me(c);u.L_.add(4),await wc(u),u.q_.set("Unknown"),u.L_.delete(4),await Sf(u)}(this))})}),this.q_=new JN(n,i)}}async function Sf(t){if(Ki(t))for(const e of t.B_)await e(!0)}async function wc(t){for(const e of t.B_)await e(!1)}function rT(t,e){const r=me(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Ag(r)?xg(r):la(r).r_()&&wg(r,e))}function _g(t,e){const r=me(t),n=la(r);r.N_.delete(e),n.r_()&&nT(r,e),r.N_.size===0&&(n.r_()?n.o_():Ki(r)&&r.q_.set("Unknown"))}function wg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}la(t).A_(e)}function nT(t,e){t.Q_.xe(e),la(t).R_(e)}function xg(t){t.Q_=new eN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),la(t).start(),t.q_.v_()}function Ag(t){return Ki(t)&&!la(t).n_()&&t.N_.size>0}function Ki(t){return me(t).L_.size===0}function iT(t){t.Q_=void 0}async function e$(t){t.q_.set("Online")}async function t$(t){t.N_.forEach((e,r)=>{wg(t,e)})}async function r$(t,e){iT(t),Ag(t)?(t.q_.M_(e),xg(t)):t.q_.set("Unknown")}async function n$(t,e,r){if(t.q_.set("Online"),e instanceof WE&&e.state===2&&e.cause)try{await async function(i,o){const a=o.cause;for(const s of o.targetIds)i.N_.has(s)&&(await i.remoteSyncer.rejectListen(s,a),i.N_.delete(s),i.Q_.removeTarget(s))}(t,e)}catch(n){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Xu(t,n)}else if(e instanceof ju?t.Q_.Ke(e):e instanceof qE?t.Q_.He(e):t.Q_.We(e),!r.isEqual(pe.min()))try{const n=await ZE(t.localStore);r.compareTo(n)>=0&&await function(o,a){const s=o.Q_.rt(a);return s.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const l=o.N_.get(u);l&&o.N_.set(u,l.withResumeToken(c.resumeToken,a))}}),s.targetMismatches.forEach((c,u)=>{const l=o.N_.get(c);if(!l)return;o.N_.set(c,l.withResumeToken(bt.EMPTY_BYTE_STRING,l.snapshotVersion)),nT(o,c);const f=new jn(l.target,c,u,l.sequenceNumber);wg(o,f)}),o.remoteSyncer.applyRemoteEvent(s)}(t,r)}catch(n){re("RemoteStore","Failed to raise snapshot:",n),await Xu(t,n)}}async function Xu(t,e,r){if(!vc(e))throw e;t.L_.add(1),await wc(t),t.q_.set("Offline"),r||(r=()=>ZE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Sf(t)})}function oT(t,e){return e().catch(r=>Xu(t,r,e))}async function Pf(t){const e=me(t),r=Xn(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;i$(e);)try{const i=await BN(e.localStore,n);if(i===null){e.O_.length===0&&r.o_();break}n=i.batchId,o$(e,i)}catch(i){await Xu(e,i)}aT(e)&&sT(e)}function i$(t){return Ki(t)&&t.O_.length<10}function o$(t,e){t.O_.push(e);const r=Xn(t);r.r_()&&r.V_&&r.m_(e.mutations)}function aT(t){return Ki(t)&&!Xn(t).n_()&&t.O_.length>0}function sT(t){Xn(t).start()}async function a$(t){Xn(t).p_()}async function s$(t){const e=Xn(t);for(const r of t.O_)e.m_(r.mutations)}async function c$(t,e,r){const n=t.O_.shift(),i=pg.from(n,e,r);await oT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Pf(t)}async function u$(t,e){e&&Xn(t).V_&&await async function(n,i){if(function(a){return Qk(a)&&a!==q.ABORTED}(i.code)){const o=n.O_.shift();Xn(n).s_(),await oT(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Pf(n)}}(t,e),aT(t)&&sT(t)}async function Yb(t,e){const r=me(t);r.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const n=Ki(r);r.L_.add(3),await wc(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Sf(r)}async function l$(t,e){const r=me(t);e?(r.L_.delete(2),await Sf(r)):e||(r.L_.add(2),await wc(r),r.q_.set("Unknown"))}function la(t){return t.K_||(t.K_=function(r,n,i){const o=me(r);return o.w_(),new YN(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:e$.bind(null,t),Ro:t$.bind(null,t),mo:r$.bind(null,t),d_:n$.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Ag(t)?xg(t):t.q_.set("Unknown")):(await t.K_.stop(),iT(t))})),t.K_}function Xn(t){return t.U_||(t.U_=function(r,n,i){const o=me(r);return o.w_(),new XN(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:a$.bind(null,t),mo:u$.bind(null,t),f_:s$.bind(null,t),g_:c$.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Pf(t)):(await t.U_.stop(),t.O_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,r,n,i,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=o,this.deferred=new tn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,o){const a=Date.now()+n,s=new Eg(e,r,a,i,o);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tg(t,e){if(cn("AsyncQueue",`${e}: ${t}`),vc(t))return new ee(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.comparator=e?(r,n)=>e(r,n)||ae.comparator(r.key,n.key):(r,n)=>ae.comparator(r.key,n.key),this.keyedMap=is(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new _o(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof _o)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new _o;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(){this.W_=new ze(ae.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):fe():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class ko{constructor(e,r,n,i,o,a,s,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=s,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,i,o){const a=[];return r.forEach(s=>{a.push({type:0,doc:s})}),new ko(e,r,_o.emptySet(r),a,n,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class h${constructor(){this.queries=Qb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const i=me(r),o=i.queries;i.queries=Qb(),o.forEach((a,s)=>{for(const c of s.j_)c.onError(n)})})(this,new ee(q.ABORTED,"Firestore shutting down"))}}function Qb(){return new ua(t=>CE(t),_f)}async function Sg(t,e){const r=me(t);let n=3;const i=e.query;let o=r.queries.get(i);o?!o.H_()&&e.J_()&&(n=2):(o=new f$,n=e.J_()?0:1);try{switch(n){case 0:o.z_=await r.onListen(i,!0);break;case 1:o.z_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(a){const s=Tg(a,`Initialization of query '${uo(e.query)}' failed`);return void e.onError(s)}r.queries.set(i,o),o.j_.push(e),e.Z_(r.onlineState),o.z_&&e.X_(o.z_)&&Ig(r)}async function Pg(t,e){const r=me(t),n=e.query;let i=3;const o=r.queries.get(n);if(o){const a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function d$(t,e){const r=me(t);let n=!1;for(const i of e){const o=i.query,a=r.queries.get(o);if(a){for(const s of a.j_)s.X_(i)&&(n=!0);a.z_=i}}n&&Ig(r)}function p$(t,e,r){const n=me(t),i=n.queries.get(e);if(i)for(const o of i.j_)o.onError(r);n.queries.delete(e)}function Ig(t){t.Y_.forEach(e=>{e.next()})}var hp,Jb;(Jb=hp||(hp={})).ea="default",Jb.Cache="cache";class Og{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new ko(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==hp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e){this.key=e}}class uT{constructor(e){this.key=e}}class m${constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=_e(),this.mutatedKeys=_e(),this.Aa=RE(e),this.Ra=new _o(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new Xb,i=r?r.Ra:this.Ra;let o=r?r.mutatedKeys:this.mutatedKeys,a=i,s=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,f)=>{const d=i.get(l),p=wf(this.query,f)?f:null,m=!!d&&this.mutatedKeys.has(d.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let g=!1;d&&p?d.data.isEqual(p.data)?m!==y&&(n.track({type:3,doc:p}),g=!0):this.ga(d,p)||(n.track({type:2,doc:p}),g=!0,(c&&this.Aa(p,c)>0||u&&this.Aa(p,u)<0)&&(s=!0)):!d&&p?(n.track({type:0,doc:p}),g=!0):d&&!p&&(n.track({type:1,doc:d}),g=!0,(c||u)&&(s=!0)),g&&(p?(a=a.add(p),o=y?o.add(l):o.delete(l)):(a=a.delete(l),o=o.delete(l)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const l=this.query.limitType==="F"?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),n.track({type:1,doc:l})}return{Ra:a,fa:n,ns:s,mutatedKeys:o}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((l,f)=>function(p,m){const y=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return y(p)-y(m)}(l.type,f.type)||this.Aa(l.doc,f.doc)),this.pa(n),i=i!=null&&i;const s=r&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,a.length!==0||u?{snapshot:new ko(this.query,e.Ra,o,a,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:s}:{wa:s}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Xb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=_e(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new uT(n))}),this.da.forEach(n=>{e.has(n)||r.push(new cT(n))}),r}ba(e){this.Ta=e.Ts,this.da=_e();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return ko.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class g${constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class y${constructor(e){this.key=e,this.va=!1}}class v${constructor(e,r,n,i,o,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new ua(s=>CE(s),_f),this.Ma=new Map,this.xa=new Set,this.Oa=new ze(ae.comparator),this.Na=new Map,this.La=new yg,this.Ba={},this.ka=new Map,this.qa=Ro.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function b$(t,e,r=!0){const n=mT(t);let i;const o=n.Fa.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await lT(n,e,r,!0),i}async function _$(t,e){const r=mT(t);await lT(r,e,!0,!1)}async function lT(t,e,r,n){const i=await UN(t.localStore,Ir(e)),o=i.targetId,a=t.sharedClientState.addLocalQueryTarget(o,r);let s;return n&&(s=await w$(t,e,o,a==="current",i.resumeToken)),t.isPrimaryClient&&r&&rT(t.remoteStore,i),s}async function w$(t,e,r,n,i){t.Ka=(f,d,p)=>async function(y,g,A,T){let P=g.view.ma(A);P.ns&&(P=await Hb(y.localStore,g.query,!1).then(({documents:b})=>g.view.ma(b,P)));const C=T&&T.targetChanges.get(g.targetId),x=T&&T.targetMismatches.get(g.targetId)!=null,I=g.view.applyChanges(P,y.isPrimaryClient,C,x);return e0(y,g.targetId,I.wa),I.snapshot}(t,f,d,p);const o=await Hb(t.localStore,e,!0),a=new m$(e,o.Ts),s=a.ma(o.documents),c=_c.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),u=a.applyChanges(s,t.isPrimaryClient,c);e0(t,r,u.wa);const l=new g$(e,r,a);return t.Fa.set(e,l),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),u.snapshot}async function x$(t,e,r){const n=me(t),i=n.Fa.get(e),o=n.Ma.get(i.targetId);if(o.length>1)return n.Ma.set(i.targetId,o.filter(a=>!_f(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await fp(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&_g(n.remoteStore,i.targetId),dp(n,i.targetId)}).catch(yc)):(dp(n,i.targetId),await fp(n.localStore,i.targetId,!0))}async function A$(t,e){const r=me(t),n=r.Fa.get(e),i=r.Ma.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),_g(r.remoteStore,n.targetId))}async function E$(t,e,r){const n=R$(t);try{const i=await function(a,s){const c=me(a),u=at.now(),l=s.reduce((p,m)=>p.add(m.key),_e());let f,d;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=un(),y=_e();return c.cs.getEntries(p,l).next(g=>{m=g,m.forEach((A,T)=>{T.isValidDocument()||(y=y.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,m)).next(g=>{f=g;const A=[];for(const T of s){const P=Hk(T,f.get(T.key).overlayedDocument);P!=null&&A.push(new Jn(T.key,P,xE(P.value.mapValue),ir.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,A,s)}).next(g=>{d=g;const A=g.applyToLocalDocumentSet(f,y);return c.documentOverlayCache.saveOverlays(p,g.batchId,A)})}).then(()=>({batchId:d.batchId,changes:NE(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(a,s,c){let u=a.Ba[a.currentUser.toKey()];u||(u=new ze(Te)),u=u.insert(s,c),a.Ba[a.currentUser.toKey()]=u}(n,i.batchId,r),await xc(n,i.changes),await Pf(n.remoteStore)}catch(i){const o=Tg(i,"Failed to persist write");r.reject(o)}}async function fT(t,e){const r=me(t);try{const n=await FN(r.localStore,e);e.targetChanges.forEach((i,o)=>{const a=r.Na.get(o);a&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Ie(a.va):i.removedDocuments.size>0&&(Ie(a.va),a.va=!1))}),await xc(r,n,e)}catch(n){await yc(n)}}function Zb(t,e,r){const n=me(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Fa.forEach((o,a)=>{const s=a.view.Z_(e);s.snapshot&&i.push(s.snapshot)}),function(a,s){const c=me(a);c.onlineState=s;let u=!1;c.queries.forEach((l,f)=>{for(const d of f.j_)d.Z_(s)&&(u=!0)}),u&&Ig(c)}(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function T$(t,e,r){const n=me(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Na.get(e),o=i&&i.key;if(o){let a=new ze(ae.comparator);a=a.insert(o,It.newNoDocument(o,pe.min()));const s=_e().add(o),c=new Ef(pe.min(),new Map,new ze(Te),a,s);await fT(n,c),n.Oa=n.Oa.remove(o),n.Na.delete(e),Cg(n)}else await fp(n.localStore,e,!1).then(()=>dp(n,e,r)).catch(yc)}async function S$(t,e){const r=me(t),n=e.batch.batchId;try{const i=await LN(r.localStore,e);dT(r,n,null),hT(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await xc(r,i)}catch(i){await yc(i)}}async function P$(t,e,r){const n=me(t);try{const i=await function(a,s){const c=me(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,s).next(f=>(Ie(f!==null),l=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,s)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(n.localStore,e);dT(n,e,r),hT(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await xc(n,i)}catch(i){await yc(i)}}function hT(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function dT(t,e,r){const n=me(t);let i=n.Ba[n.currentUser.toKey()];if(i){const o=i.get(e);o&&(r?o.reject(r):o.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function dp(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||pT(t,n)})}function pT(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(_g(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),Cg(t))}function e0(t,e,r){for(const n of r)n instanceof cT?(t.La.addReference(n.key,e),I$(t,n)):n instanceof uT?(re("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||pT(t,n.key)):fe()}function I$(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(re("SyncEngine","New document in limbo: "+r),t.xa.add(n),Cg(t))}function Cg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new ae(Ue.fromString(e)),n=t.qa.next();t.Na.set(n,new y$(r)),t.Oa=t.Oa.insert(r,n),rT(t.remoteStore,new jn(Ir(bf(r.path)),n,"TargetPurposeLimboResolution",ag.oe))}}async function xc(t,e,r){const n=me(t),i=[],o=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((s,c)=>{a.push(n.Ka(c,e,r).then(u=>{var l;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(l=r==null?void 0:r.targetChanges.get(c.targetId))===null||l===void 0?void 0:l.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=bg.Wi(c.targetId,u);o.push(f)}}))}),await Promise.all(a),n.Ca.d_(i),await async function(c,u){const l=me(c);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>H.forEach(u,d=>H.forEach(d.$i,p=>l.persistence.referenceDelegate.addReference(f,d.targetId,p)).next(()=>H.forEach(d.Ui,p=>l.persistence.referenceDelegate.removeReference(f,d.targetId,p)))))}catch(f){if(!vc(f))throw f;re("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const d=f.targetId;if(!f.fromCache){const p=l.os.get(d),m=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(m);l.os=l.os.insert(d,y)}}}(n.localStore,o))}async function O$(t,e){const r=me(t);if(!r.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const n=await JE(r.localStore,e);r.currentUser=e,function(o,a){o.ka.forEach(s=>{s.forEach(c=>{c.reject(new ee(q.CANCELLED,a))})}),o.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await xc(r,n.hs)}}function C$(t,e){const r=me(t),n=r.Na.get(e);if(n&&n.va)return _e().add(n.key);{let i=_e();const o=r.Ma.get(e);if(!o)return i;for(const a of o){const s=r.Fa.get(a);i=i.unionWith(s.view.Va)}return i}}function mT(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=C$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=T$.bind(null,e),e.Ca.d_=d$.bind(null,e.eventManager),e.Ca.$a=p$.bind(null,e.eventManager),e}function R$(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=P$.bind(null,e),e}class Qu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return MN(this.persistence,new jN,e.initialUser,this.serializer)}Ga(e){return new kN(vg.Zr,this.serializer)}Wa(e){return new WN}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qu.provider={build:()=>new Qu};class pp{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Zb(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=O$.bind(null,this.syncEngine),await l$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new h$}()}createDatastore(e){const r=Tf(e.databaseInfo.databaseId),n=function(o){return new GN(o)}(e.databaseInfo);return function(o,a,s,c){return new QN(o,a,s,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,o,a,s){return new ZN(n,i,o,a,s)}(this.localStore,this.datastore,e.asyncQueue,r=>Zb(this.syncEngine,r,0),function(){return Gb.D()?new Gb:new zN}())}createSyncEngine(e,r){return function(i,o,a,s,c,u,l){const f=new v$(i,o,a,s,c,u);return l&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const o=me(i);re("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await wc(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}pp.provider={build:()=>new pp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):cn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(e,r,n,i,o){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=Pt.UNAUTHENTICATED,this.clientId=bE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,async a=>{re("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(re("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Tg(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function fd(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await JE(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function t0(t,e){t.asyncQueue.verifyOperationInProgress();const r=await N$(t);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>Yb(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>Yb(e.remoteStore,i)),t._onlineComponents=e}async function N$(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await fd(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;Po("Error using user provided cache. Falling back to memory cache: "+r),await fd(t,new Qu)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await fd(t,new Qu);return t._offlineComponents}async function gT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await t0(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await t0(t,new pp))),t._onlineComponents}function $$(t){return gT(t).then(e=>e.syncEngine)}async function Ju(t){const e=await gT(t),r=e.eventManager;return r.onListen=b$.bind(null,e.syncEngine),r.onUnlisten=x$.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=_$.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=A$.bind(null,e.syncEngine),r}function j$(t,e,r={}){const n=new tn;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,s,c,u){const l=new Rg({next:d=>{l.Za(),a.enqueueAndForget(()=>Pg(o,f));const p=d.docs.has(s);!p&&d.fromCache?u.reject(new ee(q.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&c&&c.source==="server"?u.reject(new ee(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),f=new Og(bf(s.path),l,{includeMetadataChanges:!0,_a:!0});return Sg(o,f)}(await Ju(t),t.asyncQueue,e,r,n)),n.promise}function D$(t,e,r={}){const n=new tn;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,s,c,u){const l=new Rg({next:d=>{l.Za(),a.enqueueAndForget(()=>Pg(o,f)),d.fromCache&&c.source==="server"?u.reject(new ee(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),f=new Og(s,l,{includeMetadataChanges:!0,_a:!0});return Sg(o,f)}(await Ju(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(t,e,r){if(!r)throw new ee(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function M$(t,e,r,n){if(e===!0&&n===!0)throw new ee(q.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function n0(t){if(!ae.isDocumentKey(t))throw new ee(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function i0(t){if(ae.isDocumentKey(t))throw new ee(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function If(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function Vt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=If(t);throw new ee(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}M$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ee(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ee(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ee(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Of{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o0(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new ek;switch(n.type){case"firstParty":return new ik(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ee(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=r0.get(r);n&&(re("ComponentProvider","Removing Datastore"),r0.delete(r),n.terminate())}(this),Promise.resolve()}}function L$(t,e,r,n={}){var i;const o=(t=Vt(t,Of))._getSettings(),a=`${e}:${r}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),n.mockUserToken){let s,c;if(typeof n.mockUserToken=="string")s=n.mockUserToken,c=Pt.MOCK_USER;else{s=aE(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new ee(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Pt(u)}t._authCredentials=new tk(new vE(s,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Zn(this.firestore,e,this._query)}}class Ct{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}}class Bn extends Zn{constructor(e,r,n){super(e,r,bf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new ae(e))}withConverter(e){return new Bn(this.firestore,e,this._path)}}function fa(t,e,...r){if(t=Je(t),vT("collection","path",e),t instanceof Of){const n=Ue.fromString(e,...r);return i0(n),new Bn(t,null,n)}{if(!(t instanceof Ct||t instanceof Bn))throw new ee(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ue.fromString(e,...r));return i0(n),new Bn(t.firestore,null,n)}}function rn(t,e,...r){if(t=Je(t),arguments.length===1&&(e=bE.newId()),vT("doc","path",e),t instanceof Of){const n=Ue.fromString(e,...r);return n0(n),new Ct(t,null,new ae(n))}{if(!(t instanceof Ct||t instanceof Bn))throw new ee(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ue.fromString(e,...r));return n0(n),new Ct(t.firestore,t instanceof Bn?t.converter:null,new ae(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new eT(this,"async_queue_retry"),this.Vu=()=>{const n=ld();n&&re("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=ld();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=ld();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new tn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!vc(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const i=function(a){let s=a.message||"";return a.stack&&(s=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),s}(n);throw cn("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const i=Eg.createAndSchedule(this,e,r,n,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function s0(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const o of n)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class ln extends Of{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new a0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new a0(e),this._firestoreClient=void 0,await e}}}function F$(t,e){const r=typeof t=="object"?t:ig(),n=typeof t=="string"?t:"(default)",i=yf(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const o=nE("firestore");o&&L$(i,...o)}return i}function Cf(t){if(t._terminated)throw new ee(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||V$(t),t._firestoreClient}function V$(t){var e,r,n;const i=t._freezeSettings(),o=function(s,c,u,l){return new yk(s,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,yT(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new k$(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(s){const c=s==null?void 0:s._online.build();return{_offline:s==null?void 0:s._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this._byteString=e}static fromBase64String(e){try{return new No(bt.fromBase64String(e))}catch(r){throw new ee(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new No(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ee(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ee(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ee(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$=/^__.*__$/;class U${constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Jn(e,this.data,this.fieldMask,r,this.fieldTransforms):new bc(e,this.data,r,this.fieldTransforms)}}class bT{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Jn(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function _T(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class $g{constructor(e,r,n,i,o,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new $g(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(_T(this.Cu)&&B$.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class q${constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Tf(e)}Qu(e,r,n,i=!1){return new $g({Cu:e,methodName:r,qu:n,path:gt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nf(t){const e=t._freezeSettings(),r=Tf(t._databaseId);return new q$(t._databaseId,!!e.ignoreUndefinedProperties,r)}function wT(t,e,r,n,i,o={}){const a=t.Qu(o.merge||o.mergeFields?2:0,e,r,i);Dg("Data must be an object, but it was:",a,n);const s=xT(n,a);let c,u;if(o.merge)c=new Yt(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){const l=[];for(const f of o.mergeFields){const d=mp(e,f,r);if(!a.contains(d))throw new ee(q.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);ET(l,d)||l.push(d)}c=new Yt(l),u=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=a.fieldTransforms;return new U$(new Lt(s),c,u)}class $f extends kf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $f}}class jg extends kf{_toFieldTransform(e){return new Uk(e.path,new Is)}isEqual(e){return e instanceof jg}}function W$(t,e,r,n){const i=t.Qu(1,e,r);Dg("Data must be an object, but it was:",i,n);const o=[],a=Lt.empty();Hi(n,(c,u)=>{const l=Mg(e,c,r);u=Je(u);const f=i.Nu(l);if(u instanceof $f)o.push(l);else{const d=Ac(u,f);d!=null&&(o.push(l),a.set(l,d))}});const s=new Yt(o);return new bT(a,s,i.fieldTransforms)}function z$(t,e,r,n,i,o){const a=t.Qu(1,e,r),s=[mp(e,n,r)],c=[i];if(o.length%2!=0)throw new ee(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<o.length;d+=2)s.push(mp(e,o[d])),c.push(o[d+1]);const u=[],l=Lt.empty();for(let d=s.length-1;d>=0;--d)if(!ET(u,s[d])){const p=s[d];let m=c[d];m=Je(m);const y=a.Nu(p);if(m instanceof $f)u.push(p);else{const g=Ac(m,y);g!=null&&(u.push(p),l.set(p,g))}}const f=new Yt(u);return new bT(l,f,a.fieldTransforms)}function H$(t,e,r,n=!1){return Ac(r,t.Qu(n?4:3,e))}function Ac(t,e){if(AT(t=Je(t)))return Dg("Unsupported field value:",e,t),xT(t,e);if(t instanceof kf)return function(n,i){if(!_T(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,i){const o=[];let a=0;for(const s of n){let c=Ac(s,i.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),a++}return{arrayValue:{values:o}}}(t,e)}return function(n,i){if((n=Je(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Fk(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=at.fromDate(n);return{timestampValue:Yu(i.serializer,o)}}if(n instanceof at){const o=new at(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Yu(i.serializer,o)}}if(n instanceof kg)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof No)return{bytesValue:zE(i.serializer,n._byteString)};if(n instanceof Ct){const o=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(o))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:gg(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Ng)return function(a,s){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw s.Bu("VectorValues must only contain numeric values.");return hg(s.serializer,c)})}}}}}}(n,i);throw i.Bu(`Unsupported field value: ${If(n)}`)}(t,e)}function xT(t,e){const r={};return _E(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hi(t,(n,i)=>{const o=Ac(i,e.Mu(n));o!=null&&(r[n]=o)}),{mapValue:{fields:r}}}function AT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof at||t instanceof kg||t instanceof No||t instanceof Ct||t instanceof kf||t instanceof Ng)}function Dg(t,e,r){if(!AT(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const n=If(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function mp(t,e,r){if((e=Je(e))instanceof Rf)return e._internalPath;if(typeof e=="string")return Mg(t,e);throw Zu("Field path arguments must be of type string or ",t,!1,void 0,r)}const K$=new RegExp("[~\\*/\\[\\]]");function Mg(t,e,r){if(e.search(K$)>=0)throw Zu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Rf(...e.split("."))._internalPath}catch{throw Zu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Zu(t,e,r,n,i){const o=n&&!n.isEmpty(),a=i!==void 0;let s=`Function ${e}() called with invalid data`;r&&(s+=" (via `toFirestore()`)"),s+=". ";let c="";return(o||a)&&(c+=" (found",o&&(c+=` in field ${n}`),a&&(c+=` in document ${i}`),c+=")"),new ee(q.INVALID_ARGUMENT,s+t+c)}function ET(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,r,n,i,o){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new G$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(jf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class G$ extends TT{data(){return super.data()}}function jf(t,e){return typeof e=="string"?Mg(t,e):e instanceof Rf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lg{}class PT extends Lg{}function Un(t,e,...r){let n=[];e instanceof Lg&&n.push(e),n=n.concat(r),function(o){const a=o.filter(c=>c instanceof Fg).length,s=o.filter(c=>c instanceof Df).length;if(a>1||a>0&&s>0)throw new ee(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class Df extends PT{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Df(e,r,n)}_apply(e){const r=this._parse(e);return IT(e._query,r),new Zn(e.firestore,e.converter,op(e._query,r))}_parse(e){const r=Nf(e.firestore);return function(o,a,s,c,u,l,f){let d;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new ee(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){u0(f,l);const p=[];for(const m of f)p.push(c0(c,o,m));d={arrayValue:{values:p}}}else d=c0(c,o,f)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||u0(f,l),d=H$(s,a,f,l==="in"||l==="not-in");return tt.create(u,l,d)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function In(t,e,r){const n=e,i=jf("where",t);return Df._create(i,n,r)}class Fg extends Lg{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Fg(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:yr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,o){let a=i;const s=o.getFlattenedFilters();for(const c of s)IT(a,c),a=op(a,c)}(e._query,r),new Zn(e.firestore,e.converter,op(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vg extends PT{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Vg(e,r)}_apply(e){const r=function(i,o,a){if(i.startAt!==null)throw new ee(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ee(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ps(o,a)}(e._query,this._field,this._direction);return new Zn(e.firestore,e.converter,function(i,o){const a=i.explicitOrderBy.concat([o]);return new ca(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function Mf(t,e="asc"){const r=e,n=jf("orderBy",t);return Vg._create(n,r)}function c0(t,e,r){if(typeof(r=Je(r))=="string"){if(r==="")throw new ee(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OE(e)&&r.indexOf("/")!==-1)throw new ee(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Ue.fromString(r));if(!ae.isDocumentKey(n))throw new ee(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Ob(t,new ae(n))}if(r instanceof Ct)return Ob(t,r._key);throw new ee(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${If(r)}.`)}function u0(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IT(t,e){const r=function(i,o){for(const a of i)for(const s of a.getFlattenedFilters())if(o.indexOf(s.op)>=0)return s.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new ee(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class Y${convertValue(e,r="none"){switch($i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw fe()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Hi(e,(i,o)=>{n[i]=this.convertValue(o,r)}),n}convertVectorValue(e){var r,n,i;const o=(i=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(a=>Xe(a.doubleValue));return new Ng(o)}convertGeoPoint(e){return new kg(Xe(e.latitude),Xe(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=cg(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Es(e));default:return null}}convertTimestamp(e){const r=Yn(e);return new at(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Ue.fromString(e);Ie(QE(n));const i=new Ts(n.get(1),n.get(3)),o=new ae(n.popFirst(5));return i.isEqual(r)||cn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t,e,r){let n;return n=t?t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class CT extends TT{constructor(e,r,n,i,o,a){super(e,r,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Du(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(jf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Du extends CT{data(e={}){return super.data(e)}}class RT{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new as(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Du(this._firestore,this._userDataWriter,n.key,n,new as(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ee(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(s=>{const c=new Du(i._firestore,i._userDataWriter,s.doc.key,s.doc,new as(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>o||s.type!==3).map(s=>{const c=new Du(i._firestore,i._userDataWriter,s.doc.key,s.doc,new as(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,l=-1;return s.type!==0&&(u=a.indexOf(s.doc.key),a=a.delete(s.doc.key)),s.type!==1&&(a=a.add(s.doc),l=a.indexOf(s.doc.key)),{type:X$(s.type),doc:c,oldIndex:u,newIndex:l}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function X$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$(t){t=Vt(t,Ct);const e=Vt(t.firestore,ln);return j$(Cf(e),t._key).then(r=>NT(e,t,r))}class Bg extends Y${constructor(e){super(),this.firestore=e}convertBytes(e){return new No(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,r)}}function Gr(t){t=Vt(t,Zn);const e=Vt(t.firestore,ln),r=Cf(e),n=new Bg(e);return ST(t._query),D$(r,t._query).then(i=>new RT(e,n,t,i))}function l0(t,e,r){t=Vt(t,Ct);const n=Vt(t.firestore,ln),i=OT(t.converter,e);return Lf(n,[wT(Nf(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,ir.none())])}function gp(t,e,r,...n){t=Vt(t,Ct);const i=Vt(t.firestore,ln),o=Nf(i);let a;return a=typeof(e=Je(e))=="string"||e instanceof Rf?z$(o,"updateDoc",t._key,e,r,n):W$(o,"updateDoc",t._key,e),Lf(i,[a.toMutation(t._key,ir.exists(!0))])}function kT(t){return Lf(Vt(t.firestore,ln),[new dg(t._key,ir.none())])}function Ug(t,e){const r=Vt(t.firestore,ln),n=rn(t),i=OT(t.converter,e);return Lf(r,[wT(Nf(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,ir.exists(!1))]).then(()=>n)}function qg(t,...e){var r,n,i;t=Je(t);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||s0(e[a])||(o=e[a],a++);const s={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(s0(e[a])){const f=e[a];e[a]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[a+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[a+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,l;if(t instanceof Ct)u=Vt(t.firestore,ln),l=bf(t._key.path),c={next:f=>{e[a]&&e[a](NT(u,t,f))},error:e[a+1],complete:e[a+2]};else{const f=Vt(t,Zn);u=Vt(f.firestore,ln),l=f._query;const d=new Bg(u);c={next:p=>{e[a]&&e[a](new RT(u,d,f,p))},error:e[a+1],complete:e[a+2]},ST(t._query)}return function(d,p,m,y){const g=new Rg(y),A=new Og(p,g,m);return d.asyncQueue.enqueueAndForget(async()=>Sg(await Ju(d),A)),()=>{g.Za(),d.asyncQueue.enqueueAndForget(async()=>Pg(await Ju(d),A))}}(Cf(u),l,s,c)}function Lf(t,e){return function(n,i){const o=new tn;return n.asyncQueue.enqueueAndForget(async()=>E$(await $$(n),i,o)),o.promise}(Cf(t),e)}function NT(t,e,r){const n=r.docs.get(e._key),i=new Bg(t);return new CT(t,i,e._key,n,new as(r.hasPendingWrites,r.fromCache),e.converter)}function _i(){return new jg("serverTimestamp")}(function(e,r=!0){(function(i){sa=i})(zi),Ri(new Kn("firestore",(n,{instanceIdentifier:i,options:o})=>{const a=n.getProvider("app").getImmediate(),s=new ln(new rk(n.getProvider("auth-internal")),new ak(n.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ee(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ts(u.options.projectId,l)}(a,i),a);return o=Object.assign({useFetchStreams:r},o),s._setSettings(o),s},"PUBLIC").setMultipleInstances(!0)),Pr(Eb,"4.7.3",e),Pr(Eb,"4.7.3","esm2017")})();function Wg(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function $T(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const J$=$T,jT=new mc("auth","Firebase",$T());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=new rg("@firebase/auth");function Z$(t,...e){el.logLevel<=we.WARN&&el.warn(`Auth (${zi}): ${t}`,...e)}function Mu(t,...e){el.logLevel<=we.ERROR&&el.error(`Auth (${zi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t,...e){throw zg(t,...e)}function Cr(t,...e){return zg(t,...e)}function DT(t,e,r){const n=Object.assign(Object.assign({},J$()),{[e]:r});return new mc("auth","Firebase",n).create(e,{appName:t.name})}function nn(t){return DT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zg(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return jT.create(t,...e)}function ce(t,e,...r){if(!t)throw zg(e,...r)}function Yr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mu(e),new Error(e)}function fn(t,e){t||Yr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ej(){return f0()==="http:"||f0()==="https:"}function f0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ej()||kC()||"connection"in navigator)?navigator.onLine:!0}function rj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,r){this.shortDelay=e,this.longDelay=r,fn(r>e,"Short delay should be less than long delay!"),this.isMobile=OC()||NC()}get(){return tj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t,e){fn(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=new Ec(3e4,6e4);function ei(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gn(t,e,r,n,i={}){return LT(t,i,async()=>{let o={},a={};n&&(e==="GET"?a=n:o={body:JSON.stringify(n)});const s=gc(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},o);return RC()||(u.referrerPolicy="no-referrer"),MT.fetch()(FT(t,t.config.apiHost,r,s),u)})}async function LT(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},nj),e);try{const i=new aj(t),o=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw lu(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const s=o.ok?a.errorMessage:a.error.message,[c,u]=s.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw lu(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw lu(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw lu(t,"user-disabled",a);const l=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw DT(t,l,u);vr(t,l)}}catch(i){if(i instanceof Lr)throw i;vr(t,"network-request-failed",{message:String(i)})}}async function Tc(t,e,r,n,i={}){const o=await gn(t,e,r,n,i);return"mfaPendingCredential"in o&&vr(t,"multi-factor-auth-required",{_serverResponse:o}),o}function FT(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?Hg(t.config,i):`${t.config.apiScheme}://${i}`}function oj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Cr(this.auth,"network-request-failed")),ij.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lu(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Cr(t,e,n);return i.customData._tokenResponse=r,i}function h0(t){return t!==void 0&&t.enterprise!==void 0}class sj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return oj(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function cj(t,e){return gn(t,"GET","/v2/recaptchaConfig",ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uj(t,e){return gn(t,"POST","/v1/accounts:delete",e)}async function VT(t,e){return gn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lj(t,e=!1){const r=Je(t),n=await r.getIdToken(e),i=Kg(n);ce(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:i,token:n,authTime:hs(hd(i.auth_time)),issuedAtTime:hs(hd(i.iat)),expirationTime:hs(hd(i.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function hd(t){return Number(t)*1e3}function Kg(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Mu("JWT malformed, contained fewer than 3 sections"),null;try{const i=tE(r);return i?JSON.parse(i):(Mu("Failed to decode base64 JWT payload"),null)}catch(i){return Mu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function d0(t){const e=Kg(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Lr&&fj(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function fj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=hs(this.lastLoginAt),this.creationTime=hs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(t){var e;const r=t.auth,n=await t.getIdToken(),i=await $o(t,VT(r,{idToken:n}));ce(i==null?void 0:i.users.length,r,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?BT(o.providerUserInfo):[],s=pj(t.providerData,a),c=t.isAnonymous,u=!(t.email&&o.passwordHash)&&!(s!=null&&s.length),l=c?u:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new vp(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(t,f)}async function dj(t){const e=Je(t);await tl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pj(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function BT(t){return t.map(e=>{var{providerId:r}=e,n=Wg(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(t,e){const r=await LT(t,{},async()=>{const n=gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,a=FT(t,i,"/v1/token",`key=${o}`),s=await t._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",MT.fetch()(a,{method:"POST",headers:s,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function gj(t,e){return gn(t,"POST","/v2/accounts:revokeToken",ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):d0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const r=d0(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:o}=await mj(e,r);this.updateTokensAndExpiration(n,i,Number(o))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:o}=r,a=new wo;return n&&(ce(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(ce(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(ce(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wo,this.toJSON())}_performRefresh(){return Yr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xr{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,o=Wg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new vp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const r=await $o(this,this.stsTokenManager.getToken(this.auth,e));return ce(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return lj(this,e)}reload(){return dj(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Xr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await tl(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ar(this.auth.app))return Promise.reject(nn(this.auth));const e=await this.getIdToken();return await $o(this,uj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,o,a,s,c,u,l;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,d=(i=r.email)!==null&&i!==void 0?i:void 0,p=(o=r.phoneNumber)!==null&&o!==void 0?o:void 0,m=(a=r.photoURL)!==null&&a!==void 0?a:void 0,y=(s=r.tenantId)!==null&&s!==void 0?s:void 0,g=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,A=(u=r.createdAt)!==null&&u!==void 0?u:void 0,T=(l=r.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:P,emailVerified:C,isAnonymous:x,providerData:I,stsTokenManager:b}=r;ce(P&&b,e,"internal-error");const w=wo.fromJSON(this.name,b);ce(typeof P=="string",e,"internal-error"),Sn(f,e.name),Sn(d,e.name),ce(typeof C=="boolean",e,"internal-error"),ce(typeof x=="boolean",e,"internal-error"),Sn(p,e.name),Sn(m,e.name),Sn(y,e.name),Sn(g,e.name),Sn(A,e.name),Sn(T,e.name);const S=new Xr({uid:P,auth:e,email:d,emailVerified:C,displayName:f,isAnonymous:x,photoURL:m,phoneNumber:p,tenantId:y,stsTokenManager:w,createdAt:A,lastLoginAt:T});return I&&Array.isArray(I)&&(S.providerData=I.map(k=>Object.assign({},k))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,r,n=!1){const i=new wo;i.updateFromServerResponse(r);const o=new Xr({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await tl(o),o}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];ce(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?BT(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),s=new wo;s.updateFromIdToken(n);const c=new Xr({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new vp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0=new Map;function Qr(t){fn(t instanceof Function,"Expected a class definition");let e=p0.get(t);return e?(fn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,p0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}UT.type="NONE";const m0=UT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t,e,r){return`firebase:${t}:${e}:${r}`}class xo{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:o}=this.auth;this.fullUserKey=Lu(this.userKey,i.apiKey,o),this.fullPersistenceKey=Lu("persistence",i.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new xo(Qr(m0),e,n);const i=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=i[0]||Qr(m0);const a=Lu(n,e.config.apiKey,e.name);let s=null;for(const u of r)try{const l=await u._get(a);if(l){const f=Xr._fromJSON(e,l);u!==o&&(s=f),o=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new xo(o,e,n):(o=c[0],s&&await o._set(a,s.toJSON()),await Promise.all(r.map(async u=>{if(u!==o)try{await u._remove(a)}catch{}})),new xo(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GT(e))return"Blackberry";if(YT(e))return"Webos";if(WT(e))return"Safari";if((e.includes("chrome/")||zT(e))&&!e.includes("edge/"))return"Chrome";if(KT(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function qT(t=Rt()){return/firefox\//i.test(t)}function WT(t=Rt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zT(t=Rt()){return/crios\//i.test(t)}function HT(t=Rt()){return/iemobile/i.test(t)}function KT(t=Rt()){return/android/i.test(t)}function GT(t=Rt()){return/blackberry/i.test(t)}function YT(t=Rt()){return/webos/i.test(t)}function Gg(t=Rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function yj(t=Rt()){var e;return Gg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vj(){return $C()&&document.documentMode===10}function XT(t=Rt()){return Gg(t)||KT(t)||YT(t)||GT(t)||/windows phone/i.test(t)||HT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(t,e=[]){let r;switch(t){case"Browser":r=g0(Rt());break;case"Worker":r=`${g0(Rt())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${zi}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=o=>new Promise((a,s)=>{try{const c=e(o);a(c)}catch(c){s(c)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _j(t,e={}){return gn(t,"GET","/v2/passwordPolicy",ei(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=6;class xj{constructor(e){var r,n,i,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:wj,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,o,a,s;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsNonAlphanumericCharacter)!==null&&s!==void 0?s:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new y0(this),this.idTokenSubscription=new y0(this),this.beforeStateQueue=new bj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Qr(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await VT(this,{idToken:e}),n=await Xr._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Ar(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(s,s))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,s=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===s)&&(c!=null&&c.user)&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await tl(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ar(this.app))return Promise.reject(nn(this));const r=e?Je(e):null;return r&&ce(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ar(this.app)?Promise.reject(nn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ar(this.app)?Promise.reject(nn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _j(this),r=new xj(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mc("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await gj(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Qr(e)||this._popupRedirectResolver;ce(r,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[Qr(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let a=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(s,this,"internal-error"),s.then(()=>{a||o(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,i);return()=>{a=!0,c()}}else{const c=e.addObserver(r);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&Z$(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Gi(t){return Je(t)}class y0{constructor(e){this.auth=e,this.observer=null,this.addObserver=UC(r=>this.observer=r)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ej(t){Ff=t}function JT(t){return Ff.loadJS(t)}function Tj(){return Ff.recaptchaEnterpriseScript}function Sj(){return Ff.gapiScript}function Pj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Ij="recaptcha-enterprise",Oj="NO_RECAPTCHA";class Cj{constructor(e){this.type=Ij,this.auth=Gi(e)}async verify(e="verify",r=!1){async function n(o){if(!r){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,s)=>{cj(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const u=new sj(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,a(u.siteKey)}}).catch(c=>{s(c)})})}function i(o,a,s){const c=window.grecaptcha;h0(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{a(u)}).catch(()=>{a(Oj)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{n(this.auth).then(s=>{if(!r&&h0(window.grecaptcha))i(s,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Tj();c.length!==0&&(c+=s),JT(c).then(()=>{i(s,o,a)}).catch(u=>{a(u)})}}).catch(s=>{a(s)})})}}async function v0(t,e,r,n=!1){const i=new Cj(t);let o;try{o=await i.verify(r)}catch{o=await i.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function bp(t,e,r,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await v0(t,e,r,r==="getOobCode");return n(t,o)}else return n(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await v0(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(t,e){const r=yf(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),o=r.getOptions();if(Wu(o,e??{}))return i;vr(i,"already-initialized")}return r.initialize({options:e})}function kj(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Qr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Nj(t,e,r){const n=Gi(t);ce(n._canInitEmulator,n,"emulator-config-failed"),ce(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,o=ZT(e),{host:a,port:s}=$j(e),c=s===null?"":`:${s}`;n.config.emulator={url:`${o}//${a}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),jj()}function ZT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $j(t){const e=ZT(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const o=i[1];return{host:o,port:b0(n.substr(o.length+1))}}else{const[o,a]=n.split(":");return{host:o,port:b0(a)}}}function b0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function jj(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Yr("not implemented")}_getIdTokenResponse(e){return Yr("not implemented")}_linkToIdToken(e,r){return Yr("not implemented")}_getReauthenticationResolver(e){return Yr("not implemented")}}async function Dj(t,e){return gn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mj(t,e){return Tc(t,"POST","/v1/accounts:signInWithPassword",ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lj(t,e){return Tc(t,"POST","/v1/accounts:signInWithEmailLink",ei(t,e))}async function Fj(t,e){return Tc(t,"POST","/v1/accounts:signInWithEmailLink",ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends Yg{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new Rs(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Rs(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bp(e,r,"signInWithPassword",Mj);case"emailLink":return Lj(e,{email:this._email,oobCode:this._password});default:vr(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bp(e,n,"signUpPassword",Dj);case"emailLink":return Fj(e,{idToken:r,email:this._email,oobCode:this._password});default:vr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(t,e){return Tc(t,"POST","/v1/accounts:signInWithIdp",ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj="http://localhost";class ji extends Yg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new ji(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):vr("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,o=Wg(r,["providerId","signInMethod"]);if(!n||!i)return null;const a=new ji(n,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Ao(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Ao(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ao(e,r)}buildRequest(){const e={requestUri:Vj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=gc(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Uj(t){const e=ts(rs(t)).link,r=e?ts(rs(e)).deep_link_id:null,n=ts(rs(t)).deep_link_id;return(n?ts(rs(n)).link:null)||n||r||e||t}class Xg{constructor(e){var r,n,i,o,a,s;const c=ts(rs(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,l=(n=c.oobCode)!==null&&n!==void 0?n:null,f=Bj((i=c.mode)!==null&&i!==void 0?i:null);ce(u&&l&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=l,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(s=c.tenantId)!==null&&s!==void 0?s:null}static parseLink(e){const r=Uj(e);try{return new Xg(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(){this.providerId=ha.PROVIDER_ID}static credential(e,r){return Rs._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Xg.parseLink(r);return ce(n,"argument-error"),Rs._fromEmailAndCode(e,n.code,n.tenantId)}}ha.PROVIDER_ID="password";ha.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ha.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends e1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn extends Sc{constructor(){super("facebook.com")}static credential(e){return ji._fromParams({providerId:Cn.PROVIDER_ID,signInMethod:Cn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cn.credentialFromTaggedObject(e)}static credentialFromError(e){return Cn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cn.credential(e.oauthAccessToken)}catch{return null}}}Cn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn extends Sc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return ji._fromParams({providerId:Rn.PROVIDER_ID,signInMethod:Rn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Rn.credentialFromTaggedObject(e)}static credentialFromError(e){return Rn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Rn.credential(r,n)}catch{return null}}}Rn.GOOGLE_SIGN_IN_METHOD="google.com";Rn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn extends Sc{constructor(){super("github.com")}static credential(e){return ji._fromParams({providerId:kn.PROVIDER_ID,signInMethod:kn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kn.credentialFromTaggedObject(e)}static credentialFromError(e){return kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kn.credential(e.oauthAccessToken)}catch{return null}}}kn.GITHUB_SIGN_IN_METHOD="github.com";kn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn extends Sc{constructor(){super("twitter.com")}static credential(e,r){return ji._fromParams({providerId:Nn.PROVIDER_ID,signInMethod:Nn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Nn.credentialFromTaggedObject(e)}static credentialFromError(e){return Nn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Nn.credential(r,n)}catch{return null}}}Nn.TWITTER_SIGN_IN_METHOD="twitter.com";Nn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qj(t,e){return Tc(t,"POST","/v1/accounts:signUp",ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const o=await Xr._fromIdTokenResponse(e,n,i),a=_0(n);return new Di({user:o,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=_0(n);return new Di({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function _0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends Lr{constructor(e,r,n,i){var o;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,rl.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new rl(e,r,n,i)}}function t1(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?rl._fromErrorAndOperation(t,o,e,n):o})}async function Wj(t,e,r=!1){const n=await $o(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Di._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zj(t,e,r=!1){const{auth:n}=t;if(Ar(n.app))return Promise.reject(nn(n));const i="reauthenticate";try{const o=await $o(t,t1(n,i,e,t),r);ce(o.idToken,n,"internal-error");const a=Kg(o.idToken);ce(a,n,"internal-error");const{sub:s}=a;return ce(t.uid===s,n,"user-mismatch"),Di._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&vr(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(t,e,r=!1){if(Ar(t.app))return Promise.reject(nn(t));const n="signIn",i=await t1(t,n,e),o=await Di._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(o.user),o}async function Hj(t,e){return r1(Gi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1(t){const e=Gi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Kj(t,e,r){if(Ar(t.app))return Promise.reject(nn(t));const n=Gi(t),a=await bp(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qj).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&n1(t),c}),s=await Di._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(s.user),s}function Gj(t,e,r){return Ar(t.app)?Promise.reject(nn(t)):Hj(Je(t),ha.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&n1(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yj(t,e){return gn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xj(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=Je(t),o={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},a=await $o(n,Yj(n.auth,o));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const s=n.providerData.find(({providerId:c})=>c==="password");s&&(s.displayName=n.displayName,s.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function Qj(t,e,r,n){return Je(t).onIdTokenChanged(e,r,n)}function Jj(t,e,r){return Je(t).beforeAuthStateChanged(e,r)}function Zj(t,e,r,n){return Je(t).onAuthStateChanged(e,r,n)}function eD(t){return Je(t).signOut()}const nl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(nl,"1"),this.storage.removeItem(nl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=1e3,rD=10;class o1 extends i1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,s,c)=>{this.notifyListeners(a,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},o=this.storage.getItem(n);vj()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,rD):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},tD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}o1.type="LOCAL";const nD=o1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1 extends i1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}a1.type="SESSION";const s1=a1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new Vf(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:o}=r.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const s=Array.from(a).map(async u=>u(r.origin,o)),c=await iD(s);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((s,c)=>{const u=Qg("",20);i.port1.start();const l=setTimeout(()=>{c(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(l),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),s(d.data.response);break;default:clearTimeout(l),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return window}function aD(t){Rr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(){return typeof Rr().WorkerGlobalScope<"u"&&typeof Rr().importScripts=="function"}async function sD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function uD(){return c1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="firebaseLocalStorageDb",lD=1,il="firebaseLocalStorage",l1="fbase_key";class Pc{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Bf(t,e){return t.transaction([il],e?"readwrite":"readonly").objectStore(il)}function fD(){const t=indexedDB.deleteDatabase(u1);return new Pc(t).toPromise()}function _p(){const t=indexedDB.open(u1,lD);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(il,{keyPath:l1})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(il)?e(n):(n.close(),await fD(),e(await _p()))})})}async function w0(t,e,r){const n=Bf(t,!0).put({[l1]:e,value:r});return new Pc(n).toPromise()}async function hD(t,e){const r=Bf(t,!1).get(e),n=await new Pc(r).toPromise();return n===void 0?null:n.value}function x0(t,e){const r=Bf(t,!0).delete(e);return new Pc(r).toPromise()}const dD=800,pD=3;class f1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _p(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>pD)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return c1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vf._getInstance(uD()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await sD(),!this.activeServiceWorker)return;this.sender=new oD(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _p();return await w0(e,nl,"1"),await x0(e,nl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>w0(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>hD(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>x0(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Bf(i,!1).getAll();return new Pc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}f1.type="LOCAL";const mD=f1;new Ec(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(t,e){return e?Qr(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg extends Yg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ao(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ao(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ao(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function yD(t){return r1(t.auth,new Jg(t),t.bypassAuthState)}function vD(t){const{auth:e,user:r}=t;return ce(r,e,"internal-error"),zj(r,new Jg(t),t.bypassAuthState)}async function bD(t){const{auth:e,user:r}=t;return ce(r,e,"internal-error"),Wj(r,new Jg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,r,n,i,o=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:o,error:a,type:s}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yD;case"linkViaPopup":case"linkViaRedirect":return bD;case"reauthViaPopup":case"reauthViaRedirect":return vD;default:vr(this.auth,"internal-error")}}resolve(e){fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=new Ec(2e3,1e4);class po extends h1{constructor(e,r,n,i,o){super(e,r,i,o),this.provider=n,this.authWindow=null,this.pollId=null,po.currentPopupAction&&po.currentPopupAction.cancel(),po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){fn(this.filter.length===1,"Popup operations only handle one event");const e=Qg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,po.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_D.get())};e()}}po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD="pendingRedirect",Fu=new Map;class xD extends h1{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Fu.get(this.auth._key());if(!e){try{const n=await AD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Fu.set(this.auth._key(),e)}return this.bypassAuthState||Fu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AD(t,e){const r=SD(e),n=TD(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function ED(t,e){Fu.set(t._key(),e)}function TD(t){return Qr(t._redirectPersistence)}function SD(t){return Lu(wD,t.config.apiKey,t.name)}async function PD(t,e,r=!1){if(Ar(t.app))return Promise.reject(nn(t));const n=Gi(t),i=gD(n,e),a=await new xD(n,i,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=10*60*1e3;class OD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CD(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!d1(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Cr(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ID&&this.cachedEventUids.clear(),this.cachedEventUids.has(A0(e))}saveEventToCache(e){this.cachedEventUids.add(A0(e)),this.lastProcessedEventTime=Date.now()}}function A0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function d1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function CD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return d1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(t,e={}){return gn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ND=/^https?/;async function $D(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RD(t);for(const r of e)try{if(jD(r))return}catch{}vr(t,"unauthorized-domain")}function jD(t){const e=yp(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!ND.test(r))return!1;if(kD.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=new Ec(3e4,6e4);function E0(){const t=Rr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function MD(t){return new Promise((e,r)=>{var n,i,o;function a(){E0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{E0(),r(Cr(t,"network-request-failed"))},timeout:DD.get()})}if(!((i=(n=Rr().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Rr().gapi)===null||o===void 0)&&o.load)a();else{const s=Pj("iframefcb");return Rr()[s]=()=>{gapi.load?a():r(Cr(t,"network-request-failed"))},JT(`${Sj()}?onload=${s}`).catch(c=>r(c))}}).catch(e=>{throw Vu=null,e})}let Vu=null;function LD(t){return Vu=Vu||MD(t),Vu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=new Ec(5e3,15e3),VD="__/auth/iframe",BD="emulator/auth/iframe",UD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WD(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Hg(e,BD):`https://${t.config.authDomain}/${VD}`,n={apiKey:e.apiKey,appName:t.name,v:zi},i=qD.get(t.config.apiHost);i&&(n.eid=i);const o=t._getFrameworks();return o.length&&(n.fw=o.join(",")),`${r}?${gc(n).slice(1)}`}async function zD(t){const e=await LD(t),r=Rr().gapi;return ce(r,t,"internal-error"),e.open({where:document.body,url:WD(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UD,dontclear:!0},n=>new Promise(async(i,o)=>{await n.restyle({setHideOnLeave:!1});const a=Cr(t,"network-request-failed"),s=Rr().setTimeout(()=>{o(a)},FD.get());function c(){Rr().clearTimeout(s),i(n)}n.ping(c).then(c,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KD=500,GD=600,YD="_blank",XD="http://localhost";class T0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QD(t,e,r,n=KD,i=GD){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let s="";const c=Object.assign(Object.assign({},HD),{width:n.toString(),height:i.toString(),top:o,left:a}),u=Rt().toLowerCase();r&&(s=zT(u)?YD:r),qT(u)&&(e=e||XD,c.scrollbars="yes");const l=Object.entries(c).reduce((d,[p,m])=>`${d}${p}=${m},`,"");if(yj(u)&&s!=="_self")return JD(e||"",s),new T0(null);const f=window.open(e||"",s,l);ce(f,t,"popup-blocked");try{f.focus()}catch{}return new T0(f)}function JD(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="__/auth/handler",eM="emulator/auth/handler",tM=encodeURIComponent("fac");async function S0(t,e,r,n,i,o){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:zi,eventId:i};if(e instanceof e1){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",BC(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,f]of Object.entries({}))a[l]=f}if(e instanceof Sc){const l=e.getScopes().filter(f=>f!=="");l.length>0&&(a.scopes=l.join(","))}t.tenantId&&(a.tid=t.tenantId);const s=a;for(const l of Object.keys(s))s[l]===void 0&&delete s[l];const c=await t._getAppCheckToken(),u=c?`#${tM}=${encodeURIComponent(c)}`:"";return`${rM(t)}?${gc(s).slice(1)}${u}`}function rM({config:t}){return t.emulator?Hg(t,eM):`https://${t.authDomain}/${ZD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="webStorageSupport";class nM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=s1,this._completeRedirectFn=PD,this._overrideRedirectResult=ED}async _openPopup(e,r,n,i){var o;fn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await S0(e,r,n,yp(),i);return QD(e,a,Qg())}async _openRedirect(e,r,n,i){await this._originValidation(e);const o=await S0(e,r,n,yp(),i);return aD(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:o}=this.eventManagers[r];return i?Promise.resolve(i):(fn(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await zD(e),n=new OD(e);return r.register("authEvent",i=>(ce(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(dd,{type:dd},i=>{var o;const a=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[dd];a!==void 0&&r(!!a),vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=$D(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return XT()||WT()||Gg()}}const iM=nM;var P0="@firebase/auth",I0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sM(t){Ri(new Kn("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=n.options;ce(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:a,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QT(t)},u=new Aj(n,i,o,c);return kj(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Ri(new Kn("auth-internal",e=>{const r=Gi(e.getProvider("auth").getImmediate());return(n=>new oM(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pr(P0,I0,aM(t)),Pr(P0,I0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=5*60,uM=oE("authIdTokenMaxAge")||cM;let O0=null;const lM=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>uM)return;const i=r==null?void 0:r.token;O0!==i&&(O0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function fM(t=ig()){const e=yf(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Rj(t,{popupRedirectResolver:iM,persistence:[mD,nD,s1]}),n=oE("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const a=lM(o.toString());Jj(r,a,()=>a(r.currentUser)),Qj(r,s=>a(s))}}const i=rE("auth");return i&&Nj(r,`http://${i}`),r}function hM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Ej({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const o=Cr("internal-error");o.customData=i,r(o)},n.type="text/javascript",n.charset="UTF-8",hM().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sM("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="firebasestorage.googleapis.com",dM="storageBucket",pM=2*60*1e3,mM=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends Lr{constructor(e,r,n=0){super(pd(e),`Firebase Storage: ${r} (${pd(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return pd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Dr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Dr||(Dr={}));function pd(t){return"storage/"+t}function gM(){const t="An unknown error occurred, please check the error payload for server response.";return new Fr(Dr.UNKNOWN,t)}function yM(){return new Fr(Dr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vM(){return new Fr(Dr.CANCELED,"User canceled the upload/download.")}function bM(t){return new Fr(Dr.INVALID_URL,"Invalid URL '"+t+"'.")}function _M(t){return new Fr(Dr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function C0(t){return new Fr(Dr.INVALID_ARGUMENT,t)}function m1(){return new Fr(Dr.APP_DELETED,"The Firebase app was deleted.")}function wM(t){return new Fr(Dr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=dr.makeFromUrl(e,r)}catch{return new dr(e,"")}if(n.path==="")return n;throw _M(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function o(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const a="(/(.*))?$",s=new RegExp("^gs://"+i+a,"i"),c={bucket:1,path:3};function u(C){C.path_=decodeURIComponent(C.path)}const l="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${l}/b/${i}/o${d}`,"i"),m={bucket:1,path:3},y=r===p1?"(?:storage.googleapis.com|storage.cloud.google.com)":r,g="([^?#]*)",A=new RegExp(`^https?://${y}/${i}/${g}`,"i"),P=[{regex:s,indices:c,postModify:o},{regex:p,indices:m,postModify:u},{regex:A,indices:{bucket:1,path:2},postModify:u}];for(let C=0;C<P.length;C++){const x=P[C],I=x.regex.exec(e);if(I){const b=I[x.indices.bucket];let w=I[x.indices.path];w||(w=""),n=new dr(b,w),x.postModify(n);break}}if(n==null)throw bM(e);return n}}class xM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(t,e,r){let n=1,i=null,o=null,a=!1,s=0;function c(){return s===2}let u=!1;function l(...g){u||(u=!0,e.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,t(p,c())},g)}function d(){o&&clearTimeout(o)}function p(g,...A){if(u){d();return}if(g){d(),l.call(null,g,...A);return}if(c()||a){d(),l.call(null,g,...A);return}n<64&&(n*=2);let P;s===1?(s=2,P=0):P=(n+Math.random())*1e3,f(P)}let m=!1;function y(g){m||(m=!0,d(),!u&&(i!==null?(g||(s=2),clearTimeout(i),f(0)):g||(s=1)))}return f(0),o=setTimeout(()=>{a=!0,y(!0)},r),y}function EM(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(t){return t!==void 0}function R0(t,e,r,n){if(n<e)throw C0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw C0(`Invalid value for '${t}'. Expected ${r} or less.`)}function SM(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var ol;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ol||(ol={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return r||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,r,n,i,o,a,s,c,u,l,f,d=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=s,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,m)=>{this.resolve_=p,this.reject_=m,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new fu(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=s=>{const c=s.loaded,u=s.lengthComputable?s.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const s=o.getErrorCode()===ol.NO_ERROR,c=o.getStatus();if(!s||PM(c,this.additionalRetryCodes_)&&this.retry){const l=o.getErrorCode()===ol.ABORT;n(!1,new fu(!1,null,l));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new fu(u,o))})},r=(n,i)=>{const o=this.resolve_,a=this.reject_,s=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(s,s.getResponse());TM(c)?o(c):o()}catch(c){a(c)}else if(s!==null){const c=gM();c.serverResponse=s.getErrorText(),this.errorCallback_?a(this.errorCallback_(s,c)):a(c)}else if(i.canceled){const c=this.appDelete_?m1():vM();a(c)}else{const c=yM();a(c)}};this.canceled_?r(!1,new fu(!1,null,!0)):this.backoffId_=AM(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&EM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class fu{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function OM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function CM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function RM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function kM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function NM(t,e,r,n,i,o,a=!0){const s=SM(t.urlParams),c=t.url+s,u=Object.assign({},t.headers);return RM(u,e),OM(u,r),CM(u,o),kM(u,n),new IM(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function jM(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,r){this._service=e,r instanceof dr?this._location=r:this._location=dr.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new al(e,r)}get root(){const e=new dr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jM(this._location.path)}get storage(){return this._service}get parent(){const e=$M(this._location.path);if(e===null)return null;const r=new dr(this._location.bucket,e);return new al(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw wM(e)}}function k0(t,e){const r=e==null?void 0:e[dM];return r==null?null:dr.makeFromBucketSpec(r,t)}function DM(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:aE(i,t.app.options.projectId))}class MM{constructor(e,r,n,i,o){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=p1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pM,this._maxUploadRetryTime=mM,this._requests=new Set,i!=null?this._bucket=dr.makeFromBucketSpec(i,this._host):this._bucket=k0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=dr.makeFromBucketSpec(this._url,e):this._bucket=k0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){R0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){R0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new al(this,e)}_makeRequest(e,r,n,i,o=!0){if(this._deleted)return new xM(m1());{const a=NM(e,this._appId,n,i,r,this._firebaseVersion,o);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const N0="@firebase/storage",$0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="storage";function LM(t=ig(),e){t=Je(t);const n=yf(t,g1).getImmediate({identifier:e}),i=nE("storage");return i&&FM(n,...i),n}function FM(t,e,r,n={}){DM(t,e,r,n)}function VM(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new MM(r,n,i,e,zi)}function BM(){Ri(new Kn(g1,VM,"PUBLIC").setMultipleInstances(!0)),Pr(N0,$0,""),Pr(N0,$0,"esm2017")}BM();const UM={apiKey:"AIzaSyBbS-5vNyJpwqSKewlyr5OLpIAYA81FTwI",authDomain:"ocp-provizie.firebaseapp.com",projectId:"ocp-provizie",storageBucket:"ocp-provizie.firebasestorage.app",messagingSenderId:"878739646832",appId:"1:878739646832:web:3428443c84c18a95b607b5",measurementId:"G-TVKQZ1D7RJ"},Zg=uE(UM),Bt=F$(Zg),hu=fM(Zg);LM(Zg);const y1=D.createContext(void 0);function v1({children:t}){const[e,r]=D.useState(null),[n,i]=D.useState(null),[o,a]=D.useState(!0),[s,c]=D.useState(!1);D.useEffect(()=>{const d=Zj(hu,async p=>{if(a(!0),p){i(p);try{const m=await Q$(rn(Bt,"users",p.uid));if(m.exists()){const y=m.data();r({id:p.uid,name:y.name||p.displayName||"User",email:y.email||p.email||"",firm:y.firm||"SKALLARS"}),c(!0)}else r({id:p.uid,name:p.displayName||"User",email:p.email||"",firm:"SKALLARS"}),await l0(rn(Bt,"users",p.uid),{name:p.displayName||"User",email:p.email||"",firm:"SKALLARS",createdAt:new Date().toISOString()}),c(!0)}catch(m){console.error("Error fetching user data:",m),r(null),c(!1)}}else i(null),r(null),c(!1);a(!1)});return()=>d()},[]);const u=async(d,p,m,y)=>{a(!0);try{const A=(await Kj(hu,d,p)).user;await Xj(A,{displayName:m}),await l0(rn(Bt,"users",A.uid),{name:m,email:d,firm:y,createdAt:new Date().toISOString()})}catch(g){throw console.error("Registration failed:",g),g}finally{a(!1)}},l=async(d,p)=>{a(!0);try{await Gj(hu,d,p)}catch(m){throw console.error("Login failed:",m),m}finally{a(!1)}},f=async()=>{try{await eD(hu)}catch(d){throw console.error("Logout failed:",d),d}};return E.jsx(y1.Provider,{value:{user:e,firebaseUser:n,isLoading:o,isAuthenticated:s,login:l,register:u,logout:f},children:t})}function yn(){const t=D.useContext(y1);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const md=fa(Bt,"invoices"),du=fa(Bt,"clients"),Wa=fa(Bt,"settlements"),pu={getInvoices:async()=>(await Gr(md)).docs.map(e=>({id:e.id,...e.data()})),getInvoicesByFirm:async t=>{const e=Un(md,In("invoicedByFirm","==",t),Mf("date","desc"));return(await Gr(e)).docs.map(n=>({id:n.id,...n.data()}))},addInvoice:async t=>(await Ug(md,{...t,createdAt:_i()})).id,updateInvoice:async(t,e)=>{const r=rn(Bt,"invoices",t);await gp(r,{...e,updatedAt:_i()})},deleteInvoice:async t=>{const e=rn(Bt,"invoices",t);await kT(e)},togglePaid:async(t,e)=>{const r=rn(Bt,"invoices",t);await gp(r,{isPaid:e,updatedAt:_i(),paidAt:e?_i():null})}},qM={getClients:async()=>(await Gr(du)).docs.map(e=>e.data().name),addClient:async t=>{const e=Un(du,In("name","==",t));(await Gr(e)).empty&&await Ug(du,{name:t,createdAt:_i()})},searchClients:async t=>{const r=(await Gr(du)).docs.map(i=>i.data().name);if(!t)return[];const n=t.toLowerCase();return r.filter(i=>i.toLowerCase().includes(n))}},j0={getSettlements:async()=>(await Gr(Wa)).docs.map(e=>({id:e.id,...e.data()})),isQuarterSettled:async(t,e)=>{const r=Un(Wa,In("quarterKey","==",t),In("settledBy","==",e)),n=await Gr(r);return!n.empty&&n.docs[0].data().isSettled},settleQuarter:async(t,e)=>{const r=Un(Wa,In("quarterKey","==",t),In("settledBy","==",e)),n=await Gr(r),i={quarterKey:t,isSettled:!0,settledAt:new Date().toISOString(),settledBy:e,updatedAt:_i()};if(n.empty)await Ug(Wa,{...i,createdAt:_i()});else{const o=rn(Bt,"settlements",n.docs[0].id);await gp(o,i)}},unsettleQuarter:async(t,e)=>{const r=Un(Wa,In("quarterKey","==",t),In("settledBy","==",e)),n=await Gr(r);if(!n.empty){const i=rn(Bt,"settlements",n.docs[0].id);await kT(i)}}},WM={invoices:[],isLoading:!0,addInvoice:()=>{},removeInvoice:()=>{},updateInvoice:()=>{},resetAllData:()=>{},togglePaid:()=>{}},b1=D.createContext(WM);function da(){const t=D.useContext(b1);if(!t)throw new Error("useInvoices must be used within an InvoiceProvider");return t}const D0=t=>t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.clientName=="string"&&typeof t.amount=="number"&&typeof t.date=="string"&&typeof t.commissionPercentage=="number"&&typeof t.invoicedByFirm=="string"&&typeof t.referredByFirm=="string"&&typeof t.isPaid=="boolean"&&["SKALLARS","MKMs","Contax"].includes(t.invoicedByFirm)&&["SKALLARS","MKMs","Contax"].includes(t.referredByFirm);function _1({children:t}){yn();const[e,r]=D.useState(!0),[n,i]=D.useState([]);D.useEffect(()=>{r(!0);const f=Un(fa(Bt,"invoices"),Mf("date","desc")),d=qg(f,p=>{try{const m=p.docs.map(y=>{const g=y.data();return{id:y.id,clientName:g.clientName,amount:g.amount,date:g.date,commissionPercentage:g.commissionPercentage,invoicedByFirm:g.invoicedByFirm,referredByFirm:g.referredByFirm,isPaid:g.isPaid}});i(m.filter(D0))}catch(m){console.error("Error processing Firestore data:",m)}finally{r(!1)}},p=>{console.error("Firestore listener error:",p),r(!1)});return()=>d()},[]);const o=D.useCallback(async f=>{if(!D0(f)){console.error("Invalid invoice data:",f);return}try{await pu.addInvoice(f)}catch(d){console.error("Error adding invoice to Firestore:",d)}},[]),a=D.useCallback(async f=>{try{await pu.deleteInvoice(f)}catch(d){console.error("Error removing invoice from Firestore:",d)}},[]),s=D.useCallback(async(f,d)=>{try{await pu.updateInvoice(f,d)}catch(p){console.error("Error updating invoice in Firestore:",p)}},[]),c=D.useCallback(async f=>{try{const d=n.find(p=>p.id===f);d&&await pu.togglePaid(f,!d.isPaid)}catch(d){console.error("Error toggling invoice paid status in Firestore:",d)}},[n]),u=D.useCallback(async()=>{try{console.log("Reset all data requested - this would require admin privileges")}catch(f){console.error("Error resetting data in Firestore:",f)}},[]),l=D.useMemo(()=>({invoices:n,isLoading:e,addInvoice:o,removeInvoice:a,updateInvoice:s,resetAllData:u,togglePaid:c}),[n,e,o,a,s,u,c]);return E.jsx(b1.Provider,{value:l,children:t})}const w1=D.createContext(void 0);function zM({children:t}){const{invoices:e}=da(),[r,n]=D.useState(()=>{const f=localStorage.getItem("selectedYear");return f?parseInt(f):new Date().getFullYear()}),[i,o]=D.useState(()=>{const f=localStorage.getItem("selectedQuarter");return f?parseInt(f):Math.floor(new Date().getMonth()/3)+1}),a=j.useMemo(()=>{const f=new Date().getFullYear(),d=e.map(y=>new Date(y.date).getFullYear()),p=Array.from({length:10},(y,g)=>f-5+g);return[...new Set([...d,...p])].sort((y,g)=>g-y)},[e]),s=j.useMemo(()=>{const f={};return a.forEach(d=>{const p=e.filter(C=>new Date(C.date).getFullYear()===d),m=p.reduce((C,x)=>C+x.amount,0),y=p.reduce((C,x)=>C+x.amount*x.commissionPercentage/100,0),g=d-1,T=e.filter(C=>new Date(C.date).getFullYear()===g).reduce((C,x)=>C+x.amount,0),P=T===0?100:(m-T)/T*100;f[d]={totalRevenue:m,totalCommissions:y,invoiceCount:p.length,yearOverYearGrowth:P}}),f},[e,a]),c=f=>{n(f),localStorage.setItem("selectedYear",f.toString())},u=f=>{f>=1&&f<=4&&(o(f),localStorage.setItem("selectedQuarter",f.toString()))},l=(f,d)=>{d>=1&&d<=4&&(n(f),o(d),localStorage.setItem("selectedYear",f.toString()),localStorage.setItem("selectedQuarter",d.toString()))};return E.jsx(w1.Provider,{value:{currentYear:r,currentQuarter:i,availableYears:a,yearlyStats:s,setYear:c,setQuarter:u,selectYearAndQuarter:l},children:t})}function Ic(){const t=D.useContext(w1);if(t===void 0)throw new Error("useYear must be used within a YearProvider");return t}function sl(t,e,r){const n=new Date(e,(r-1)*3,1),i=new Date(e,r*3,0);return t>=n&&t<=i}const HM=D.createContext(void 0);function KM({children:t}){const[e,r]=D.useState([]);D.useEffect(()=>{const s=Un(fa(Bt,"settlements"),Mf("quarterKey")),c=qg(s,u=>{try{const l=u.docs.map(f=>{const d=f.data();return{quarterKey:d.quarterKey,isSettled:d.isSettled,settledAt:d.settledAt,settledBy:d.settledBy}});r(l)}catch(l){console.error("Error processing settlement data from Firestore:",l)}},u=>{console.error("Firestore settlements listener error:",u)});return()=>c()},[]);const a={settledQuarters:e,isQuarterSettled:(s,c)=>e.some(u=>u.quarterKey===s&&u.isSettled&&u.settledBy===c),settleQuarter:async(s,c)=>{try{await j0.settleQuarter(s,c)}catch(u){console.error("Error settling quarter in Firestore:",u)}},unsettleQuarter:async(s,c)=>{try{await j0.unsettleQuarter(s,c)}catch(u){console.error("Error unsettling quarter in Firestore:",u)}}};return E.jsx(HM.Provider,{value:a,children:t})}const GM={clientHistory:[],addClient:()=>{},searchClients:()=>[]},x1=D.createContext(GM);function A1(){const t=D.useContext(x1);if(!t)throw new Error("useClient must be used within a ClientProvider");return t}function YM({children:t}){const[e,r]=D.useState([]);D.useEffect(()=>{const a=Un(fa(Bt,"clients"),Mf("name")),s=qg(a,c=>{try{const u=c.docs.map(l=>l.data().name);r(u)}catch(u){console.error("Error processing client data from Firestore:",u)}},c=>{console.error("Firestore client listener error:",c)});return()=>s()},[]);const o={clientHistory:e,addClient:async a=>{if(a)try{await qM.addClient(a)}catch(s){console.error("Error adding client to Firestore:",s)}},searchClients:async a=>{if(!a)return[];try{const s=a.toLowerCase();return e.filter(u=>u.toLowerCase().includes(s))}catch(s){return console.error("Error searching clients:",s),[]}}};return E.jsx(x1.Provider,{value:o,children:t})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var XM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Oe=(t,e)=>{const r=D.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:s="",children:c,...u},l)=>D.createElement("svg",{ref:l,...XM,width:i,height:i,stroke:n,strokeWidth:a?Number(o)*24/Number(i):o,className:["lucide",`lucide-${QM(t)}`,s].join(" "),...u},[...e.map(([f,d])=>D.createElement(f,d)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=Oe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=Oe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=Oe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=Oe("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=Oe("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=Oe("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=Oe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=Oe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=Oe("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=Oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Oe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=Oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=Oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=Oe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=Oe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=Oe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=Oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=Oe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=Oe("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=Oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=Oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=Oe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=Oe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=Oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=Oe("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=Oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=Oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=Oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=Oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function g2(){const{login:t,register:e,isLoading:r}=yn(),[n,i]=D.useState(!1),[o,a]=D.useState(""),[s,c]=D.useState(""),[u,l]=D.useState(""),[f,d]=D.useState("SKALLARS"),[p,m]=D.useState(null),y=async A=>{if(A.preventDefault(),m(null),!o||!s){m("Email and password are required");return}if(n&&!u){m("Name is required for registration");return}try{n?await e(o,s,u,f):await t(o,s)}catch(T){const P=T.message||"Authentication failed. Please try again.";m(P)}},g=()=>{i(!n),m(null)};return E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"max-w-md w-full space-y-8",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Commission Tracker"}),E.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:n?"Create an account":"Sign in to manage your commissions"})]}),E.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,children:[p&&E.jsx("div",{className:"rounded-md bg-red-50 p-4",children:E.jsx("div",{className:"flex",children:E.jsx("div",{className:"ml-3",children:E.jsx("h3",{className:"text-sm font-medium text-red-800",children:p})})})}),E.jsxs("div",{className:"rounded-md shadow-sm space-y-3",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),E.jsxs("div",{className:"flex items-center",children:[E.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500",children:E.jsx(u2,{className:"h-5 w-5"})}),E.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:o,onChange:A=>a(A.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-r-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address"})]})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),E.jsxs("div",{className:"flex items-center",children:[E.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500",children:E.jsx(s2,{className:"h-5 w-5"})}),E.jsx("input",{id:"password",name:"password",type:"password",autoComplete:n?"new-password":"current-password",required:!0,value:s,onChange:A=>c(A.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-r-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password"})]})]}),n&&E.jsxs("div",{children:[E.jsx("label",{htmlFor:"name",className:"sr-only",children:"Full Name"}),E.jsxs("div",{className:"flex items-center",children:[E.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500",children:E.jsx(p2,{className:"h-5 w-5"})}),E.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:u,onChange:A=>l(A.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-r-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Full Name"})]})]}),n&&E.jsxs("div",{children:[E.jsx("label",{htmlFor:"firm",className:"sr-only",children:"Firm"}),E.jsxs("div",{className:"flex items-center",children:[E.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500",children:E.jsx(r2,{className:"h-5 w-5"})}),E.jsxs("select",{id:"firm",name:"firm",value:f,onChange:A=>d(A.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-r-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",children:[E.jsx("option",{value:"SKALLARS",children:"SKALLARS"}),E.jsx("option",{value:"MKMs",children:"MKMs"}),E.jsx("option",{value:"Contax",children:"Contax"})]})]})]})]}),E.jsx("div",{className:"flex items-center justify-between",children:E.jsx("div",{className:"text-sm",children:E.jsx("button",{type:"button",onClick:g,className:"font-medium text-indigo-600 hover:text-indigo-500",children:n?"Already have an account? Sign in":"Don't have an account? Register"})})}),E.jsx("div",{children:E.jsx("button",{type:"submit",disabled:r,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:r?n?"Creating account...":"Signing in...":n?"Create account":"Sign in"})})]})]})})}const O1=typeof document<"u"?j.useLayoutEffect:()=>{};function y2(t){const e=D.useRef(null);return O1(()=>{e.current=t},[t]),D.useCallback((...r)=>{const n=e.current;return n==null?void 0:n(...r)},[])}const Oc=t=>{var e;return(e=t==null?void 0:t.ownerDocument)!==null&&e!==void 0?e:document},wi=t=>t&&"window"in t&&t.window===t?t:Oc(t).defaultView||window;function v2(t){var e;return typeof window>"u"||window.navigator==null?!1:((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands.some(r=>t.test(r.brand)))||t.test(window.navigator.userAgent)}function b2(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function C1(t){let e=null;return()=>(e==null&&(e=t()),e)}const _2=C1(function(){return b2(/^Mac/i)}),w2=C1(function(){return v2(/Android/i)});function x2(t){return t.mozInputSource===0&&t.isTrusted?!0:w2()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}class A2{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,r){this.nativeEvent=r,this.target=r.target,this.currentTarget=r.currentTarget,this.relatedTarget=r.relatedTarget,this.bubbles=r.bubbles,this.cancelable=r.cancelable,this.defaultPrevented=r.defaultPrevented,this.eventPhase=r.eventPhase,this.isTrusted=r.isTrusted,this.timeStamp=r.timeStamp,this.type=e}}function R1(t){let e=D.useRef({isFocused:!1,observer:null});O1(()=>{const n=e.current;return()=>{n.observer&&(n.observer.disconnect(),n.observer=null)}},[]);let r=y2(n=>{t==null||t(n)});return D.useCallback(n=>{if(n.target instanceof HTMLButtonElement||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLSelectElement){e.current.isFocused=!0;let i=n.target,o=a=>{e.current.isFocused=!1,i.disabled&&r(new A2("blur",a)),e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};i.addEventListener("focusout",o,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&i.disabled){var a;(a=e.current.observer)===null||a===void 0||a.disconnect();let s=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:s})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:s}))}}),e.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[r])}function E2(t){let{isDisabled:e,onFocus:r,onBlur:n,onFocusChange:i}=t;const o=D.useCallback(c=>{if(c.target===c.currentTarget)return n&&n(c),i&&i(!1),!0},[n,i]),a=R1(o),s=D.useCallback(c=>{const u=Oc(c.target);c.target===c.currentTarget&&u.activeElement===c.target&&(r&&r(c),i&&i(!0),a(c))},[i,r,a]);return{focusProps:{onFocus:!e&&(r||i||n)?s:void 0,onBlur:!e&&(n||i)?o:void 0}}}let Cc=null,wp=new Set,ds=new Map,Mi=!1,xp=!1;const T2={Tab:!0,Escape:!0};function ry(t,e){for(let r of wp)r(t,e)}function S2(t){return!(t.metaKey||!_2()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function ul(t){Mi=!0,S2(t)&&(Cc="keyboard",ry("keyboard",t))}function tr(t){Cc="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(Mi=!0,ry("pointer",t))}function k1(t){x2(t)&&(Mi=!0,Cc="virtual")}function N1(t){t.target===window||t.target===document||(!Mi&&!xp&&(Cc="virtual",ry("virtual",t)),Mi=!1,xp=!1)}function $1(){Mi=!1,xp=!0}function Ap(t){if(typeof window>"u"||ds.get(wi(t)))return;const e=wi(t),r=Oc(t);let n=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){Mi=!0,n.apply(this,arguments)},r.addEventListener("keydown",ul,!0),r.addEventListener("keyup",ul,!0),r.addEventListener("click",k1,!0),e.addEventListener("focus",N1,!0),e.addEventListener("blur",$1,!1),typeof PointerEvent<"u"?(r.addEventListener("pointerdown",tr,!0),r.addEventListener("pointermove",tr,!0),r.addEventListener("pointerup",tr,!0)):(r.addEventListener("mousedown",tr,!0),r.addEventListener("mousemove",tr,!0),r.addEventListener("mouseup",tr,!0)),e.addEventListener("beforeunload",()=>{j1(t)},{once:!0}),ds.set(e,{focus:n})}const j1=(t,e)=>{const r=wi(t),n=Oc(t);e&&n.removeEventListener("DOMContentLoaded",e),ds.has(r)&&(r.HTMLElement.prototype.focus=ds.get(r).focus,n.removeEventListener("keydown",ul,!0),n.removeEventListener("keyup",ul,!0),n.removeEventListener("click",k1,!0),r.removeEventListener("focus",N1,!0),r.removeEventListener("blur",$1,!1),typeof PointerEvent<"u"?(n.removeEventListener("pointerdown",tr,!0),n.removeEventListener("pointermove",tr,!0),n.removeEventListener("pointerup",tr,!0)):(n.removeEventListener("mousedown",tr,!0),n.removeEventListener("mousemove",tr,!0),n.removeEventListener("mouseup",tr,!0)),ds.delete(r))};function P2(t){const e=Oc(t);let r;return e.readyState!=="loading"?Ap(t):(r=()=>{Ap(t)},e.addEventListener("DOMContentLoaded",r)),()=>j1(t,r)}typeof document<"u"&&P2();function D1(){return Cc!=="pointer"}const I2=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function O2(t,e,r){var n;const i=typeof window<"u"?wi(r==null?void 0:r.target).HTMLInputElement:HTMLInputElement,o=typeof window<"u"?wi(r==null?void 0:r.target).HTMLTextAreaElement:HTMLTextAreaElement,a=typeof window<"u"?wi(r==null?void 0:r.target).HTMLElement:HTMLElement,s=typeof window<"u"?wi(r==null?void 0:r.target).KeyboardEvent:KeyboardEvent;return t=t||(r==null?void 0:r.target)instanceof i&&!I2.has(r==null||(n=r.target)===null||n===void 0?void 0:n.type)||(r==null?void 0:r.target)instanceof o||(r==null?void 0:r.target)instanceof a&&(r==null?void 0:r.target.isContentEditable),!(t&&e==="keyboard"&&r instanceof s&&!T2[r.key])}function C2(t,e,r){Ap(),D.useEffect(()=>{let n=(i,o)=>{O2(!!(r!=null&&r.isTextInput),i,o)&&t(D1())};return wp.add(n),()=>{wp.delete(n)}},e)}function R2(t){let{isDisabled:e,onBlurWithin:r,onFocusWithin:n,onFocusWithinChange:i}=t,o=D.useRef({isFocusWithin:!1}),a=D.useCallback(u=>{o.current.isFocusWithin&&!u.currentTarget.contains(u.relatedTarget)&&(o.current.isFocusWithin=!1,r&&r(u),i&&i(!1))},[r,i,o]),s=R1(a),c=D.useCallback(u=>{!o.current.isFocusWithin&&document.activeElement===u.target&&(n&&n(u),i&&i(!0),o.current.isFocusWithin=!0,s(u))},[n,i,s]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:c,onBlur:a}}}let ll=!1,gd=0;function Ep(){ll=!0,setTimeout(()=>{ll=!1},50)}function M0(t){t.pointerType==="touch"&&Ep()}function k2(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",M0):document.addEventListener("touchend",Ep),gd++,()=>{gd--,!(gd>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",M0):document.removeEventListener("touchend",Ep))}}function N2(t){let{onHoverStart:e,onHoverChange:r,onHoverEnd:n,isDisabled:i}=t,[o,a]=D.useState(!1),s=D.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;D.useEffect(k2,[]);let{hoverProps:c,triggerHoverEnd:u}=D.useMemo(()=>{let l=(p,m)=>{if(s.pointerType=m,i||m==="touch"||s.isHovered||!p.currentTarget.contains(p.target))return;s.isHovered=!0;let y=p.currentTarget;s.target=y,e&&e({type:"hoverstart",target:y,pointerType:m}),r&&r(!0),a(!0)},f=(p,m)=>{if(s.pointerType="",s.target=null,m==="touch"||!s.isHovered)return;s.isHovered=!1;let y=p.currentTarget;n&&n({type:"hoverend",target:y,pointerType:m}),r&&r(!1),a(!1)},d={};return typeof PointerEvent<"u"?(d.onPointerEnter=p=>{ll&&p.pointerType==="mouse"||l(p,p.pointerType)},d.onPointerLeave=p=>{!i&&p.currentTarget.contains(p.target)&&f(p,p.pointerType)}):(d.onTouchStart=()=>{s.ignoreEmulatedMouseEvents=!0},d.onMouseEnter=p=>{!s.ignoreEmulatedMouseEvents&&!ll&&l(p,"mouse"),s.ignoreEmulatedMouseEvents=!1},d.onMouseLeave=p=>{!i&&p.currentTarget.contains(p.target)&&f(p,"mouse")}),{hoverProps:d,triggerHoverEnd:f}},[e,r,n,i,s]);return D.useEffect(()=>{i&&u({currentTarget:s.target},s.pointerType)},[i]),{hoverProps:c,isHovered:o}}function $2(t={}){let{autoFocus:e=!1,isTextInput:r,within:n}=t,i=D.useRef({isFocused:!1,isFocusVisible:e||D1()}),[o,a]=D.useState(!1),[s,c]=D.useState(()=>i.current.isFocused&&i.current.isFocusVisible),u=D.useCallback(()=>c(i.current.isFocused&&i.current.isFocusVisible),[]),l=D.useCallback(p=>{i.current.isFocused=p,a(p),u()},[u]);C2(p=>{i.current.isFocusVisible=p,u()},[],{isTextInput:r});let{focusProps:f}=E2({isDisabled:n,onFocusChange:l}),{focusWithinProps:d}=R2({isDisabled:!n,onFocusWithinChange:l});return{isFocused:o,isFocusVisible:s,focusProps:n?d:f}}var j2=Object.defineProperty,D2=(t,e,r)=>e in t?j2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yd=(t,e,r)=>(D2(t,typeof e!="symbol"?e+"":e,r),r);let M2=class{constructor(){yd(this,"current",this.detect()),yd(this,"handoffState","pending"),yd(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},ps=new M2;function M1(t){return ps.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}function L2(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Wf(){let t=[],e={addEventListener(r,n,i,o){return r.addEventListener(n,i,o),e.add(()=>r.removeEventListener(n,i,o))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return e.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return e.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return L2(()=>{n.current&&r[0]()}),e.add(()=>{n.current=!1})},style(r,n,i){let o=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:i}),this.add(()=>{Object.assign(r.style,{[n]:o})})},group(r){let n=Wf();return r(n),this.add(()=>n.dispose())},add(r){return t.includes(r)||t.push(r),()=>{let n=t.indexOf(r);if(n>=0)for(let i of t.splice(n,1))i()}},dispose(){for(let r of t.splice(0))r()}};return e}function ny(){let[t]=D.useState(Wf);return D.useEffect(()=>()=>t.dispose(),[t]),t}let qn=(t,e)=>{ps.isServer?D.useEffect(t,e):D.useLayoutEffect(t,e)};function L1(t){let e=D.useRef(t);return qn(()=>{e.current=t},[t]),e}let yt=function(t){let e=L1(t);return j.useCallback((...r)=>e.current(...r),[e])};function F2(t){let e=t.width/2,r=t.height/2;return{top:t.clientY-r,right:t.clientX+e,bottom:t.clientY+r,left:t.clientX-e}}function V2(t,e){return!(!t||!e||t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function B2({disabled:t=!1}={}){let e=D.useRef(null),[r,n]=D.useState(!1),i=ny(),o=yt(()=>{e.current=null,n(!1),i.dispose()}),a=yt(s=>{if(i.dispose(),e.current===null){e.current=s.currentTarget,n(!0);{let c=M1(s.currentTarget);i.addEventListener(c,"pointerup",o,!1),i.addEventListener(c,"pointermove",u=>{if(e.current){let l=F2(u);n(V2(l,e.current.getBoundingClientRect()))}},!1),i.addEventListener(c,"pointercancel",o,!1)}}});return{pressed:r,pressProps:t?{}:{onPointerDown:a,onPointerUp:o,onClick:o}}}function Tp(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function Yi(t,e,...r){if(t in e){let i=e[t];return typeof i=="function"?i(...r):i}let n=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Yi),n}var fl=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(fl||{}),Dn=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Dn||{});function Rc(){let t=q2();return D.useCallback(e=>U2({mergeRefs:t,...e}),[t])}function U2({ourProps:t,theirProps:e,slot:r,defaultTag:n,features:i,visible:o=!0,name:a,mergeRefs:s}){s=s??W2;let c=F1(e,t);if(o)return mu(c,r,n,a,s);let u=i??0;if(u&2){let{static:l=!1,...f}=c;if(l)return mu(f,r,n,a,s)}if(u&1){let{unmount:l=!0,...f}=c;return Yi(l?0:1,{0(){return null},1(){return mu({...f,hidden:!0,style:{display:"none"}},r,n,a,s)}})}return mu(c,r,n,a,s)}function mu(t,e={},r,n,i){let{as:o=r,children:a,refName:s="ref",...c}=vd(t,["unmount","static"]),u=t.ref!==void 0?{[s]:t.ref}:{},l=typeof a=="function"?a(e):a;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(e)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let f={};if(e){let d=!1,p=[];for(let[m,y]of Object.entries(e))typeof y=="boolean"&&(d=!0),y===!0&&p.push(m.replace(/([A-Z])/g,g=>`-${g.toLowerCase()}`));if(d){f["data-headlessui-state"]=p.join(" ");for(let m of p)f[`data-${m}`]=""}}if(o===D.Fragment&&(Object.keys(pi(c)).length>0||Object.keys(pi(f)).length>0))if(!D.isValidElement(l)||Array.isArray(l)&&l.length>1){if(Object.keys(pi(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(pi(c)).concat(Object.keys(pi(f))).map(d=>`  - ${d}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(d=>`  - ${d}`).join(`
`)].join(`
`))}else{let d=l.props,p=d==null?void 0:d.className,m=typeof p=="function"?(...A)=>Tp(p(...A),c.className):Tp(p,c.className),y=m?{className:m}:{},g=F1(l.props,pi(vd(c,["ref"])));for(let A in f)A in g&&delete f[A];return D.cloneElement(l,Object.assign({},g,f,u,{ref:i(z2(l),u.ref)},y))}return D.createElement(o,Object.assign({},vd(c,["ref"]),o!==D.Fragment&&u,o!==D.Fragment&&f),l)}function q2(){let t=D.useRef([]),e=D.useCallback(r=>{for(let n of t.current)n!=null&&(typeof n=="function"?n(r):n.current=r)},[]);return(...r)=>{if(!r.every(n=>n==null))return t.current=r,e}}function W2(...t){return t.every(e=>e==null)?void 0:e=>{for(let r of t)r!=null&&(typeof r=="function"?r(e):r.current=e)}}function F1(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let n of t)for(let i in n)i.startsWith("on")&&typeof n[i]=="function"?(r[i]!=null||(r[i]=[]),r[i].push(n[i])):e[i]=n[i];if(e.disabled||e["aria-disabled"])for(let n in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(r[n]=[i=>{var o;return(o=i==null?void 0:i.preventDefault)==null?void 0:o.call(i)}]);for(let n in r)Object.assign(e,{[n](i,...o){let a=r[n];for(let s of a){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;s(i,...o)}}});return e}function L0(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let n of t)for(let i in n)i.startsWith("on")&&typeof n[i]=="function"?(r[i]!=null||(r[i]=[]),r[i].push(n[i])):e[i]=n[i];for(let n in r)Object.assign(e,{[n](...i){let o=r[n];for(let a of o)a==null||a(...i)}});return e}function pa(t){var e;return Object.assign(D.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function pi(t){let e=Object.assign({},t);for(let r in e)e[r]===void 0&&delete e[r];return e}function vd(t,e=[]){let r=Object.assign({},t);for(let n of e)n in r&&delete r[n];return r}function z2(t){return j.version.split(".")[0]>="19"?t.props.ref:t.ref}function H2(t){let e=t.parentElement,r=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(r=e),e=e.parentElement;let n=(e==null?void 0:e.getAttribute("disabled"))==="";return n&&K2(r)?!1:n}function K2(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}let V1=Symbol();function G2(t,e=!0){return Object.assign(t,{[V1]:e})}function kc(...t){let e=D.useRef(t);D.useEffect(()=>{e.current=t},[t]);let r=yt(n=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(n):i.current=n)});return t.every(n=>n==null||(n==null?void 0:n[V1]))?void 0:r}var ho=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(ho||{});let Y2=D.createContext(()=>{});function X2({value:t,children:e}){return j.createElement(Y2.Provider,{value:t},e)}function Q2(t,e){return D.useMemo(()=>{var r;if(t.type)return t.type;let n=(r=t.as)!=null?r:"button";if(typeof n=="string"&&n.toLowerCase()==="button"||(e==null?void 0:e.tagName)==="BUTTON"&&!e.hasAttribute("type"))return"button"},[t.type,t.as,e])}function J2(t=0){let[e,r]=D.useState(t),n=D.useCallback(c=>r(c),[e]),i=D.useCallback(c=>r(u=>u|c),[e]),o=D.useCallback(c=>(e&c)===c,[e]),a=D.useCallback(c=>r(u=>u&~c),[r]),s=D.useCallback(c=>r(u=>u^c),[r]);return{flags:e,setFlag:n,addFlag:i,hasFlag:o,removeFlag:a,toggleFlag:s}}var Z2={},F0,V0;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((F0=process==null?void 0:Z2)==null?void 0:F0.NODE_ENV)==="test"&&typeof((V0=Element==null?void 0:Element.prototype)==null?void 0:V0.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var eL=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(eL||{});function B1(t){let e={};for(let r in t)t[r]===!0&&(e[`data-${r}`]="");return e}function U1(t,e,r,n){let[i,o]=D.useState(r),{hasFlag:a,addFlag:s,removeFlag:c}=J2(t&&i?3:0),u=D.useRef(!1),l=D.useRef(!1),f=ny();return qn(()=>{var d;if(t){if(r&&o(!0),!e){r&&s(3);return}return(d=n==null?void 0:n.start)==null||d.call(n,r),tL(e,{inFlight:u,prepare(){l.current?l.current=!1:l.current=u.current,u.current=!0,!l.current&&(r?(s(3),c(4)):(s(4),c(2)))},run(){l.current?r?(c(3),s(4)):(c(4),s(3)):r?c(1):s(1)},done(){var p;l.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(u.current=!1,c(7),r||o(!1),(p=n==null?void 0:n.end)==null||p.call(n,r))}})}},[t,r,e,f]),t?[i,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function tL(t,{prepare:e,run:r,done:n,inFlight:i}){let o=Wf();return nL(t,{prepare:e,inFlight:i}),o.nextFrame(()=>{r(),o.requestAnimationFrame(()=>{o.add(rL(t,n))})}),o.dispose}function rL(t,e){var r,n;let i=Wf();if(!t)return i.dispose;let o=!1;i.add(()=>{o=!0});let a=(n=(r=t.getAnimations)==null?void 0:r.call(t).filter(s=>s instanceof CSSTransition))!=null?n:[];return a.length===0?(e(),i.dispose):(Promise.allSettled(a.map(s=>s.finished)).then(()=>{o||e()}),i.dispose)}function nL(t,{inFlight:e,prepare:r}){if(e!=null&&e.current){r();return}let n=t.style.transition;t.style.transition="none",r(),t.offsetHeight,t.style.transition=n}let zf=D.createContext(null);zf.displayName="OpenClosedContext";var pr=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(pr||{});function iy(){return D.useContext(zf)}function q1({value:t,children:e}){return j.createElement(zf.Provider,{value:t},e)}function iL({children:t}){return j.createElement(zf.Provider,{value:null},t)}function oL(){let t=typeof document>"u";return"useSyncExternalStore"in fb?(e=>e.useSyncExternalStore)(fb)(()=>()=>{},()=>!1,()=>!t):!1}function W1(){let t=oL(),[e,r]=D.useState(ps.isHandoffComplete);return e&&ps.isHandoffComplete===!1&&r(!1),D.useEffect(()=>{e!==!0&&r(!0)},[e]),D.useEffect(()=>ps.handoff(),[]),t?!1:e}function aL(){let t=D.useRef(!1);return qn(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function z1(t){var e;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||((e=t.as)!=null?e:K1)!==D.Fragment||j.Children.count(t.children)===1}let Hf=D.createContext(null);Hf.displayName="TransitionContext";var sL=(t=>(t.Visible="visible",t.Hidden="hidden",t))(sL||{});function cL(){let t=D.useContext(Hf);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function uL(){let t=D.useContext(Kf);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let Kf=D.createContext(null);Kf.displayName="NestingContext";function Gf(t){return"children"in t?Gf(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function H1(t,e){let r=L1(t),n=D.useRef([]),i=aL(),o=ny(),a=yt((p,m=Dn.Hidden)=>{let y=n.current.findIndex(({el:g})=>g===p);y!==-1&&(Yi(m,{[Dn.Unmount](){n.current.splice(y,1)},[Dn.Hidden](){n.current[y].state="hidden"}}),o.microTask(()=>{var g;!Gf(n)&&i.current&&((g=r.current)==null||g.call(r))}))}),s=yt(p=>{let m=n.current.find(({el:y})=>y===p);return m?m.state!=="visible"&&(m.state="visible"):n.current.push({el:p,state:"visible"}),()=>a(p,Dn.Unmount)}),c=D.useRef([]),u=D.useRef(Promise.resolve()),l=D.useRef({enter:[],leave:[]}),f=yt((p,m,y)=>{c.current.splice(0),e&&(e.chains.current[m]=e.chains.current[m].filter(([g])=>g!==p)),e==null||e.chains.current[m].push([p,new Promise(g=>{c.current.push(g)})]),e==null||e.chains.current[m].push([p,new Promise(g=>{Promise.all(l.current[m].map(([A,T])=>T)).then(()=>g())})]),m==="enter"?u.current=u.current.then(()=>e==null?void 0:e.wait.current).then(()=>y(m)):y(m)}),d=yt((p,m,y)=>{Promise.all(l.current[m].splice(0).map(([g,A])=>A)).then(()=>{var g;(g=c.current.shift())==null||g()}).then(()=>y(m))});return D.useMemo(()=>({children:n,register:s,unregister:a,onStart:f,onStop:d,wait:u,chains:l}),[s,a,n,f,d,l,u])}let K1=D.Fragment,G1=fl.RenderStrategy;function lL(t,e){var r,n;let{transition:i=!0,beforeEnter:o,afterEnter:a,beforeLeave:s,afterLeave:c,enter:u,enterFrom:l,enterTo:f,entered:d,leave:p,leaveFrom:m,leaveTo:y,...g}=t,[A,T]=D.useState(null),P=D.useRef(null),C=z1(t),x=kc(...C?[P,e,T]:e===null?[]:[e]),I=(r=g.unmount)==null||r?Dn.Unmount:Dn.Hidden,{show:b,appear:w,initial:S}=cL(),[k,O]=D.useState(b?"visible":"hidden"),N=uL(),{register:R,unregister:V}=N;qn(()=>R(P),[R,P]),qn(()=>{if(I===Dn.Hidden&&P.current){if(b&&k!=="visible"){O("visible");return}return Yi(k,{hidden:()=>V(P),visible:()=>R(P)})}},[k,P,R,V,b,I]);let F=W1();qn(()=>{if(C&&F&&k==="visible"&&P.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[P,k,F,C]);let U=S&&!w,W=w&&b&&S,K=D.useRef(!1),Y=H1(()=>{K.current||(O("hidden"),V(P))},N),ne=yt(_t=>{K.current=!0;let Ye=_t?"enter":"leave";Y.onStart(P,Ye,Z=>{Z==="enter"?o==null||o():Z==="leave"&&(s==null||s())})}),oe=yt(_t=>{let Ye=_t?"enter":"leave";K.current=!1,Y.onStop(P,Ye,Z=>{Z==="enter"?a==null||a():Z==="leave"&&(c==null||c())}),Ye==="leave"&&!Gf(Y)&&(O("hidden"),V(P))});D.useEffect(()=>{C&&i||(ne(b),oe(b))},[b,C,i]);let J=!(!i||!C||!F||U),[,Q]=U1(J,A,b,{start:ne,end:oe}),Pe=pi({ref:x,className:((n=Tp(g.className,W&&u,W&&l,Q.enter&&u,Q.enter&&Q.closed&&l,Q.enter&&!Q.closed&&f,Q.leave&&p,Q.leave&&!Q.closed&&m,Q.leave&&Q.closed&&y,!Q.transition&&b&&d))==null?void 0:n.trim())||void 0,...B1(Q)}),Ae=0;k==="visible"&&(Ae|=pr.Open),k==="hidden"&&(Ae|=pr.Closed),Q.enter&&(Ae|=pr.Opening),Q.leave&&(Ae|=pr.Closing);let ht=Rc();return j.createElement(Kf.Provider,{value:Y},j.createElement(q1,{value:Ae},ht({ourProps:Pe,theirProps:g,defaultTag:K1,features:G1,visible:k==="visible",name:"Transition.Child"})))}function fL(t,e){let{show:r,appear:n=!1,unmount:i=!0,...o}=t,a=D.useRef(null),s=z1(t),c=kc(...s?[a,e]:e===null?[]:[e]);W1();let u=iy();if(r===void 0&&u!==null&&(r=(u&pr.Open)===pr.Open),r===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[l,f]=D.useState(r?"visible":"hidden"),d=H1(()=>{r||f("hidden")}),[p,m]=D.useState(!0),y=D.useRef([r]);qn(()=>{p!==!1&&y.current[y.current.length-1]!==r&&(y.current.push(r),m(!1))},[y,r]);let g=D.useMemo(()=>({show:r,appear:n,initial:p}),[r,n,p]);qn(()=>{r?f("visible"):!Gf(d)&&a.current!==null&&f("hidden")},[r,d]);let A={unmount:i},T=yt(()=>{var x;p&&m(!1),(x=t.beforeEnter)==null||x.call(t)}),P=yt(()=>{var x;p&&m(!1),(x=t.beforeLeave)==null||x.call(t)}),C=Rc();return j.createElement(Kf.Provider,{value:d},j.createElement(Hf.Provider,{value:g},C({ourProps:{...A,as:D.Fragment,children:j.createElement(Y1,{ref:c,...A,...o,beforeEnter:T,beforeLeave:P})},theirProps:{},defaultTag:D.Fragment,features:G1,visible:l==="visible",name:"Transition"})))}function hL(t,e){let r=D.useContext(Hf)!==null,n=iy()!==null;return j.createElement(j.Fragment,null,!r&&n?j.createElement(Sp,{ref:e,...t}):j.createElement(Y1,{ref:e,...t}))}let Sp=pa(fL),Y1=pa(lL),dL=pa(hL),pL=Object.assign(Sp,{Child:dL,Root:Sp});var B0;let mL=(B0=j.startTransition)!=null?B0:function(t){t()};var gL=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(gL||{}),yL=(t=>(t[t.ToggleDisclosure=0]="ToggleDisclosure",t[t.CloseDisclosure=1]="CloseDisclosure",t[t.SetButtonId=2]="SetButtonId",t[t.SetPanelId=3]="SetPanelId",t[t.SetButtonElement=4]="SetButtonElement",t[t.SetPanelElement=5]="SetPanelElement",t))(yL||{});let vL={0:t=>({...t,disclosureState:Yi(t.disclosureState,{0:1,1:0})}),1:t=>t.disclosureState===1?t:{...t,disclosureState:1},2(t,e){return t.buttonId===e.buttonId?t:{...t,buttonId:e.buttonId}},3(t,e){return t.panelId===e.panelId?t:{...t,panelId:e.panelId}},4(t,e){return t.buttonElement===e.element?t:{...t,buttonElement:e.element}},5(t,e){return t.panelElement===e.element?t:{...t,panelElement:e.element}}},oy=D.createContext(null);oy.displayName="DisclosureContext";function ay(t){let e=D.useContext(oy);if(e===null){let r=new Error(`<${t} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ay),r}return e}let sy=D.createContext(null);sy.displayName="DisclosureAPIContext";function X1(t){let e=D.useContext(sy);if(e===null){let r=new Error(`<${t} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,X1),r}return e}let cy=D.createContext(null);cy.displayName="DisclosurePanelContext";function bL(){return D.useContext(cy)}function _L(t,e){return Yi(e.type,vL,t,e)}let wL=D.Fragment;function xL(t,e){let{defaultOpen:r=!1,...n}=t,i=D.useRef(null),o=kc(e,G2(y=>{i.current=y},t.as===void 0||t.as===D.Fragment)),a=D.useReducer(_L,{disclosureState:r?0:1,buttonElement:null,panelElement:null,buttonId:null,panelId:null}),[{disclosureState:s,buttonId:c},u]=a,l=yt(y=>{u({type:1});let g=M1(i);if(!g||!c)return;let A=y?y instanceof HTMLElement?y:y.current instanceof HTMLElement?y.current:g.getElementById(c):g.getElementById(c);A==null||A.focus()}),f=D.useMemo(()=>({close:l}),[l]),d=D.useMemo(()=>({open:s===0,close:l}),[s,l]),p={ref:o},m=Rc();return j.createElement(oy.Provider,{value:a},j.createElement(sy.Provider,{value:f},j.createElement(X2,{value:l},j.createElement(q1,{value:Yi(s,{0:pr.Open,1:pr.Closed})},m({ourProps:p,theirProps:n,slot:d,defaultTag:wL,name:"Disclosure"})))))}let AL="button";function EL(t,e){let r=D.useId(),{id:n=`headlessui-disclosure-button-${r}`,disabled:i=!1,autoFocus:o=!1,...a}=t,[s,c]=ay("Disclosure.Button"),u=bL(),l=u===null?!1:u===s.panelId,f=D.useRef(null),d=kc(f,e,yt(S=>{if(!l)return c({type:4,element:S})}));D.useEffect(()=>{if(!l)return c({type:2,buttonId:n}),()=>{c({type:2,buttonId:null})}},[n,c,l]);let p=yt(S=>{var k;if(l){if(s.disclosureState===1)return;switch(S.key){case ho.Space:case ho.Enter:S.preventDefault(),S.stopPropagation(),c({type:0}),(k=s.buttonElement)==null||k.focus();break}}else switch(S.key){case ho.Space:case ho.Enter:S.preventDefault(),S.stopPropagation(),c({type:0});break}}),m=yt(S=>{switch(S.key){case ho.Space:S.preventDefault();break}}),y=yt(S=>{var k;H2(S.currentTarget)||i||(l?(c({type:0}),(k=s.buttonElement)==null||k.focus()):c({type:0}))}),{isFocusVisible:g,focusProps:A}=$2({autoFocus:o}),{isHovered:T,hoverProps:P}=N2({isDisabled:i}),{pressed:C,pressProps:x}=B2({disabled:i}),I=D.useMemo(()=>({open:s.disclosureState===0,hover:T,active:C,disabled:i,focus:g,autofocus:o}),[s,T,C,g,i,o]),b=Q2(t,s.buttonElement),w=L0(l?{ref:d,type:b,disabled:i||void 0,autoFocus:o,onKeyDown:p,onClick:y}:{ref:d,id:n,type:b,"aria-expanded":s.disclosureState===0,"aria-controls":s.panelElement?s.panelId:void 0,disabled:i||void 0,autoFocus:o,onKeyDown:p,onKeyUp:m,onClick:y},A,P,x);return Rc()({ourProps:w,theirProps:a,slot:I,defaultTag:AL,name:"Disclosure.Button"})}let TL="div",SL=fl.RenderStrategy|fl.Static;function PL(t,e){let r=D.useId(),{id:n=`headlessui-disclosure-panel-${r}`,transition:i=!1,...o}=t,[a,s]=ay("Disclosure.Panel"),{close:c}=X1("Disclosure.Panel"),[u,l]=D.useState(null),f=kc(e,yt(T=>{mL(()=>s({type:5,element:T}))}),l);D.useEffect(()=>(s({type:3,panelId:n}),()=>{s({type:3,panelId:null})}),[n,s]);let d=iy(),[p,m]=U1(i,u,d!==null?(d&pr.Open)===pr.Open:a.disclosureState===0),y=D.useMemo(()=>({open:a.disclosureState===0,close:c}),[a.disclosureState,c]),g={ref:f,id:n,...B1(m)},A=Rc();return j.createElement(iL,null,j.createElement(cy.Provider,{value:a.panelId},A({ourProps:g,theirProps:o,slot:y,defaultTag:TL,features:SL,visible:p,name:"Disclosure.Panel"})))}let IL=pa(xL),OL=pa(EL),CL=pa(PL),bd=Object.assign(IL,{Button:OL,Panel:CL});function Li({value:t,onChange:e,options:r,label:n,disabled:i=!1}){const[o,a]=D.useState(!1),s=D.useRef(null);return D.useEffect(()=>{const c=u=>{s.current&&!s.current.contains(u.target)&&a(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]),E.jsxs("div",{className:"relative",ref:s,children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),E.jsxs("button",{type:"button",onClick:()=>!i&&a(!o),className:`
          w-full px-3 py-2 text-left border rounded-md shadow-sm
          focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500
          ${i?"bg-gray-50 text-gray-500 cursor-not-allowed":"bg-white text-gray-900 hover:bg-gray-50"}
          flex items-center justify-between
        `,children:[E.jsx("span",{children:t}),E.jsx(qf,{className:`h-4 w-4 text-gray-400 transition-transform duration-200
          ${o?"transform rotate-180":""}`})]}),o&&E.jsx("div",{className:"absolute z-10 mt-1 w-full rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 animate-slide-down",children:E.jsx("div",{className:"max-h-60 overflow-auto py-1 scrollbar-thin",children:r.map(c=>E.jsxs("button",{type:"button",onClick:()=>{e(c),a(!1)},className:`
                  w-full text-left px-4 py-2 text-sm flex items-center justify-between
                  ${t===c?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-50"}
                `,children:[E.jsx("span",{children:c}),t===c&&E.jsx(S1,{className:"h-4 w-4 text-indigo-600"})]},c))})})]})}function RL({value:t,onChange:e,placeholder:r="",className:n=""}){const{searchClients:i}=A1(),[o,a]=D.useState([]),[s,c]=D.useState(!1),u=D.useRef(null);D.useEffect(()=>{function d(p){u.current&&!u.current.contains(p.target)&&c(!1)}return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[]);const l=d=>{const p=d.target.value;if(e(p),p.trim()){const m=i(p);a(m),c(!0)}else a([]),c(!1)},f=d=>{e(d),a([]),c(!1)};return E.jsxs("div",{ref:u,className:"relative w-full",children:[E.jsx("input",{type:"text",value:t,onChange:l,placeholder:r,className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${n}`}),s&&o.length>0&&E.jsx("ul",{className:"absolute z-10 w-full mt-1 bg-white border rounded-md shadow-lg max-h-60 overflow-auto",children:o.map((d,p)=>E.jsx("li",{onClick:()=>f(d),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",children:d},p))})]})}const U0=t=>{const r=["SKALLARS","MKMs","Contax"].filter(n=>n!==t);return{clientName:"",amount:"",commissionPercentage:"10",date:new Date,invoicedByFirm:t,referredByFirm:r[0]}};function kL(){const{user:t}=yn(),{addInvoice:e}=da(),{addClient:r,searchClients:n}=A1(),[i,o]=D.useState(null),[a,s]=D.useState(!1),[c,u]=D.useState(()=>U0((t==null?void 0:t.firm)||"SKALLARS")),l=["SKALLARS","MKMs","Contax"],f=l.filter(m=>m!==(t==null?void 0:t.firm)),d=m=>{if(m.preventDefault(),o(null),!c.clientName.trim()){o("Client name is required");return}if(isNaN(Number(c.amount))||Number(c.amount)<=0){o("Please enter a valid amount");return}try{const y={id:Date.now().toString(),clientName:c.clientName.trim(),amount:Number(c.amount),commissionPercentage:Number(c.commissionPercentage),date:c.date.toISOString(),invoicedByFirm:c.invoicedByFirm,referredByFirm:c.referredByFirm,isPaid:!1};e(y),r(c.clientName.trim()),s(!0),u(U0((t==null?void 0:t.firm)||"SKALLARS")),setTimeout(()=>s(!1),3e3)}catch{o("Failed to create invoice. Please try again.")}},p=m=>{const{name:y,value:g}=m.target;u(A=>({...A,[y]:g})),o(null)};return t?E.jsxs("form",{onSubmit:d,className:"space-y-4",children:[i&&E.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md flex items-center text-red-700",children:[E.jsx(Uf,{className:"h-5 w-5 mr-2"}),i]}),a&&E.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md text-green-700",children:"Invoice created successfully!"}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"clientName",className:"block text-sm font-medium text-gray-700",children:"Client Name"}),E.jsx(RL,{value:c.clientName,onChange:m=>u({...c,clientName:m}),placeholder:"Enter client name",className:"mt-1"})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount (€)"}),E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:E.jsx(P1,{className:"h-5 w-5 text-gray-400"})}),E.jsx("input",{type:"number",name:"amount",value:c.amount,onChange:p,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"0.00",step:"0.01",min:"0"})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Commission % (Default: 10%)"}),E.jsx("input",{type:"number",name:"commissionPercentage",value:c.commissionPercentage,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"10",step:"0.1",min:"0",max:"100"})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice Date"}),E.jsx(YA,{selected:c.date,onChange:m=>u(y=>({...y,date:m})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",dateFormat:"dd/MM/yyyy"})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsx(Li,{label:"Invoiced By",value:t.firm,onChange:()=>{},options:l,disabled:!0}),E.jsx(Li,{label:"Referred By",value:c.referredByFirm,onChange:m=>u(y=>({...y,referredByFirm:m})),options:f})]}),E.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",children:"Create Invoice"})]})]}):null}const NL={paid:{icon:ks,text:"Paid",bgColor:"bg-green-50",textColor:"text-green-700",borderColor:"border-green-200",iconColor:"text-green-500"},pending:{icon:ty,text:"Pending",bgColor:"bg-amber-50",textColor:"text-amber-700",borderColor:"border-amber-200",iconColor:"text-amber-500"},overdue:{icon:Uf,text:"Overdue",bgColor:"bg-red-50",textColor:"text-red-700",borderColor:"border-red-200",iconColor:"text-red-500"}};function $L({status:t,className:e=""}){const r=NL[t],n=r.icon;return E.jsxs("div",{className:`
        inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
        ${r.bgColor} ${r.textColor} ${r.borderColor} border
        ${e}
      `,children:[E.jsx(n,{className:`w-3.5 h-3.5 mr-1 ${r.iconColor}`}),r.text]})}function q0({text:t,children:e,position:r="top"}){const[n,i]=D.useState(!1),[o,a]=D.useState({top:0,left:0}),s=D.useRef(null),c=D.useRef(null);return D.useEffect(()=>{if(n&&s.current&&c.current){const u=s.current.getBoundingClientRect(),l=c.current.getBoundingClientRect();let f=0,d=0;switch(r){case"top":f=u.top-l.height-8,d=u.left+(u.width-l.width)/2;break;case"bottom":f=u.bottom+8,d=u.left+(u.width-l.width)/2;break;case"left":f=u.top+(u.height-l.height)/2,d=u.left-l.width-8;break;case"right":f=u.top+(u.height-l.height)/2,d=u.right+8;break}const p=8,m=window.innerWidth,y=window.innerHeight;d<p?d=p:d+l.width>m-p&&(d=m-l.width-p),f<p?f=p:f+l.height>y-p&&(f=y-l.height-p),a({top:f,left:d})}},[n,r]),E.jsxs("div",{ref:s,className:"relative inline-block",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[e,n&&E.jsxs("div",{ref:c,className:"fixed z-50 px-3 py-2 text-sm font-medium text-white bg-gray-900 rounded-md shadow-lg whitespace-nowrap pointer-events-none",style:{top:`${o.top}px`,left:`${o.left}px`},children:[t,E.jsx("div",{className:"absolute w-2 h-2 bg-gray-900 transform rotate-45",style:{...r==="top"&&{bottom:"-4px",left:"50%",transform:"translateX(-50%)"},...r==="bottom"&&{top:"-4px",left:"50%",transform:"translateX(-50%)"},...r==="left"&&{right:"-4px",top:"50%",transform:"translateY(-50%)"},...r==="right"&&{left:"-4px",top:"50%",transform:"translateY(-50%)"}}})]})]})}function jL({totalInvoices:t,paidCount:e,pendingCount:r,overdueCount:n,totalAmount:i,pendingAmount:o,overdueAmount:a}){const s=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:2}).format(c);return E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[E.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Invoices"}),E.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:t})]}),E.jsx("div",{className:"bg-blue-50 p-2 rounded-full",children:E.jsx(ks,{className:"h-6 w-6 text-blue-500"})})]}),E.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Total Value: ",s(i)]})]}),E.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Paid"}),E.jsx("p",{className:"text-2xl font-semibold text-green-600",children:e})]}),E.jsx("div",{className:"bg-green-50 p-2 rounded-full",children:E.jsx(ks,{className:"h-6 w-6 text-green-500"})})]}),E.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[(e/t*100).toFixed(1),"% of total"]})]}),E.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pending"}),E.jsx("p",{className:"text-2xl font-semibold text-amber-600",children:r})]}),E.jsx("div",{className:"bg-amber-50 p-2 rounded-full",children:E.jsx(ty,{className:"h-6 w-6 text-amber-500"})})]}),E.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Value: ",s(o)]})]}),E.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Overdue"}),E.jsx("p",{className:"text-2xl font-semibold text-red-600",children:n})]}),E.jsx("div",{className:"bg-red-50 p-2 rounded-full",children:E.jsx(Uf,{className:"h-6 w-6 text-red-500"})})]}),E.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Value: ",s(a)]})]})]})}function DL({invoice:t,onClose:e,onSave:r,userFirm:n}){const[i,o]=D.useState({clientName:t.clientName,amount:t.amount,commissionPercentage:t.commissionPercentage,date:new Date(t.date),referredByFirm:t.referredByFirm}),s=["SKALLARS","MKMs","Contax"].filter(u=>u!==n),c=u=>{u.preventDefault(),r({...t,...i,date:i.date.toISOString()}),e()};return E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full mx-4 p-6",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("h2",{className:"text-lg font-medium",children:"Edit Invoice"}),E.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded-full",children:E.jsx(m2,{className:"h-5 w-5"})})]}),E.jsxs("form",{onSubmit:c,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Name"}),E.jsx("input",{type:"text",value:i.clientName,onChange:u=>o(l=>({...l,clientName:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount (€)"}),E.jsx("input",{type:"number",value:i.amount,onChange:u=>o(l=>({...l,amount:Number(u.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",step:"0.01"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Commission %"}),E.jsx("input",{type:"number",value:i.commissionPercentage,onChange:u=>o(l=>({...l,commissionPercentage:Number(u.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",step:"0.1"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),E.jsx(YA,{selected:i.date,onChange:u=>o(l=>({...l,date:u})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",dateFormat:"dd/MM/yyyy"})]}),E.jsx("div",{children:E.jsx(Li,{label:"Referred By",value:i.referredByFirm,onChange:u=>o(l=>({...l,referredByFirm:u})),options:s})}),E.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[E.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),E.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Save Changes"})]})]})]})})}const ML={SKALLARS:{bg:"bg-purple-50",border:"border-purple-200",text:"text-purple-600",hover:"hover:bg-purple-100"},MKMs:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-600",hover:"hover:bg-blue-100"},Contax:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-600",hover:"hover:bg-yellow-100"}};function LL({filters:t,onFilterChange:e}){return E.jsxs("div",{className:"flex flex-col md:flex-row gap-4 p-4 bg-white rounded-lg shadow",children:[E.jsx("div",{className:"flex-1",children:E.jsxs("div",{className:"relative",children:[E.jsx(f2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),E.jsx("input",{type:"text",placeholder:"Search by client or firm...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:t.search,onChange:r=>e({...t,search:r.target.value})})]})}),E.jsxs("div",{className:"flex gap-4",children:[E.jsx("div",{className:"w-40",children:E.jsx(Li,{value:t.status,onChange:r=>e({...t,status:r}),options:[{value:"all",label:"All Status"},{value:"paid",label:"Paid"},{value:"pending",label:"Pending"},{value:"overdue",label:"Overdue"}],icon:E.jsx(ey,{className:"w-4 h-4"})})}),E.jsx("div",{className:"w-40",children:E.jsx(Li,{value:t.firm,onChange:r=>e({...t,firm:r}),options:[{value:"all",label:"All Firms"},{value:"SKALLARS",label:"SKALLARS"},{value:"MKMs",label:"MKMs"},{value:"Contax",label:"Contax"}],icon:E.jsx(T1,{className:"w-4 h-4"})})})]})]})}function FL({invoice:t,isExpanded:e,onToggleExpand:r,onTogglePaid:n,onDelete:i,onEdit:o,userFirm:a}){const s=ML[t.invoicedByFirm],c=!t.isPaid&&new Date(t.date).getTime()<Date.now()-30*24*60*60*1e3;return E.jsx("div",{className:`bg-white rounded-lg shadow transition-all duration-200 ${e?"ring-2 ring-blue-500":""}`,children:E.jsxs("div",{className:"p-4",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx("div",{className:`px-3 py-1 rounded-full ${s.bg} ${s.border} ${s.text}`,children:t.invoicedByFirm}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold",children:t.clientName}),E.jsx("p",{className:"text-sm text-gray-500",children:new Date(t.date).toLocaleDateString()})]})]}),E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsxs("div",{className:"text-right",children:[E.jsxs("p",{className:"text-lg font-semibold flex items-center",children:[E.jsx(P1,{className:"w-4 h-4 mr-1"}),W0(t.amount)]}),E.jsx($L,{status:t.isPaid?"paid":c?"overdue":"pending"})]}),E.jsxs("div",{className:"flex items-center space-x-2",children:[a===t.invoicedByFirm&&E.jsxs(E.Fragment,{children:[E.jsx(q0,{content:"Edit Invoice",children:E.jsx("button",{onClick:o,className:"p-2 text-gray-500 hover:text-blue-500 hover:bg-gray-100 rounded-full transition-colors",children:E.jsx(l2,{className:"w-4 h-4"})})}),E.jsx(q0,{content:"Delete Invoice",children:E.jsx("button",{onClick:i,className:"p-2 text-gray-500 hover:text-red-500 hover:bg-gray-100 rounded-full transition-colors",children:E.jsx(I1,{className:"w-4 h-4"})})})]}),E.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:text-blue-500 hover:bg-gray-100 rounded-full transition-colors",children:e?E.jsx(o2,{className:"w-4 h-4"}):E.jsx(qf,{className:"w-4 h-4"})})]})]})]}),e&&E.jsxs("div",{className:"mt-4 pt-4 border-t",children:[E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-sm text-gray-500",children:"Commission"}),E.jsxs("p",{className:"font-medium",children:[t.commissionPercentage,"% (€",W0(t.amount*t.commissionPercentage/100),")"]})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-sm text-gray-500",children:"Referred By"}),E.jsx("p",{className:"font-medium",children:t.referredByFirm})]})]}),a===t.invoicedByFirm&&E.jsx("button",{onClick:n,className:`mt-4 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t.isPaid?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-green-50 text-green-700 hover:bg-green-100"}`,children:t.isPaid?"Mark as Unpaid":"Mark as Paid"})]})]})})}function VL(){const{invoices:t,isLoading:e,removeInvoice:r,togglePaid:n}=da(),{userFirm:i}=yn(),{currentYear:o,currentQuarter:a}=Ic(),[s,c]=D.useState(null),[u,l]=D.useState([]),[f,d]=D.useState({search:"",status:"all",firm:"all"}),p=D.useCallback(g=>{if(!(g!=null&&g.date)||!(g!=null&&g.clientName)||!(g!=null&&g.invoicedByFirm))return!1;const A=new Date(g.date);if(isNaN(A.getTime())||!sl(A,o,a))return!1;if(f.search){const T=f.search.toLowerCase(),P=g.clientName.toLowerCase(),C=g.invoicedByFirm.toLowerCase();if(!P.includes(T)&&!C.includes(T))return!1}if(f.status!=="all"){const T=!g.isPaid&&new Date(g.date).getTime()<Date.now()-2592e6;if(f.status==="paid"&&!g.isPaid||f.status==="pending"&&(g.isPaid||T)||f.status==="overdue"&&(!T||g.isPaid))return!1}return!(f.firm!=="all"&&g.invoicedByFirm!==f.firm)},[f,o,a]),m=D.useMemo(()=>{if(!Array.isArray(t)||e||!t)return[];try{return[...t.filter(T=>T?typeof T=="object"&&typeof T.id=="string"&&typeof T.date=="string"&&typeof T.clientName=="string"&&typeof T.invoicedByFirm=="string"&&typeof T.referredByFirm=="string"&&typeof T.amount=="number"&&typeof T.commissionPercentage=="number"&&typeof T.isPaid=="boolean"&&!isNaN(new Date(T.date).getTime()):!1).filter(p)].sort((T,P)=>{if(!T||!P||!T.date||!P.date)return 0;try{const C=new Date(T.date),x=new Date(P.date);return isNaN(C.getTime())||isNaN(x.getTime())?0:x.getTime()-C.getTime()}catch(C){return console.error("Error sorting invoices:",C),0}})}catch(g){return console.error("Error processing invoices:",g),[]}},[t,e,p]);if(e)return E.jsx("div",{className:"flex items-center justify-center p-8",children:E.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})});const y={totalInvoices:m.length,paidCount:0,pendingCount:0,overdueCount:0,totalAmount:0,overdueAmount:0};return m.forEach(g=>{const A=g.amount,T=!g.isPaid&&new Date(g.date).getTime()<Date.now()-30*24*60*60*1e3;g.isPaid?y.paidCount++:T?(y.overdueCount++,y.overdueAmount+=A):y.pendingCount++,y.totalAmount+=A}),E.jsxs("div",{className:"space-y-4",children:[E.jsx(LL,{filters:f,onFilterChange:d}),E.jsx(jL,{...y}),E.jsx("div",{className:"space-y-4",children:m.map(g=>E.jsx(FL,{invoice:g,isExpanded:u.includes(g.id),onToggleExpand:()=>l(A=>A.includes(g.id)?A.filter(T=>T!==g.id):[...A,g.id]),onTogglePaid:()=>n(g.id),onDelete:()=>r(g.id),onEdit:()=>c(g),userFirm:i},g.id))}),s&&E.jsx(DL,{invoice:s,onClose:()=>c(null)})]})}function W0(t){return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}function BL(){const{currentYear:t,currentQuarter:e,availableYears:r,selectYearAndQuarter:n}=Ic(),[i,o]=D.useState(!1),a=[1,2,3,4],s=(y,g)=>{o(!0),n(y,g),setTimeout(()=>o(!1),300)},c=()=>{e===1?r.includes(t-1)&&s(t-1,4):s(t,e-1)},u=()=>{e===4?r.includes(t+1)&&s(t+1,1):s(t,e+1)},l=y=>{const g=new Date,A=g.getFullYear(),T=Math.floor(g.getMonth()/3)+1;return t===A&&y===T},f=y=>{const g=(y-1)*3,A=g+2,T=new Date(t,g,1),P=new Date(t,A+1,0);return{start:T.toLocaleDateString("en-US",{month:"short"}),end:P.toLocaleDateString("en-US",{month:"short"})}},d=()=>{const[y,g]=D.useState(!1),A=j.useRef(null);return j.useEffect(()=>{const T=P=>{A.current&&!A.current.contains(P.target)&&g(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]),E.jsxs("div",{className:"relative",ref:A,children:[E.jsxs("button",{onClick:()=>g(!y),className:"flex items-center space-x-2 px-2 py-1 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[E.jsx(n2,{className:"h-5 w-5 text-gray-400"}),E.jsx("span",{className:"text-lg font-semibold text-gray-900",children:t}),E.jsx(qf,{className:`h-4 w-4 text-gray-500 transition-transform duration-200 ${y?"transform rotate-180":""}`})]}),y&&E.jsx("div",{className:"absolute z-10 mt-1 w-48 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 animate-slide-down",children:E.jsx("div",{className:"max-h-60 overflow-auto py-1 scrollbar-thin scrollbar-thumb-gray-200 scrollbar-track-transparent",children:r.map(T=>{const P=new Date().getFullYear(),C=T<P,x=T>P,I=T===P,b=T===t;return E.jsxs("button",{onClick:()=>{s(T,e),g(!1)},className:`
                      w-full text-left px-4 py-2 text-sm
                      ${b?"bg-indigo-50 text-indigo-600":"text-gray-700"}
                      ${!b&&"hover:bg-gray-50"}
                      flex items-center justify-between
                    `,children:[E.jsx("span",{className:`
                      ${I?"font-semibold":""}
                      ${C?"text-gray-600":""}
                      ${x?"text-indigo-600":""}
                    `,children:T}),b&&E.jsx(S1,{className:"h-4 w-4 text-indigo-600"}),I&&!b&&E.jsx("span",{className:"text-xs text-indigo-600 font-medium",children:"Current"})]},T)})})})]})},p=Math.min(...r),m=Math.max(...r);return E.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[E.jsx("div",{className:"p-4 border-b border-gray-200",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx(d,{}),E.jsxs("button",{onClick:()=>{const y=new Date;s(y.getFullYear(),Math.floor(y.getMonth()/3)+1)},className:"flex items-center px-3 py-1.5 text-sm font-medium text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-md transition-colors",children:[E.jsx(h2,{className:"h-4 w-4 mr-1.5"}),"Current Quarter"]})]})}),E.jsxs("div",{className:"p-4",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("button",{onClick:c,disabled:t===p&&e===1,className:"p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:E.jsx(i2,{className:"h-5 w-5"})}),E.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[E.jsx(e2,{className:"h-4 w-4"}),E.jsx("span",{children:"Navigate between quarters"})]}),E.jsx("button",{onClick:u,disabled:t===m&&e===4,className:"p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:E.jsx(cl,{className:"h-5 w-5"})})]}),E.jsx("div",{className:"grid grid-cols-4 gap-3",children:a.map(y=>{const g=f(y),A=l(y),T=e===y;return E.jsxs("button",{onClick:()=>s(t,y),className:`
                  relative p-3 rounded-lg text-left transition-all duration-200
                  ${T?"bg-indigo-600 text-white shadow-md":"bg-gray-50 text-gray-700 hover:bg-gray-100"}
                  ${A&&!T?"ring-2 ring-indigo-500 ring-offset-2":""}
                `,children:[E.jsxs("div",{className:"font-semibold",children:["Q",y]}),E.jsxs("div",{className:`text-xs mt-1 ${T?"text-indigo-100":"text-gray-500"}`,children:[g.start," - ",g.end]}),A&&E.jsx("div",{className:`
                    absolute top-1 right-1 text-xs px-1.5 py-0.5 rounded-full
                    ${T?"bg-indigo-500 text-white":"bg-indigo-100 text-indigo-600"}
                  `,children:"Current"})]},y)})})]})]})}const UL={SKALLARS:{light:"bg-purple-50",border:"border-purple-200",text:"text-purple-600"},MKMs:{light:"bg-blue-50",border:"border-blue-200",text:"text-blue-600"},Contax:{light:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-600"}};function z0({firm:t,amount:e,direction:r,userFirm:n}){const i=UL[t];return E.jsxs("div",{className:`
        p-4 rounded-lg ${i.light} ${i.border}
        flex justify-between items-center
      `,children:[E.jsx("div",{className:"flex items-center space-x-3",children:r==="receivable"?E.jsxs(E.Fragment,{children:[E.jsx("span",{className:`font-medium ${i.text}`,children:t}),E.jsx(cl,{className:"h-4 w-4 text-gray-400"}),E.jsx("span",{className:"font-medium text-gray-600",children:"owes you"})]}):E.jsxs(E.Fragment,{children:[E.jsx("span",{className:"font-medium text-gray-600",children:"you owe"}),E.jsx(cl,{className:"h-4 w-4 text-gray-400"}),E.jsx("span",{className:`font-medium ${i.text}`,children:t})]})}),E.jsx("div",{className:"font-medium text-gray-900",children:Ns(e)})]})}function qL({unpaidQuarters:t,onQuarterClick:e}){return t.length===0?null:E.jsx("div",{className:"mb-4 p-4 bg-amber-50 border-l-4 border-amber-500 rounded-r-lg",children:E.jsxs("div",{className:"flex items-start",children:[E.jsx(E1,{className:"h-5 w-5 text-amber-500 mt-0.5 mr-3 flex-shrink-0"}),E.jsxs("div",{children:[E.jsx("h4",{className:"text-sm font-medium text-amber-800",children:"Unpaid Commissions from Previous Quarters"}),E.jsx("div",{className:"mt-2 space-y-2",children:t.map(r=>E.jsx("button",{onClick:()=>e(r.quarter,r.year),className:"w-full text-left",children:E.jsxs("div",{className:"text-sm text-amber-700 hover:text-amber-900",children:[E.jsxs("span",{className:"font-medium",children:[r.quarter," ",r.year]}),E.jsxs("div",{className:"ml-4 space-y-1",children:[r.receivable>0&&E.jsxs("div",{children:["To receive: ",Ns(r.receivable)]}),r.payable>0&&E.jsxs("div",{children:["To pay: ",Ns(r.payable)]})]})]})},`${r.quarter}-${r.year}`))})]})]})})}function WL(){const{invoices:t}=da(),{user:e}=yn(),{currentYear:r,currentQuarter:n,selectYearAndQuarter:i}=Ic(),{quarterlyData:o,unpaidQuarters:a}=D.useMemo(()=>{const c={toReceive:{total:0,byFirm:{}},toPay:{total:0,byFirm:{}}},u={};return t.forEach(l=>{if(l.referredByFirm===l.invoicedByFirm)return;const f=new Date(l.date),d=Math.floor(f.getMonth()/3)+1,p=f.getFullYear(),m=`Q${d}`,y=l.amount*l.commissionPercentage/100;if(sl(f,r,n)&&l.isPaid&&(l.referredByFirm===(e==null?void 0:e.firm)&&(c.toReceive.total+=y,c.toReceive.byFirm[l.invoicedByFirm]=(c.toReceive.byFirm[l.invoicedByFirm]||0)+y),l.invoicedByFirm===(e==null?void 0:e.firm)&&(c.toPay.total+=y,c.toPay.byFirm[l.referredByFirm]=(c.toPay.byFirm[l.referredByFirm]||0)+y)),!l.isPaid&&!sl(f,r,n)){const g=`${m}-${p}`;u[g]||(u[g]={quarter:m,year:p,amount:0,receivable:0,payable:0}),l.referredByFirm===(e==null?void 0:e.firm)&&(u[g].receivable+=y,u[g].amount+=y),l.invoicedByFirm===(e==null?void 0:e.firm)&&(u[g].payable+=y,u[g].amount+=y)}}),{quarterlyData:c,unpaidQuarters:Object.values(u).sort((l,f)=>f.year-l.year||f.quarter.localeCompare(l.quarter))}},[t,e,r,n]),s=(c,u)=>{const l=parseInt(c.replace("Q",""));i(u,l);const f=document.querySelector(".unpaid-invoices-section");f&&f.scrollIntoView({behavior:"smooth"})};return e?E.jsxs("div",{className:"space-y-6",children:[E.jsx(BL,{}),E.jsx(qL,{unpaidQuarters:a,onQuarterClick:s}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[E.jsx("div",{className:"text-sm font-medium text-green-700",children:"To Receive"}),E.jsx("div",{className:"mt-2 text-2xl font-semibold text-gray-900",children:Ns(o.toReceive.total)}),E.jsx("div",{className:"mt-1 text-sm text-green-600",children:"From paid invoices only"})]}),E.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[E.jsx("div",{className:"text-sm font-medium text-blue-700",children:"To Pay"}),E.jsx("div",{className:"mt-2 text-2xl font-semibold text-gray-900",children:Ns(o.toPay.total)}),E.jsx("div",{className:"mt-1 text-sm text-blue-600",children:"From paid invoices only"})]})]}),E.jsxs("div",{className:"space-y-3",children:[E.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Commission Breakdown (Paid Invoices)"}),Object.entries(o.toReceive.byFirm).map(([c,u])=>E.jsx(z0,{firm:c,amount:u,direction:"receivable",userFirm:e.firm},`receive-${c}`)),Object.entries(o.toPay.byFirm).map(([c,u])=>E.jsx(z0,{firm:c,amount:u,direction:"payable",userFirm:e.firm},`pay-${c}`)),Object.keys(o.toReceive.byFirm).length===0&&Object.keys(o.toPay.byFirm).length===0&&E.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 flex items-center text-gray-500",children:[E.jsx(Uf,{className:"h-5 w-5 mr-2"}),"No paid commission transactions for this quarter yet"]})]})]}):null}function Ns(t){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(t)}const _d={SKALLARS:{bg:"bg-purple-50",border:"border-purple-200",text:"text-purple-600",hover:"hover:bg-purple-100"},MKMs:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-600",hover:"hover:bg-blue-100"},Contax:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-600",hover:"hover:bg-yellow-100"}};function zL({filters:t,onFilterChange:e}){return E.jsx("div",{className:"flex items-center justify-between mb-4",children:E.jsxs("div",{className:"flex space-x-4",children:[E.jsx("div",{className:"w-48",children:E.jsx(Li,{label:"",value:t.firm==="all"?"All Firms":t.firm,onChange:r=>{e({...t,firm:r==="All Firms"?"all":r})},options:["All Firms","SKALLARS","MKMs","Contax"]})}),E.jsx("div",{className:"w-48",children:E.jsx(Li,{label:"",value:t.sortBy==="date"?"Sort by Date":t.sortBy==="amount"?"Sort by Amount":"Sort by Overdue Days",onChange:r=>{e({...t,sortBy:r==="Sort by Date"?"date":r==="Sort by Amount"?"amount":"overdue"})},options:["Sort by Date","Sort by Amount","Sort by Overdue Days"]})})]})})}function HL({invoice:t,onMarkAsPaid:e,userFirm:r,daysOverdue:n}){const i=_d[t.invoicedByFirm],o=r===t.invoicedByFirm,a=t.amount*t.commissionPercentage/100;return E.jsxs("div",{className:`
        p-4 rounded-lg border transition-all duration-200
        ${i.border}
        ${o?i.bg:"bg-white"}
      `,children:[E.jsxs("div",{className:"flex items-center justify-between mb-3",children:[E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center
              ${n>30?"bg-red-100":"bg-amber-100"}
            `,children:E.jsx(ty,{className:`h-5 w-5 ${n>30?"text-red-600":"text-amber-600"}`})}),E.jsxs("div",{children:[E.jsx("h3",{className:"font-medium text-gray-900",children:t.clientName}),E.jsx("div",{className:"flex items-center text-sm",children:n>0&&E.jsxs("span",{className:`
                    ${n>30?"text-red-600":n>14?"text-orange-600":"text-amber-600"}
                  `,children:[n," days overdue"]})})]})]}),E.jsxs("div",{className:"text-right",children:[E.jsx("div",{className:"font-medium text-gray-900",children:H0(t.amount)}),E.jsxs("div",{className:"text-sm text-gray-500",children:["Commission: ",H0(a)]})]})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-4",children:[E.jsxs("div",{className:"flex items-center text-gray-500",children:[E.jsx(ey,{className:"h-4 w-4 mr-2"}),new Date(t.date).toLocaleDateString()]}),E.jsxs("div",{className:"flex items-center text-gray-500",children:[E.jsx(T1,{className:"h-4 w-4 mr-2"}),E.jsx("span",{className:_d[t.invoicedByFirm].text,children:t.invoicedByFirm}),E.jsx(cl,{className:"h-4 w-4 mx-1"}),E.jsx("span",{className:_d[t.referredByFirm].text,children:t.referredByFirm})]})]}),o&&E.jsxs("button",{onClick:e,className:"w-full py-2 flex items-center justify-center space-x-2 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors",children:[E.jsx(ks,{className:"h-4 w-4"}),E.jsx("span",{children:"Mark as Paid"})]})]})}function KL(){const{invoices:t,updateInvoice:e}=da(),{user:r}=yn(),{currentYear:n,currentQuarter:i}=Ic(),[o,a]=D.useState({firm:"all",sortBy:"date"}),s=D.useMemo(()=>{let u=t.filter(l=>!l.isPaid&&sl(new Date(l.date),n,i));return o.firm!=="all"&&(u=u.filter(l=>l.invoicedByFirm===o.firm||l.referredByFirm===o.firm)),u.sort((l,f)=>{const d=c(l.date),p=c(f.date);switch(o.sortBy){case"date":return new Date(f.date).getTime()-new Date(l.date).getTime();case"amount":return f.amount-l.amount;case"overdue":return p-d;default:return 0}})},[t,n,i,o]),c=u=>{const l=new Date(u),d=new Date().getTime()-l.getTime();return Math.floor(d/(1e3*60*60*24))};return r?E.jsxs("div",{className:"space-y-6",children:[E.jsx(zL,{filters:o,onFilterChange:a}),s.length===0?E.jsxs("div",{className:"text-center py-6",children:[E.jsx(ks,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),E.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"All Paid!"}),E.jsx("p",{className:"text-gray-500",children:"No unpaid invoices for this quarter."})]}):E.jsx("div",{className:"space-y-4",children:s.map(u=>E.jsx(HL,{invoice:u,onMarkAsPaid:()=>e(u.id,{isPaid:!0}),userFirm:r.firm,daysOverdue:c(u.date)},u.id))})]}):null}function H0(t){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(t)}var GL=Array.isArray,Ut=GL,YL=typeof ou=="object"&&ou&&ou.Object===Object&&ou,Q1=YL,XL=Q1,QL=typeof self=="object"&&self&&self.Object===Object&&self,JL=XL||QL||Function("return this")(),Vr=JL,ZL=Vr,eF=ZL.Symbol,Nc=eF,K0=Nc,J1=Object.prototype,tF=J1.hasOwnProperty,rF=J1.toString,za=K0?K0.toStringTag:void 0;function nF(t){var e=tF.call(t,za),r=t[za];try{t[za]=void 0;var n=!0}catch{}var i=rF.call(t);return n&&(e?t[za]=r:delete t[za]),i}var iF=nF,oF=Object.prototype,aF=oF.toString;function sF(t){return aF.call(t)}var cF=sF,G0=Nc,uF=iF,lF=cF,fF="[object Null]",hF="[object Undefined]",Y0=G0?G0.toStringTag:void 0;function dF(t){return t==null?t===void 0?hF:fF:Y0&&Y0 in Object(t)?uF(t):lF(t)}var vn=dF;function pF(t){return t!=null&&typeof t=="object"}var bn=pF,mF=vn,gF=bn,yF="[object Symbol]";function vF(t){return typeof t=="symbol"||gF(t)&&mF(t)==yF}var ma=vF,bF=Ut,_F=ma,wF=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xF=/^\w*$/;function AF(t,e){if(bF(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||_F(t)?!0:xF.test(t)||!wF.test(t)||e!=null&&t in Object(e)}var uy=AF;function EF(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ti=EF;const ga=ke(ti);var TF=vn,SF=ti,PF="[object AsyncFunction]",IF="[object Function]",OF="[object GeneratorFunction]",CF="[object Proxy]";function RF(t){if(!SF(t))return!1;var e=TF(t);return e==IF||e==OF||e==PF||e==CF}var ly=RF;const ue=ke(ly);var kF=Vr,NF=kF["__core-js_shared__"],$F=NF,wd=$F,X0=function(){var t=/[^.]+$/.exec(wd&&wd.keys&&wd.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function jF(t){return!!X0&&X0 in t}var DF=jF,MF=Function.prototype,LF=MF.toString;function FF(t){if(t!=null){try{return LF.call(t)}catch{}try{return t+""}catch{}}return""}var Z1=FF,VF=ly,BF=DF,UF=ti,qF=Z1,WF=/[\\^$.*+?()[\]{}|]/g,zF=/^\[object .+?Constructor\]$/,HF=Function.prototype,KF=Object.prototype,GF=HF.toString,YF=KF.hasOwnProperty,XF=RegExp("^"+GF.call(YF).replace(WF,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function QF(t){if(!UF(t)||BF(t))return!1;var e=VF(t)?XF:zF;return e.test(qF(t))}var JF=QF;function ZF(t,e){return t==null?void 0:t[e]}var eV=ZF,tV=JF,rV=eV;function nV(t,e){var r=rV(t,e);return tV(r)?r:void 0}var Xi=nV,iV=Xi,oV=iV(Object,"create"),Yf=oV,Q0=Yf;function aV(){this.__data__=Q0?Q0(null):{},this.size=0}var sV=aV;function cV(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var uV=cV,lV=Yf,fV="__lodash_hash_undefined__",hV=Object.prototype,dV=hV.hasOwnProperty;function pV(t){var e=this.__data__;if(lV){var r=e[t];return r===fV?void 0:r}return dV.call(e,t)?e[t]:void 0}var mV=pV,gV=Yf,yV=Object.prototype,vV=yV.hasOwnProperty;function bV(t){var e=this.__data__;return gV?e[t]!==void 0:vV.call(e,t)}var _V=bV,wV=Yf,xV="__lodash_hash_undefined__";function AV(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=wV&&e===void 0?xV:e,this}var EV=AV,TV=sV,SV=uV,PV=mV,IV=_V,OV=EV;function ya(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ya.prototype.clear=TV;ya.prototype.delete=SV;ya.prototype.get=PV;ya.prototype.has=IV;ya.prototype.set=OV;var CV=ya;function RV(){this.__data__=[],this.size=0}var kV=RV;function NV(t,e){return t===e||t!==t&&e!==e}var fy=NV,$V=fy;function jV(t,e){for(var r=t.length;r--;)if($V(t[r][0],e))return r;return-1}var Xf=jV,DV=Xf,MV=Array.prototype,LV=MV.splice;function FV(t){var e=this.__data__,r=DV(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():LV.call(e,r,1),--this.size,!0}var VV=FV,BV=Xf;function UV(t){var e=this.__data__,r=BV(e,t);return r<0?void 0:e[r][1]}var qV=UV,WV=Xf;function zV(t){return WV(this.__data__,t)>-1}var HV=zV,KV=Xf;function GV(t,e){var r=this.__data__,n=KV(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var YV=GV,XV=kV,QV=VV,JV=qV,ZV=HV,eB=YV;function va(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}va.prototype.clear=XV;va.prototype.delete=QV;va.prototype.get=JV;va.prototype.has=ZV;va.prototype.set=eB;var Qf=va,tB=Xi,rB=Vr,nB=tB(rB,"Map"),hy=nB,J0=CV,iB=Qf,oB=hy;function aB(){this.size=0,this.__data__={hash:new J0,map:new(oB||iB),string:new J0}}var sB=aB;function cB(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var uB=cB,lB=uB;function fB(t,e){var r=t.__data__;return lB(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Jf=fB,hB=Jf;function dB(t){var e=hB(this,t).delete(t);return this.size-=e?1:0,e}var pB=dB,mB=Jf;function gB(t){return mB(this,t).get(t)}var yB=gB,vB=Jf;function bB(t){return vB(this,t).has(t)}var _B=bB,wB=Jf;function xB(t,e){var r=wB(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var AB=xB,EB=sB,TB=pB,SB=yB,PB=_B,IB=AB;function ba(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ba.prototype.clear=EB;ba.prototype.delete=TB;ba.prototype.get=SB;ba.prototype.has=PB;ba.prototype.set=IB;var dy=ba,eS=dy,OB="Expected a function";function py(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(OB);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(py.Cache||eS),r}py.Cache=eS;var tS=py;const CB=ke(tS);var RB=tS,kB=500;function NB(t){var e=RB(t,function(n){return r.size===kB&&r.clear(),n}),r=e.cache;return e}var $B=NB,jB=$B,DB=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,MB=/\\(\\)?/g,LB=jB(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(DB,function(r,n,i,o){e.push(i?o.replace(MB,"$1"):n||r)}),e}),FB=LB;function VB(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var my=VB,Z0=Nc,BB=my,UB=Ut,qB=ma,WB=1/0,e_=Z0?Z0.prototype:void 0,t_=e_?e_.toString:void 0;function rS(t){if(typeof t=="string")return t;if(UB(t))return BB(t,rS)+"";if(qB(t))return t_?t_.call(t):"";var e=t+"";return e=="0"&&1/t==-WB?"-0":e}var zB=rS,HB=zB;function KB(t){return t==null?"":HB(t)}var nS=KB,GB=Ut,YB=uy,XB=FB,QB=nS;function JB(t,e){return GB(t)?t:YB(t,e)?[t]:XB(QB(t))}var iS=JB,ZB=ma,eU=1/0;function tU(t){if(typeof t=="string"||ZB(t))return t;var e=t+"";return e=="0"&&1/t==-eU?"-0":e}var Zf=tU,rU=iS,nU=Zf;function iU(t,e){e=rU(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[nU(e[r++])];return r&&r==n?t:void 0}var gy=iU,oU=gy;function aU(t,e,r){var n=t==null?void 0:oU(t,e);return n===void 0?r:n}var oS=aU;const Xt=ke(oS);function sU(t){return t==null}var cU=sU;const he=ke(cU);var uU=vn,lU=Ut,fU=bn,hU="[object String]";function dU(t){return typeof t=="string"||!lU(t)&&fU(t)&&uU(t)==hU}var pU=dU;const $c=ke(pU);var aS={exports:{}},Ce={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy=Symbol.for("react.element"),vy=Symbol.for("react.portal"),eh=Symbol.for("react.fragment"),th=Symbol.for("react.strict_mode"),rh=Symbol.for("react.profiler"),nh=Symbol.for("react.provider"),ih=Symbol.for("react.context"),mU=Symbol.for("react.server_context"),oh=Symbol.for("react.forward_ref"),ah=Symbol.for("react.suspense"),sh=Symbol.for("react.suspense_list"),ch=Symbol.for("react.memo"),uh=Symbol.for("react.lazy"),gU=Symbol.for("react.offscreen"),sS;sS=Symbol.for("react.module.reference");function ar(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case yy:switch(t=t.type,t){case eh:case rh:case th:case ah:case sh:return t;default:switch(t=t&&t.$$typeof,t){case mU:case ih:case oh:case uh:case ch:case nh:return t;default:return e}}case vy:return e}}}Ce.ContextConsumer=ih;Ce.ContextProvider=nh;Ce.Element=yy;Ce.ForwardRef=oh;Ce.Fragment=eh;Ce.Lazy=uh;Ce.Memo=ch;Ce.Portal=vy;Ce.Profiler=rh;Ce.StrictMode=th;Ce.Suspense=ah;Ce.SuspenseList=sh;Ce.isAsyncMode=function(){return!1};Ce.isConcurrentMode=function(){return!1};Ce.isContextConsumer=function(t){return ar(t)===ih};Ce.isContextProvider=function(t){return ar(t)===nh};Ce.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===yy};Ce.isForwardRef=function(t){return ar(t)===oh};Ce.isFragment=function(t){return ar(t)===eh};Ce.isLazy=function(t){return ar(t)===uh};Ce.isMemo=function(t){return ar(t)===ch};Ce.isPortal=function(t){return ar(t)===vy};Ce.isProfiler=function(t){return ar(t)===rh};Ce.isStrictMode=function(t){return ar(t)===th};Ce.isSuspense=function(t){return ar(t)===ah};Ce.isSuspenseList=function(t){return ar(t)===sh};Ce.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===eh||t===rh||t===th||t===ah||t===sh||t===gU||typeof t=="object"&&t!==null&&(t.$$typeof===uh||t.$$typeof===ch||t.$$typeof===nh||t.$$typeof===ih||t.$$typeof===oh||t.$$typeof===sS||t.getModuleId!==void 0)};Ce.typeOf=ar;aS.exports=Ce;var yU=aS.exports,vU=vn,bU=bn,_U="[object Number]";function wU(t){return typeof t=="number"||bU(t)&&vU(t)==_U}var cS=wU;const xU=ke(cS);var AU=cS;function EU(t){return AU(t)&&t!=+t}var TU=EU;const _a=ke(TU);var jt=function(e){return e===0?0:e>0?1:-1},xi=function(e){return $c(e)&&e.indexOf("%")===e.length-1},G=function(e){return xU(e)&&!_a(e)},ot=function(e){return G(e)||$c(e)},SU=0,Qi=function(e){var r=++SU;return"".concat(e||"").concat(r)},Dt=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!G(e)&&!$c(e))return n;var o;if(xi(e)){var a=e.indexOf("%");o=r*parseFloat(e.slice(0,a))/100}else o=+e;return _a(o)&&(o=n),i&&o>r&&(o=r),o},$n=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},PU=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},it=function(e,r){return G(e)&&G(r)?function(n){return e+n*(r-e)}:function(){return r}};function hl(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Xt(n,e))===r})}function Eo(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function Pp(t){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pp(t)}var IU=["viewBox","children"],OU=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],r_=["points","pathLength"],xd={svg:IU,polygon:r_,polyline:r_},by=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],dl=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(D.isValidElement(e)&&(n=e.props),!ga(n))return null;var i={};return Object.keys(n).forEach(function(o){by.includes(o)&&(i[o]=r||function(a){return n[o](n,a)})}),i},CU=function(e,r,n){return function(i){return e(r,n,i),null}},Fi=function(e,r,n){if(!ga(e)||Pp(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var a=e[o];by.includes(o)&&typeof a=="function"&&(i||(i={}),i[o]=CU(a,r,n))}),i},RU=["children"],kU=["children"];function n_(t,e){if(t==null)return{};var r=NU(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function NU(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Ip(t){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ip(t)}var i_={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},on=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},o_=null,Ad=null,_y=function t(e){if(e===o_&&Array.isArray(Ad))return Ad;var r=[];return D.Children.forEach(e,function(n){he(n)||(yU.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),Ad=r,o_=e,r};function Qt(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return on(i)}):n=[on(e)],_y(t).forEach(function(i){var o=Xt(i,"type.displayName")||Xt(i,"type.name");n.indexOf(o)!==-1&&r.push(i)}),r}function Ht(t,e){var r=Qt(t,e);return r&&r[0]}var a_=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!G(n)||n<=0||!G(i)||i<=0)},$U=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],jU=function(e){return e&&e.type&&$c(e.type)&&$U.indexOf(e.type)>=0},uS=function(e){return e&&Ip(e)==="object"&&"clipDot"in e},DU=function(e,r,n,i){var o,a=(o=xd==null?void 0:xd[i])!==null&&o!==void 0?o:[];return!ue(e)&&(i&&a.includes(r)||OU.includes(r))||n&&by.includes(r)},ie=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(D.isValidElement(e)&&(i=e.props),!ga(i))return null;var o={};return Object.keys(i).forEach(function(a){var s;DU((s=i)===null||s===void 0?void 0:s[a],a,r,n)&&(o[a]=i[a])}),o},Op=function t(e,r){if(e===r)return!0;var n=D.Children.count(e);if(n!==D.Children.count(r))return!1;if(n===0)return!0;if(n===1)return s_(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var o=e[i],a=r[i];if(Array.isArray(o)||Array.isArray(a)){if(!t(o,a))return!1}else if(!s_(o,a))return!1}return!0},s_=function(e,r){if(he(e)&&he(r))return!0;if(!he(e)&&!he(r)){var n=e.props||{},i=n.children,o=n_(n,RU),a=r.props||{},s=a.children,c=n_(a,kU);return i&&s?Eo(o,c)&&Op(i,s):!i&&!s?Eo(o,c):!1}return!1},c_=function(e,r){var n=[],i={};return _y(e).forEach(function(o,a){if(jU(o))n.push(o);else if(o){var s=on(o.type),c=r[s]||{},u=c.handler,l=c.once;if(u&&(!l||!i[s])){var f=u(o,s,a);n.push(f),i[s]=!0}}}),n},MU=function(e){var r=e&&e.type;return r&&i_[r]?i_[r]:null},LU=function(e,r){return _y(r).indexOf(e)},FU=["children","width","height","viewBox","className","style","title","desc"];function Cp(){return Cp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cp.apply(this,arguments)}function VU(t,e){if(t==null)return{};var r=BU(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function BU(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Rp(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,o=t.className,a=t.style,s=t.title,c=t.desc,u=VU(t,FU),l=i||{width:r,height:n,x:0,y:0},f=ge("recharts-surface",o);return j.createElement("svg",Cp({},ie(u,!0,"svg"),{className:f,width:r,height:n,style:a,viewBox:"".concat(l.x," ").concat(l.y," ").concat(l.width," ").concat(l.height)}),j.createElement("title",null,s),j.createElement("desc",null,c),e)}var UU=["children","className"];function kp(){return kp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kp.apply(this,arguments)}function qU(t,e){if(t==null)return{};var r=WU(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function WU(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var be=j.forwardRef(function(t,e){var r=t.children,n=t.className,i=qU(t,UU),o=ge("recharts-layer",n);return j.createElement("g",kp({className:o},ie(i,!0),{ref:e}),r)}),mr=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o]};function zU(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}var HU=zU,KU=HU;function GU(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:KU(t,e,r)}var YU=GU,XU="\\ud800-\\udfff",QU="\\u0300-\\u036f",JU="\\ufe20-\\ufe2f",ZU="\\u20d0-\\u20ff",e4=QU+JU+ZU,t4="\\ufe0e\\ufe0f",r4="\\u200d",n4=RegExp("["+r4+XU+e4+t4+"]");function i4(t){return n4.test(t)}var lS=i4;function o4(t){return t.split("")}var a4=o4,fS="\\ud800-\\udfff",s4="\\u0300-\\u036f",c4="\\ufe20-\\ufe2f",u4="\\u20d0-\\u20ff",l4=s4+c4+u4,f4="\\ufe0e\\ufe0f",h4="["+fS+"]",Np="["+l4+"]",$p="\\ud83c[\\udffb-\\udfff]",d4="(?:"+Np+"|"+$p+")",hS="[^"+fS+"]",dS="(?:\\ud83c[\\udde6-\\uddff]){2}",pS="[\\ud800-\\udbff][\\udc00-\\udfff]",p4="\\u200d",mS=d4+"?",gS="["+f4+"]?",m4="(?:"+p4+"(?:"+[hS,dS,pS].join("|")+")"+gS+mS+")*",g4=gS+mS+m4,y4="(?:"+[hS+Np+"?",Np,dS,pS,h4].join("|")+")",v4=RegExp($p+"(?="+$p+")|"+y4+g4,"g");function b4(t){return t.match(v4)||[]}var _4=b4,w4=a4,x4=lS,A4=_4;function E4(t){return x4(t)?A4(t):w4(t)}var T4=E4,S4=YU,P4=lS,I4=T4,O4=nS;function C4(t){return function(e){e=O4(e);var r=P4(e)?I4(e):void 0,n=r?r[0]:e.charAt(0),i=r?S4(r,1).join(""):e.slice(1);return n[t]()+i}}var R4=C4,k4=R4,N4=k4("toUpperCase"),$4=N4;const lh=ke($4);function Me(t){return function(){return t}}const yS=Math.cos,pl=Math.sin,_r=Math.sqrt,ml=Math.PI,fh=2*ml,jp=Math.PI,Dp=2*jp,mi=1e-6,j4=Dp-mi;function vS(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function D4(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return vS;const r=10**e;return function(n){this._+=n[0];for(let i=1,o=n.length;i<o;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class M4{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?vS:D4(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,o,a){this._append`C${+e},${+r},${+n},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,r,n,i,o){if(e=+e,r=+r,n=+n,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,c=n-e,u=i-r,l=a-e,f=s-r,d=l*l+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(d>mi)if(!(Math.abs(f*c-u*l)>mi)||!o)this._append`L${this._x1=e},${this._y1=r}`;else{let p=n-a,m=i-s,y=c*c+u*u,g=p*p+m*m,A=Math.sqrt(y),T=Math.sqrt(d),P=o*Math.tan((jp-Math.acos((y+d-g)/(2*A*T)))/2),C=P/T,x=P/A;Math.abs(C-1)>mi&&this._append`L${e+C*l},${r+C*f}`,this._append`A${o},${o},0,0,${+(f*p>l*m)},${this._x1=e+x*c},${this._y1=r+x*u}`}}arc(e,r,n,i,o,a){if(e=+e,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(i),c=n*Math.sin(i),u=e+s,l=r+c,f=1^a,d=a?i-o:o-i;this._x1===null?this._append`M${u},${l}`:(Math.abs(this._x1-u)>mi||Math.abs(this._y1-l)>mi)&&this._append`L${u},${l}`,n&&(d<0&&(d=d%Dp+Dp),d>j4?this._append`A${n},${n},0,1,${f},${e-s},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=l}`:d>mi&&this._append`A${n},${n},0,${+(d>=jp)},${f},${this._x1=e+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function wy(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new M4(e)}function xy(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function bS(t){this._context=t}bS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function hh(t){return new bS(t)}function _S(t){return t[0]}function wS(t){return t[1]}function xS(t,e){var r=Me(!0),n=null,i=hh,o=null,a=wy(s);t=typeof t=="function"?t:t===void 0?_S:Me(t),e=typeof e=="function"?e:e===void 0?wS:Me(e);function s(c){var u,l=(c=xy(c)).length,f,d=!1,p;for(n==null&&(o=i(p=a())),u=0;u<=l;++u)!(u<l&&r(f=c[u],u,c))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+t(f,u,c),+e(f,u,c));if(p)return o=null,p+""||null}return s.x=function(c){return arguments.length?(t=typeof c=="function"?c:Me(+c),s):t},s.y=function(c){return arguments.length?(e=typeof c=="function"?c:Me(+c),s):e},s.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Me(!!c),s):r},s.curve=function(c){return arguments.length?(i=c,n!=null&&(o=i(n)),s):i},s.context=function(c){return arguments.length?(c==null?n=o=null:o=i(n=c),s):n},s}function gu(t,e,r){var n=null,i=Me(!0),o=null,a=hh,s=null,c=wy(u);t=typeof t=="function"?t:t===void 0?_S:Me(+t),e=typeof e=="function"?e:Me(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?wS:Me(+r);function u(f){var d,p,m,y=(f=xy(f)).length,g,A=!1,T,P=new Array(y),C=new Array(y);for(o==null&&(s=a(T=c())),d=0;d<=y;++d){if(!(d<y&&i(g=f[d],d,f))===A)if(A=!A)p=d,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),m=d-1;m>=p;--m)s.point(P[m],C[m]);s.lineEnd(),s.areaEnd()}A&&(P[d]=+t(g,d,f),C[d]=+e(g,d,f),s.point(n?+n(g,d,f):P[d],r?+r(g,d,f):C[d]))}if(T)return s=null,T+""||null}function l(){return xS().defined(i).curve(a).context(o)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Me(+f),n=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Me(+f),u):t},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Me(+f),u):n},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Me(+f),r=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Me(+f),u):e},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Me(+f),u):r},u.lineX0=u.lineY0=function(){return l().x(t).y(e)},u.lineY1=function(){return l().x(t).y(r)},u.lineX1=function(){return l().x(n).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Me(!!f),u):i},u.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),u):a},u.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),u):o},u}class AS{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function L4(t){return new AS(t,!0)}function F4(t){return new AS(t,!1)}const Ay={draw(t,e){const r=_r(e/ml);t.moveTo(r,0),t.arc(0,0,r,0,fh)}},V4={draw(t,e){const r=_r(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},ES=_r(1/3),B4=ES*2,U4={draw(t,e){const r=_r(e/B4),n=r*ES;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},q4={draw(t,e){const r=_r(e),n=-r/2;t.rect(n,n,r,r)}},W4=.8908130915292852,TS=pl(ml/10)/pl(7*ml/10),z4=pl(fh/10)*TS,H4=-yS(fh/10)*TS,K4={draw(t,e){const r=_r(e*W4),n=z4*r,i=H4*r;t.moveTo(0,-r),t.lineTo(n,i);for(let o=1;o<5;++o){const a=fh*o/5,s=yS(a),c=pl(a);t.lineTo(c*r,-s*r),t.lineTo(s*n-c*i,c*n+s*i)}t.closePath()}},Ed=_r(3),G4={draw(t,e){const r=-_r(e/(Ed*3));t.moveTo(0,r*2),t.lineTo(-Ed*r,-r),t.lineTo(Ed*r,-r),t.closePath()}},Jt=-.5,Zt=_r(3)/2,Mp=1/_r(12),Y4=(Mp/2+1)*3,X4={draw(t,e){const r=_r(e/Y4),n=r/2,i=r*Mp,o=n,a=r*Mp+r,s=-o,c=a;t.moveTo(n,i),t.lineTo(o,a),t.lineTo(s,c),t.lineTo(Jt*n-Zt*i,Zt*n+Jt*i),t.lineTo(Jt*o-Zt*a,Zt*o+Jt*a),t.lineTo(Jt*s-Zt*c,Zt*s+Jt*c),t.lineTo(Jt*n+Zt*i,Jt*i-Zt*n),t.lineTo(Jt*o+Zt*a,Jt*a-Zt*o),t.lineTo(Jt*s+Zt*c,Jt*c-Zt*s),t.closePath()}};function Q4(t,e){let r=null,n=wy(i);t=typeof t=="function"?t:Me(t||Ay),e=typeof e=="function"?e:Me(e===void 0?64:+e);function i(){let o;if(r||(r=o=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),o)return r=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Me(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Me(+o),i):e},i.context=function(o){return arguments.length?(r=o??null,i):r},i}function gl(){}function yl(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function SS(t){this._context=t}SS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yl(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yl(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function J4(t){return new SS(t)}function PS(t){this._context=t}PS.prototype={areaStart:gl,areaEnd:gl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:yl(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Z4(t){return new PS(t)}function IS(t){this._context=t}IS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:yl(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function e5(t){return new IS(t)}function OS(t){this._context=t}OS.prototype={areaStart:gl,areaEnd:gl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function t5(t){return new OS(t)}function u_(t){return t<0?-1:1}function l_(t,e,r){var n=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(n||i<0&&-0),a=(r-t._y1)/(i||n<0&&-0),s=(o*i+a*n)/(n+i);return(u_(o)+u_(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function f_(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Td(t,e,r){var n=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-n)/3;t._context.bezierCurveTo(n+s,i+s*e,o-s,a-s*r,o,a)}function vl(t){this._context=t}vl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Td(this,this._t0,f_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Td(this,f_(this,r=l_(this,t,e)),r);break;default:Td(this,this._t0,r=l_(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function CS(t){this._context=new RS(t)}(CS.prototype=Object.create(vl.prototype)).point=function(t,e){vl.prototype.point.call(this,e,t)};function RS(t){this._context=t}RS.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,o){this._context.bezierCurveTo(e,t,n,r,o,i)}};function r5(t){return new vl(t)}function n5(t){return new CS(t)}function kS(t){this._context=t}kS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=h_(t),i=h_(e),o=0,a=1;a<r;++o,++a)this._context.bezierCurveTo(n[0][o],i[0][o],n[1][o],i[1][o],t[a],e[a]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function h_(t){var e,r=t.length-1,n,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function i5(t){return new kS(t)}function dh(t,e){this._context=t,this._t=e}dh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function o5(t){return new dh(t,.5)}function a5(t){return new dh(t,0)}function s5(t){return new dh(t,1)}function jo(t,e){if((a=t.length)>1)for(var r=1,n,i,o=t[e[0]],a,s=o.length;r<a;++r)for(i=o,o=t[e[r]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Lp(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function c5(t,e){return t[e]}function u5(t){const e=[];return e.key=t,e}function l5(){var t=Me([]),e=Lp,r=jo,n=c5;function i(o){var a=Array.from(t.apply(this,arguments),u5),s,c=a.length,u=-1,l;for(const f of o)for(s=0,++u;s<c;++s)(a[s][u]=[0,+n(f,a[s].key,u,o)]).data=f;for(s=0,l=xy(e(a));s<c;++s)a[l[s]].index=s;return r(a,l),a}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Me(Array.from(o)),i):t},i.value=function(o){return arguments.length?(n=typeof o=="function"?o:Me(+o),i):n},i.order=function(o){return arguments.length?(e=o==null?Lp:typeof o=="function"?o:Me(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(r=o??jo,i):r},i}function f5(t,e){if((n=t.length)>0){for(var r,n,i=0,o=t[0].length,a;i<o;++i){for(a=r=0;r<n;++r)a+=t[r][i][1]||0;if(a)for(r=0;r<n;++r)t[r][i][1]/=a}jo(t,e)}}function h5(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,o=n.length;r<o;++r){for(var a=0,s=0;a<i;++a)s+=t[a][r][1]||0;n[r][1]+=n[r][0]=-s/2}jo(t,e)}}function d5(t,e){if(!(!((a=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,o,a;n<o;++n){for(var s=0,c=0,u=0;s<a;++s){for(var l=t[e[s]],f=l[n][1]||0,d=l[n-1][1]||0,p=(f-d)/2,m=0;m<s;++m){var y=t[e[m]],g=y[n][1]||0,A=y[n-1][1]||0;p+=g-A}c+=f,u+=p*f}i[n-1][1]+=i[n-1][0]=r,c&&(r-=u/c)}i[n-1][1]+=i[n-1][0]=r,jo(t,e)}}function $s(t){"@babel/helpers - typeof";return $s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$s(t)}var p5=["type","size","sizeType"];function Fp(){return Fp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fp.apply(this,arguments)}function d_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function p_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?d_(Object(r),!0).forEach(function(n){m5(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d_(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function m5(t,e,r){return e=g5(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g5(t){var e=y5(t,"string");return $s(e)=="symbol"?e:e+""}function y5(t,e){if($s(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if($s(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function v5(t,e){if(t==null)return{};var r=b5(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function b5(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var NS={symbolCircle:Ay,symbolCross:V4,symbolDiamond:U4,symbolSquare:q4,symbolStar:K4,symbolTriangle:G4,symbolWye:X4},_5=Math.PI/180,w5=function(e){var r="symbol".concat(lh(e));return NS[r]||Ay},x5=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*_5;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},A5=function(e,r){NS["symbol".concat(lh(e))]=r},Ey=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,o=i===void 0?64:i,a=e.sizeType,s=a===void 0?"area":a,c=v5(e,p5),u=p_(p_({},c),{},{type:n,size:o,sizeType:s}),l=function(){var g=w5(n),A=Q4().type(g).size(x5(o,s,n));return A()},f=u.className,d=u.cx,p=u.cy,m=ie(u,!0);return d===+d&&p===+p&&o===+o?j.createElement("path",Fp({},m,{className:ge("recharts-symbols",f),transform:"translate(".concat(d,", ").concat(p,")"),d:l()})):null};Ey.registerSymbol=A5;function Do(t){"@babel/helpers - typeof";return Do=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Do(t)}function Vp(){return Vp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vp.apply(this,arguments)}function m_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function E5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?m_(Object(r),!0).forEach(function(n){js(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m_(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function T5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jS(n.key),n)}}function P5(t,e,r){return e&&S5(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function I5(t,e,r){return e=bl(e),O5(t,$S()?Reflect.construct(e,r||[],bl(t).constructor):e.apply(t,r))}function O5(t,e){if(e&&(Do(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C5(t)}function C5(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $S(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($S=function(){return!!t})()}function bl(t){return bl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bl(t)}function R5(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bp(t,e)}function Bp(t,e){return Bp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Bp(t,e)}function js(t,e,r){return e=jS(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jS(t){var e=k5(t,"string");return Do(e)=="symbol"?e:e+""}function k5(t,e){if(Do(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Do(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var er=32,Ty=function(t){function e(){return T5(this,e),I5(this,e,arguments)}return R5(e,t),P5(e,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,o=er/2,a=er/6,s=er/3,c=n.inactive?i:n.color;if(n.type==="plainline")return j.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:o,x2:er,y2:o,className:"recharts-legend-icon"});if(n.type==="line")return j.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(o,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(o,`
            H`).concat(er,"M").concat(2*s,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(o),className:"recharts-legend-icon"});if(n.type==="rect")return j.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(er/8,"h").concat(er,"v").concat(er*3/4,"h").concat(-er,"z"),className:"recharts-legend-icon"});if(j.isValidElement(n.legendIcon)){var u=E5({},n);return delete u.legendIcon,j.cloneElement(n.legendIcon,u)}return j.createElement(Ey,{fill:c,cx:o,cy:o,size:er,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,o=i.payload,a=i.iconSize,s=i.layout,c=i.formatter,u=i.inactiveColor,l={x:0,y:0,width:er,height:er},f={display:s==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(p,m){var y=p.formatter||c,g=ge(js(js({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",p.inactive));if(p.type==="none")return null;var A=ue(p.value)?null:p.value;mr(!ue(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var T=p.inactive?u:p.color;return j.createElement("li",Vp({className:g,style:f,key:"legend-item-".concat(m)},Fi(n.props,p,m)),j.createElement(Rp,{width:a,height:a,viewBox:l,style:d},n.renderIcon(p)),j.createElement("span",{className:"recharts-legend-item-text",style:{color:T}},y?y(A,p,m):A))})}},{key:"render",value:function(){var n=this.props,i=n.payload,o=n.layout,a=n.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return j.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(D.PureComponent);js(Ty,"displayName","Legend");js(Ty,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var N5=Qf;function $5(){this.__data__=new N5,this.size=0}var j5=$5;function D5(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var M5=D5;function L5(t){return this.__data__.get(t)}var F5=L5;function V5(t){return this.__data__.has(t)}var B5=V5,U5=Qf,q5=hy,W5=dy,z5=200;function H5(t,e){var r=this.__data__;if(r instanceof U5){var n=r.__data__;if(!q5||n.length<z5-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new W5(n)}return r.set(t,e),this.size=r.size,this}var K5=H5,G5=Qf,Y5=j5,X5=M5,Q5=F5,J5=B5,Z5=K5;function wa(t){var e=this.__data__=new G5(t);this.size=e.size}wa.prototype.clear=Y5;wa.prototype.delete=X5;wa.prototype.get=Q5;wa.prototype.has=J5;wa.prototype.set=Z5;var DS=wa,e3="__lodash_hash_undefined__";function t3(t){return this.__data__.set(t,e3),this}var r3=t3;function n3(t){return this.__data__.has(t)}var i3=n3,o3=dy,a3=r3,s3=i3;function _l(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new o3;++e<r;)this.add(t[e])}_l.prototype.add=_l.prototype.push=a3;_l.prototype.has=s3;var MS=_l;function c3(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var LS=c3;function u3(t,e){return t.has(e)}var FS=u3,l3=MS,f3=LS,h3=FS,d3=1,p3=2;function m3(t,e,r,n,i,o){var a=r&d3,s=t.length,c=e.length;if(s!=c&&!(a&&c>s))return!1;var u=o.get(t),l=o.get(e);if(u&&l)return u==e&&l==t;var f=-1,d=!0,p=r&p3?new l3:void 0;for(o.set(t,e),o.set(e,t);++f<s;){var m=t[f],y=e[f];if(n)var g=a?n(y,m,f,e,t,o):n(m,y,f,t,e,o);if(g!==void 0){if(g)continue;d=!1;break}if(p){if(!f3(e,function(A,T){if(!h3(p,T)&&(m===A||i(m,A,r,n,o)))return p.push(T)})){d=!1;break}}else if(!(m===y||i(m,y,r,n,o))){d=!1;break}}return o.delete(t),o.delete(e),d}var VS=m3,g3=Vr,y3=g3.Uint8Array,v3=y3;function b3(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var _3=b3;function w3(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Sy=w3,g_=Nc,y_=v3,x3=fy,A3=VS,E3=_3,T3=Sy,S3=1,P3=2,I3="[object Boolean]",O3="[object Date]",C3="[object Error]",R3="[object Map]",k3="[object Number]",N3="[object RegExp]",$3="[object Set]",j3="[object String]",D3="[object Symbol]",M3="[object ArrayBuffer]",L3="[object DataView]",v_=g_?g_.prototype:void 0,Sd=v_?v_.valueOf:void 0;function F3(t,e,r,n,i,o,a){switch(r){case L3:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case M3:return!(t.byteLength!=e.byteLength||!o(new y_(t),new y_(e)));case I3:case O3:case k3:return x3(+t,+e);case C3:return t.name==e.name&&t.message==e.message;case N3:case j3:return t==e+"";case R3:var s=E3;case $3:var c=n&S3;if(s||(s=T3),t.size!=e.size&&!c)return!1;var u=a.get(t);if(u)return u==e;n|=P3,a.set(t,e);var l=A3(s(t),s(e),n,i,o,a);return a.delete(t),l;case D3:if(Sd)return Sd.call(t)==Sd.call(e)}return!1}var V3=F3;function B3(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var BS=B3,U3=BS,q3=Ut;function W3(t,e,r){var n=e(t);return q3(t)?n:U3(n,r(t))}var z3=W3;function H3(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[i++]=a)}return o}var K3=H3;function G3(){return[]}var Y3=G3,X3=K3,Q3=Y3,J3=Object.prototype,Z3=J3.propertyIsEnumerable,b_=Object.getOwnPropertySymbols,e6=b_?function(t){return t==null?[]:(t=Object(t),X3(b_(t),function(e){return Z3.call(t,e)}))}:Q3,t6=e6;function r6(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var n6=r6,i6=vn,o6=bn,a6="[object Arguments]";function s6(t){return o6(t)&&i6(t)==a6}var c6=s6,__=c6,u6=bn,US=Object.prototype,l6=US.hasOwnProperty,f6=US.propertyIsEnumerable,h6=__(function(){return arguments}())?__:function(t){return u6(t)&&l6.call(t,"callee")&&!f6.call(t,"callee")},Py=h6,wl={exports:{}};function d6(){return!1}var p6=d6;wl.exports;(function(t,e){var r=Vr,n=p6,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a?r.Buffer:void 0,c=s?s.isBuffer:void 0,u=c||n;t.exports=u})(wl,wl.exports);var qS=wl.exports,m6=9007199254740991,g6=/^(?:0|[1-9]\d*)$/;function y6(t,e){var r=typeof t;return e=e??m6,!!e&&(r=="number"||r!="symbol"&&g6.test(t))&&t>-1&&t%1==0&&t<e}var Iy=y6,v6=9007199254740991;function b6(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=v6}var Oy=b6,_6=vn,w6=Oy,x6=bn,A6="[object Arguments]",E6="[object Array]",T6="[object Boolean]",S6="[object Date]",P6="[object Error]",I6="[object Function]",O6="[object Map]",C6="[object Number]",R6="[object Object]",k6="[object RegExp]",N6="[object Set]",$6="[object String]",j6="[object WeakMap]",D6="[object ArrayBuffer]",M6="[object DataView]",L6="[object Float32Array]",F6="[object Float64Array]",V6="[object Int8Array]",B6="[object Int16Array]",U6="[object Int32Array]",q6="[object Uint8Array]",W6="[object Uint8ClampedArray]",z6="[object Uint16Array]",H6="[object Uint32Array]",Ve={};Ve[L6]=Ve[F6]=Ve[V6]=Ve[B6]=Ve[U6]=Ve[q6]=Ve[W6]=Ve[z6]=Ve[H6]=!0;Ve[A6]=Ve[E6]=Ve[D6]=Ve[T6]=Ve[M6]=Ve[S6]=Ve[P6]=Ve[I6]=Ve[O6]=Ve[C6]=Ve[R6]=Ve[k6]=Ve[N6]=Ve[$6]=Ve[j6]=!1;function K6(t){return x6(t)&&w6(t.length)&&!!Ve[_6(t)]}var G6=K6;function Y6(t){return function(e){return t(e)}}var WS=Y6,xl={exports:{}};xl.exports;(function(t,e){var r=Q1,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===n,a=o&&r.process,s=function(){try{var c=i&&i.require&&i.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();t.exports=s})(xl,xl.exports);var X6=xl.exports,Q6=G6,J6=WS,w_=X6,x_=w_&&w_.isTypedArray,Z6=x_?J6(x_):Q6,zS=Z6,e9=n6,t9=Py,r9=Ut,n9=qS,i9=Iy,o9=zS,a9=Object.prototype,s9=a9.hasOwnProperty;function c9(t,e){var r=r9(t),n=!r&&t9(t),i=!r&&!n&&n9(t),o=!r&&!n&&!i&&o9(t),a=r||n||i||o,s=a?e9(t.length,String):[],c=s.length;for(var u in t)(e||s9.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||i9(u,c)))&&s.push(u);return s}var u9=c9,l9=Object.prototype;function f9(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||l9;return t===r}var h9=f9;function d9(t,e){return function(r){return t(e(r))}}var HS=d9,p9=HS,m9=p9(Object.keys,Object),g9=m9,y9=h9,v9=g9,b9=Object.prototype,_9=b9.hasOwnProperty;function w9(t){if(!y9(t))return v9(t);var e=[];for(var r in Object(t))_9.call(t,r)&&r!="constructor"&&e.push(r);return e}var x9=w9,A9=ly,E9=Oy;function T9(t){return t!=null&&E9(t.length)&&!A9(t)}var jc=T9,S9=u9,P9=x9,I9=jc;function O9(t){return I9(t)?S9(t):P9(t)}var ph=O9,C9=z3,R9=t6,k9=ph;function N9(t){return C9(t,k9,R9)}var $9=N9,A_=$9,j9=1,D9=Object.prototype,M9=D9.hasOwnProperty;function L9(t,e,r,n,i,o){var a=r&j9,s=A_(t),c=s.length,u=A_(e),l=u.length;if(c!=l&&!a)return!1;for(var f=c;f--;){var d=s[f];if(!(a?d in e:M9.call(e,d)))return!1}var p=o.get(t),m=o.get(e);if(p&&m)return p==e&&m==t;var y=!0;o.set(t,e),o.set(e,t);for(var g=a;++f<c;){d=s[f];var A=t[d],T=e[d];if(n)var P=a?n(T,A,d,e,t,o):n(A,T,d,t,e,o);if(!(P===void 0?A===T||i(A,T,r,n,o):P)){y=!1;break}g||(g=d=="constructor")}if(y&&!g){var C=t.constructor,x=e.constructor;C!=x&&"constructor"in t&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof x=="function"&&x instanceof x)&&(y=!1)}return o.delete(t),o.delete(e),y}var F9=L9,V9=Xi,B9=Vr,U9=V9(B9,"DataView"),q9=U9,W9=Xi,z9=Vr,H9=W9(z9,"Promise"),K9=H9,G9=Xi,Y9=Vr,X9=G9(Y9,"Set"),KS=X9,Q9=Xi,J9=Vr,Z9=Q9(J9,"WeakMap"),eq=Z9,Up=q9,qp=hy,Wp=K9,zp=KS,Hp=eq,GS=vn,xa=Z1,E_="[object Map]",tq="[object Object]",T_="[object Promise]",S_="[object Set]",P_="[object WeakMap]",I_="[object DataView]",rq=xa(Up),nq=xa(qp),iq=xa(Wp),oq=xa(zp),aq=xa(Hp),gi=GS;(Up&&gi(new Up(new ArrayBuffer(1)))!=I_||qp&&gi(new qp)!=E_||Wp&&gi(Wp.resolve())!=T_||zp&&gi(new zp)!=S_||Hp&&gi(new Hp)!=P_)&&(gi=function(t){var e=GS(t),r=e==tq?t.constructor:void 0,n=r?xa(r):"";if(n)switch(n){case rq:return I_;case nq:return E_;case iq:return T_;case oq:return S_;case aq:return P_}return e});var sq=gi,Pd=DS,cq=VS,uq=V3,lq=F9,O_=sq,C_=Ut,R_=qS,fq=zS,hq=1,k_="[object Arguments]",N_="[object Array]",yu="[object Object]",dq=Object.prototype,$_=dq.hasOwnProperty;function pq(t,e,r,n,i,o){var a=C_(t),s=C_(e),c=a?N_:O_(t),u=s?N_:O_(e);c=c==k_?yu:c,u=u==k_?yu:u;var l=c==yu,f=u==yu,d=c==u;if(d&&R_(t)){if(!R_(e))return!1;a=!0,l=!1}if(d&&!l)return o||(o=new Pd),a||fq(t)?cq(t,e,r,n,i,o):uq(t,e,c,r,n,i,o);if(!(r&hq)){var p=l&&$_.call(t,"__wrapped__"),m=f&&$_.call(e,"__wrapped__");if(p||m){var y=p?t.value():t,g=m?e.value():e;return o||(o=new Pd),i(y,g,r,n,o)}}return d?(o||(o=new Pd),lq(t,e,r,n,i,o)):!1}var mq=pq,gq=mq,j_=bn;function YS(t,e,r,n,i){return t===e?!0:t==null||e==null||!j_(t)&&!j_(e)?t!==t&&e!==e:gq(t,e,r,n,YS,i)}var Cy=YS,yq=DS,vq=Cy,bq=1,_q=2;function wq(t,e,r,n){var i=r.length,o=i,a=!n;if(t==null)return!o;for(t=Object(t);i--;){var s=r[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=r[i];var c=s[0],u=t[c],l=s[1];if(a&&s[2]){if(u===void 0&&!(c in t))return!1}else{var f=new yq;if(n)var d=n(u,l,c,t,e,f);if(!(d===void 0?vq(l,u,bq|_q,n,f):d))return!1}}return!0}var xq=wq,Aq=ti;function Eq(t){return t===t&&!Aq(t)}var XS=Eq,Tq=XS,Sq=ph;function Pq(t){for(var e=Sq(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Tq(i)]}return e}var Iq=Pq;function Oq(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var QS=Oq,Cq=xq,Rq=Iq,kq=QS;function Nq(t){var e=Rq(t);return e.length==1&&e[0][2]?kq(e[0][0],e[0][1]):function(r){return r===t||Cq(r,t,e)}}var $q=Nq;function jq(t,e){return t!=null&&e in Object(t)}var Dq=jq,Mq=iS,Lq=Py,Fq=Ut,Vq=Iy,Bq=Oy,Uq=Zf;function qq(t,e,r){e=Mq(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var a=Uq(e[n]);if(!(o=t!=null&&r(t,a)))break;t=t[a]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&Bq(i)&&Vq(a,i)&&(Fq(t)||Lq(t)))}var Wq=qq,zq=Dq,Hq=Wq;function Kq(t,e){return t!=null&&Hq(t,e,zq)}var Gq=Kq,Yq=Cy,Xq=oS,Qq=Gq,Jq=uy,Zq=XS,eW=QS,tW=Zf,rW=1,nW=2;function iW(t,e){return Jq(t)&&Zq(e)?eW(tW(t),e):function(r){var n=Xq(r,t);return n===void 0&&n===e?Qq(r,t):Yq(e,n,rW|nW)}}var oW=iW;function aW(t){return t}var Aa=aW;function sW(t){return function(e){return e==null?void 0:e[t]}}var cW=sW,uW=gy;function lW(t){return function(e){return uW(e,t)}}var fW=lW,hW=cW,dW=fW,pW=uy,mW=Zf;function gW(t){return pW(t)?hW(mW(t)):dW(t)}var yW=gW,vW=$q,bW=oW,_W=Aa,wW=Ut,xW=yW;function AW(t){return typeof t=="function"?t:t==null?_W:typeof t=="object"?wW(t)?bW(t[0],t[1]):vW(t):xW(t)}var Br=AW;function EW(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var JS=EW;function TW(t){return t!==t}var SW=TW;function PW(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var IW=PW,OW=JS,CW=SW,RW=IW;function kW(t,e,r){return e===e?RW(t,e,r):OW(t,CW,r)}var NW=kW,$W=NW;function jW(t,e){var r=t==null?0:t.length;return!!r&&$W(t,e,0)>-1}var DW=jW;function MW(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var LW=MW;function FW(){}var VW=FW,Id=KS,BW=VW,UW=Sy,qW=1/0,WW=Id&&1/UW(new Id([,-0]))[1]==qW?function(t){return new Id(t)}:BW,zW=WW,HW=MS,KW=DW,GW=LW,YW=FS,XW=zW,QW=Sy,JW=200;function ZW(t,e,r){var n=-1,i=KW,o=t.length,a=!0,s=[],c=s;if(r)a=!1,i=GW;else if(o>=JW){var u=e?null:XW(t);if(u)return QW(u);a=!1,i=YW,c=new HW}else c=e?[]:s;e:for(;++n<o;){var l=t[n],f=e?e(l):l;if(l=r||l!==0?l:0,a&&f===f){for(var d=c.length;d--;)if(c[d]===f)continue e;e&&c.push(f),s.push(l)}else i(c,f,r)||(c!==s&&c.push(f),s.push(l))}return s}var ez=ZW,tz=Br,rz=ez;function nz(t,e){return t&&t.length?rz(t,tz(e)):[]}var iz=nz;const D_=ke(iz);function ZS(t,e,r){return e===!0?D_(t,r):ue(e)?D_(t,e):t}function Mo(t){"@babel/helpers - typeof";return Mo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mo(t)}var oz=["ref"];function M_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?M_(Object(r),!0).forEach(function(n){mh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M_(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function az(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tP(n.key),n)}}function sz(t,e,r){return e&&L_(t.prototype,e),r&&L_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function cz(t,e,r){return e=Al(e),uz(t,eP()?Reflect.construct(e,r||[],Al(t).constructor):e.apply(t,r))}function uz(t,e){if(e&&(Mo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lz(t)}function lz(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eP=function(){return!!t})()}function Al(t){return Al=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Al(t)}function fz(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kp(t,e)}function Kp(t,e){return Kp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Kp(t,e)}function mh(t,e,r){return e=tP(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tP(t){var e=hz(t,"string");return Mo(e)=="symbol"?e:e+""}function hz(t,e){if(Mo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Mo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dz(t,e){if(t==null)return{};var r=pz(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function pz(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function mz(t){return t.value}function gz(t,e){if(j.isValidElement(t))return j.cloneElement(t,e);if(typeof t=="function")return j.createElement(t,e);e.ref;var r=dz(e,oz);return j.createElement(Ty,r)}var F_=1,Er=function(t){function e(){var r;az(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=cz(this,e,[].concat(i)),mh(r,"lastBoundingBox",{width:-1,height:-1}),r}return fz(e,t),sz(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>F_||Math.abs(i.height-this.lastBoundingBox.height)>F_)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Hr({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,o=i.layout,a=i.align,s=i.verticalAlign,c=i.margin,u=i.chartWidth,l=i.chartHeight,f,d;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(a==="center"&&o==="vertical"){var p=this.getBBoxSnapshot();f={left:((u||0)-p.width)/2}}else f=a==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(s==="middle"){var m=this.getBBoxSnapshot();d={top:((l||0)-m.height)/2}}else d=s==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Hr(Hr({},f),d)}},{key:"render",value:function(){var n=this,i=this.props,o=i.content,a=i.width,s=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,l=i.payload,f=Hr(Hr({position:"absolute",width:a||"auto",height:s||"auto"},this.getDefaultPosition(c)),c);return j.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){n.wrapperNode=p}},gz(o,Hr(Hr({},this.props),{},{payload:ZS(l,u,mz)})))}}],[{key:"getWithHeight",value:function(n,i){var o=Hr(Hr({},this.defaultProps),n.props),a=o.layout;return a==="vertical"&&G(n.props.height)?{height:n.props.height}:a==="horizontal"?{width:n.props.width||i}:null}}])}(D.PureComponent);mh(Er,"displayName","Legend");mh(Er,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var V_=Nc,yz=Py,vz=Ut,B_=V_?V_.isConcatSpreadable:void 0;function bz(t){return vz(t)||yz(t)||!!(B_&&t&&t[B_])}var _z=bz,wz=BS,xz=_z;function rP(t,e,r,n,i){var o=-1,a=t.length;for(r||(r=xz),i||(i=[]);++o<a;){var s=t[o];e>0&&r(s)?e>1?rP(s,e-1,r,n,i):wz(i,s):n||(i[i.length]=s)}return i}var nP=rP;function Az(t){return function(e,r,n){for(var i=-1,o=Object(e),a=n(e),s=a.length;s--;){var c=a[t?s:++i];if(r(o[c],c,o)===!1)break}return e}}var Ez=Az,Tz=Ez,Sz=Tz(),Pz=Sz,Iz=Pz,Oz=ph;function Cz(t,e){return t&&Iz(t,e,Oz)}var iP=Cz,Rz=jc;function kz(t,e){return function(r,n){if(r==null)return r;if(!Rz(r))return t(r,n);for(var i=r.length,o=e?i:-1,a=Object(r);(e?o--:++o<i)&&n(a[o],o,a)!==!1;);return r}}var Nz=kz,$z=iP,jz=Nz,Dz=jz($z),Ry=Dz,Mz=Ry,Lz=jc;function Fz(t,e){var r=-1,n=Lz(t)?Array(t.length):[];return Mz(t,function(i,o,a){n[++r]=e(i,o,a)}),n}var oP=Fz;function Vz(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var Bz=Vz,U_=ma;function Uz(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=U_(t),a=e!==void 0,s=e===null,c=e===e,u=U_(e);if(!s&&!u&&!o&&t>e||o&&a&&c&&!s&&!u||n&&a&&c||!r&&c||!i)return 1;if(!n&&!o&&!u&&t<e||u&&r&&i&&!n&&!o||s&&r&&i||!a&&i||!c)return-1}return 0}var qz=Uz,Wz=qz;function zz(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,a=i.length,s=r.length;++n<a;){var c=Wz(i[n],o[n]);if(c){if(n>=s)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return t.index-e.index}var Hz=zz,Od=my,Kz=gy,Gz=Br,Yz=oP,Xz=Bz,Qz=WS,Jz=Hz,Zz=Aa,eH=Ut;function tH(t,e,r){e.length?e=Od(e,function(o){return eH(o)?function(a){return Kz(a,o.length===1?o[0]:o)}:o}):e=[Zz];var n=-1;e=Od(e,Qz(Gz));var i=Yz(t,function(o,a,s){var c=Od(e,function(u){return u(o)});return{criteria:c,index:++n,value:o}});return Xz(i,function(o,a){return Jz(o,a,r)})}var rH=tH;function nH(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var iH=nH,oH=iH,q_=Math.max;function aH(t,e,r){return e=q_(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=q_(n.length-e,0),a=Array(o);++i<o;)a[i]=n[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=n[i];return s[e]=r(a),oH(t,this,s)}}var sH=aH;function cH(t){return function(){return t}}var uH=cH,lH=Xi,fH=function(){try{var t=lH(Object,"defineProperty");return t({},"",{}),t}catch{}}(),aP=fH,hH=uH,W_=aP,dH=Aa,pH=W_?function(t,e){return W_(t,"toString",{configurable:!0,enumerable:!1,value:hH(e),writable:!0})}:dH,mH=pH,gH=800,yH=16,vH=Date.now;function bH(t){var e=0,r=0;return function(){var n=vH(),i=yH-(n-r);if(r=n,i>0){if(++e>=gH)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var _H=bH,wH=mH,xH=_H,AH=xH(wH),EH=AH,TH=Aa,SH=sH,PH=EH;function IH(t,e){return PH(SH(t,e,TH),t+"")}var OH=IH,CH=fy,RH=jc,kH=Iy,NH=ti;function $H(t,e,r){if(!NH(r))return!1;var n=typeof e;return(n=="number"?RH(r)&&kH(e,r.length):n=="string"&&e in r)?CH(r[e],t):!1}var gh=$H,jH=nP,DH=rH,MH=OH,z_=gh,LH=MH(function(t,e){if(t==null)return[];var r=e.length;return r>1&&z_(t,e[0],e[1])?e=[]:r>2&&z_(e[0],e[1],e[2])&&(e=[e[0]]),DH(t,jH(e,1),[])}),FH=LH;const ky=ke(FH);function Ds(t){"@babel/helpers - typeof";return Ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ds(t)}function Gp(){return Gp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gp.apply(this,arguments)}function VH(t,e){return WH(t)||qH(t,e)||UH(t,e)||BH()}function BH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UH(t,e){if(t){if(typeof t=="string")return H_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H_(t,e)}}function H_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qH(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function WH(t){if(Array.isArray(t))return t}function K_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Cd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?K_(Object(r),!0).forEach(function(n){zH(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K_(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zH(t,e,r){return e=HH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HH(t){var e=KH(t,"string");return Ds(e)=="symbol"?e:e+""}function KH(t,e){if(Ds(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ds(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GH(t){return Array.isArray(t)&&ot(t[0])&&ot(t[1])?t.join(" ~ "):t}var YH=function(e){var r=e.separator,n=r===void 0?" : ":r,i=e.contentStyle,o=i===void 0?{}:i,a=e.itemStyle,s=a===void 0?{}:a,c=e.labelStyle,u=c===void 0?{}:c,l=e.payload,f=e.formatter,d=e.itemSorter,p=e.wrapperClassName,m=e.labelClassName,y=e.label,g=e.labelFormatter,A=e.accessibilityLayer,T=A===void 0?!1:A,P=function(){if(l&&l.length){var N={padding:0,margin:0},R=(d?ky(l,d):l).map(function(V,F){if(V.type==="none")return null;var U=Cd({display:"block",paddingTop:4,paddingBottom:4,color:V.color||"#000"},s),W=V.formatter||f||GH,K=V.value,Y=V.name,ne=K,oe=Y;if(W&&ne!=null&&oe!=null){var J=W(K,Y,V,F,l);if(Array.isArray(J)){var Q=VH(J,2);ne=Q[0],oe=Q[1]}else ne=J}return j.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(F),style:U},ot(oe)?j.createElement("span",{className:"recharts-tooltip-item-name"},oe):null,ot(oe)?j.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,j.createElement("span",{className:"recharts-tooltip-item-value"},ne),j.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return j.createElement("ul",{className:"recharts-tooltip-item-list",style:N},R)}return null},C=Cd({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),x=Cd({margin:0},u),I=!he(y),b=I?y:"",w=ge("recharts-default-tooltip",p),S=ge("recharts-tooltip-label",m);I&&g&&l!==void 0&&l!==null&&(b=g(y,l));var k=T?{role:"status","aria-live":"assertive"}:{};return j.createElement("div",Gp({className:w,style:C},k),j.createElement("p",{className:S,style:x},j.isValidElement(b)?b:"".concat(b)),P())};function Ms(t){"@babel/helpers - typeof";return Ms=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ms(t)}function vu(t,e,r){return e=XH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XH(t){var e=QH(t,"string");return Ms(e)=="symbol"?e:e+""}function QH(t,e){if(Ms(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ms(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ha="recharts-tooltip-wrapper",JH={visibility:"hidden"};function ZH(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return ge(Ha,vu(vu(vu(vu({},"".concat(Ha,"-right"),G(r)&&e&&G(e.x)&&r>=e.x),"".concat(Ha,"-left"),G(r)&&e&&G(e.x)&&r<e.x),"".concat(Ha,"-bottom"),G(n)&&e&&G(e.y)&&n>=e.y),"".concat(Ha,"-top"),G(n)&&e&&G(e.y)&&n<e.y))}function G_(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,i=t.offsetTopLeft,o=t.position,a=t.reverseDirection,s=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(o&&G(o[n]))return o[n];var l=r[n]-s-i,f=r[n]+i;if(e[n])return a[n]?l:f;if(a[n]){var d=l,p=c[n];return d<p?Math.max(f,c[n]):Math.max(l,c[n])}var m=f+s,y=c[n]+u;return m>y?Math.max(l,c[n]):Math.max(f,c[n])}function eK(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function tK(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,i=t.position,o=t.reverseDirection,a=t.tooltipBox,s=t.useTranslate3d,c=t.viewBox,u,l,f;return a.height>0&&a.width>0&&r?(l=G_({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:a.width,viewBox:c,viewBoxDimension:c.width}),f=G_({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:a.height,viewBox:c,viewBoxDimension:c.height}),u=eK({translateX:l,translateY:f,useTranslate3d:s})):u=JH,{cssProperties:u,cssClasses:ZH({translateX:l,translateY:f,coordinate:r})}}function Lo(t){"@babel/helpers - typeof";return Lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lo(t)}function Y_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function X_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Y_(Object(r),!0).forEach(function(n){Xp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y_(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cP(n.key),n)}}function iK(t,e,r){return e&&nK(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function oK(t,e,r){return e=El(e),aK(t,sP()?Reflect.construct(e,r||[],El(t).constructor):e.apply(t,r))}function aK(t,e){if(e&&(Lo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sK(t)}function sK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sP=function(){return!!t})()}function El(t){return El=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},El(t)}function cK(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yp(t,e)}function Yp(t,e){return Yp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Yp(t,e)}function Xp(t,e,r){return e=cP(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cP(t){var e=uK(t,"string");return Lo(e)=="symbol"?e:e+""}function uK(t,e){if(Lo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Lo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Q_=1,lK=function(t){function e(){var r;rK(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=oK(this,e,[].concat(i)),Xp(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Xp(r,"handleKeyDown",function(a){if(a.key==="Escape"){var s,c,u,l;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&s!==void 0?s:0,y:(u=(l=r.props.coordinate)===null||l===void 0?void 0:l.y)!==null&&u!==void 0?u:0}})}}),r}return cK(e,t),iK(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>Q_||Math.abs(n.height-this.state.lastBoundingBox.height)>Q_)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,c=i.animationEasing,u=i.children,l=i.coordinate,f=i.hasPayload,d=i.isAnimationActive,p=i.offset,m=i.position,y=i.reverseDirection,g=i.useTranslate3d,A=i.viewBox,T=i.wrapperStyle,P=tK({allowEscapeViewBox:a,coordinate:l,offsetTopLeft:p,position:m,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:A}),C=P.cssClasses,x=P.cssProperties,I=X_(X_({transition:d&&o?"transform ".concat(s,"ms ").concat(c):void 0},x),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&f?"visible":"hidden",position:"absolute",top:0,left:0},T);return j.createElement("div",{tabIndex:-1,className:C,style:I,ref:function(w){n.wrapperNode=w}},u)}}])}(D.PureComponent),fK=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},gr={isSsr:fK(),get:function(e){return gr[e]},set:function(e,r){if(typeof e=="string")gr[e]=r;else{var n=Object.keys(e);n&&n.length&&n.forEach(function(i){gr[i]=e[i]})}}};function Fo(t){"@babel/helpers - typeof";return Fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fo(t)}function J_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Z_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?J_(Object(r),!0).forEach(function(n){Ny(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J_(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lP(n.key),n)}}function pK(t,e,r){return e&&dK(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function mK(t,e,r){return e=Tl(e),gK(t,uP()?Reflect.construct(e,r||[],Tl(t).constructor):e.apply(t,r))}function gK(t,e){if(e&&(Fo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yK(t)}function yK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uP=function(){return!!t})()}function Tl(t){return Tl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tl(t)}function vK(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qp(t,e)}function Qp(t,e){return Qp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Qp(t,e)}function Ny(t,e,r){return e=lP(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lP(t){var e=bK(t,"string");return Fo(e)=="symbol"?e:e+""}function bK(t,e){if(Fo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Fo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _K(t){return t.dataKey}function wK(t,e){return j.isValidElement(t)?j.cloneElement(t,e):typeof t=="function"?j.createElement(t,e):j.createElement(YH,e)}var Kt=function(t){function e(){return hK(this,e),mK(this,e,arguments)}return vK(e,t),pK(e,[{key:"render",value:function(){var n=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,c=i.animationEasing,u=i.content,l=i.coordinate,f=i.filterNull,d=i.isAnimationActive,p=i.offset,m=i.payload,y=i.payloadUniqBy,g=i.position,A=i.reverseDirection,T=i.useTranslate3d,P=i.viewBox,C=i.wrapperStyle,x=m??[];f&&x.length&&(x=ZS(m.filter(function(b){return b.value!=null&&(b.hide!==!0||n.props.includeHidden)}),y,_K));var I=x.length>0;return j.createElement(lK,{allowEscapeViewBox:a,animationDuration:s,animationEasing:c,isAnimationActive:d,active:o,coordinate:l,hasPayload:I,offset:p,position:g,reverseDirection:A,useTranslate3d:T,viewBox:P,wrapperStyle:C},wK(u,Z_(Z_({},this.props),{},{payload:x})))}}])}(D.PureComponent);Ny(Kt,"displayName","Tooltip");Ny(Kt,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!gr.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var xK=Vr,AK=function(){return xK.Date.now()},EK=AK,TK=/\s/;function SK(t){for(var e=t.length;e--&&TK.test(t.charAt(e)););return e}var PK=SK,IK=PK,OK=/^\s+/;function CK(t){return t&&t.slice(0,IK(t)+1).replace(OK,"")}var RK=CK,kK=RK,ew=ti,NK=ma,tw=NaN,$K=/^[-+]0x[0-9a-f]+$/i,jK=/^0b[01]+$/i,DK=/^0o[0-7]+$/i,MK=parseInt;function LK(t){if(typeof t=="number")return t;if(NK(t))return tw;if(ew(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ew(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=kK(t);var r=jK.test(t);return r||DK.test(t)?MK(t.slice(2),r?2:8):$K.test(t)?tw:+t}var fP=LK,FK=ti,Rd=EK,rw=fP,VK="Expected a function",BK=Math.max,UK=Math.min;function qK(t,e,r){var n,i,o,a,s,c,u=0,l=!1,f=!1,d=!0;if(typeof t!="function")throw new TypeError(VK);e=rw(e)||0,FK(r)&&(l=!!r.leading,f="maxWait"in r,o=f?BK(rw(r.maxWait)||0,e):o,d="trailing"in r?!!r.trailing:d);function p(I){var b=n,w=i;return n=i=void 0,u=I,a=t.apply(w,b),a}function m(I){return u=I,s=setTimeout(A,e),l?p(I):a}function y(I){var b=I-c,w=I-u,S=e-b;return f?UK(S,o-w):S}function g(I){var b=I-c,w=I-u;return c===void 0||b>=e||b<0||f&&w>=o}function A(){var I=Rd();if(g(I))return T(I);s=setTimeout(A,y(I))}function T(I){return s=void 0,d&&n?p(I):(n=i=void 0,a)}function P(){s!==void 0&&clearTimeout(s),u=0,n=c=i=s=void 0}function C(){return s===void 0?a:T(Rd())}function x(){var I=Rd(),b=g(I);if(n=arguments,i=this,c=I,b){if(s===void 0)return m(c);if(f)return clearTimeout(s),s=setTimeout(A,e),p(c)}return s===void 0&&(s=setTimeout(A,e)),a}return x.cancel=P,x.flush=C,x}var WK=qK,zK=WK,HK=ti,KK="Expected a function";function GK(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(KK);return HK(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),zK(t,e,{leading:n,maxWait:e,trailing:i})}var YK=GK;const hP=ke(YK);function Ls(t){"@babel/helpers - typeof";return Ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ls(t)}function nw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function bu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nw(Object(r),!0).forEach(function(n){XK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XK(t,e,r){return e=QK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QK(t){var e=JK(t,"string");return Ls(e)=="symbol"?e:e+""}function JK(t,e){if(Ls(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ls(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZK(t,e){return n7(t)||r7(t,e)||t7(t,e)||e7()}function e7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t7(t,e){if(t){if(typeof t=="string")return iw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iw(t,e)}}function iw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function r7(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function n7(t){if(Array.isArray(t))return t}var _u=D.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,i=n===void 0?{width:-1,height:-1}:n,o=t.width,a=o===void 0?"100%":o,s=t.height,c=s===void 0?"100%":s,u=t.minWidth,l=u===void 0?0:u,f=t.minHeight,d=t.maxHeight,p=t.children,m=t.debounce,y=m===void 0?0:m,g=t.id,A=t.className,T=t.onResize,P=t.style,C=P===void 0?{}:P,x=D.useRef(null),I=D.useRef();I.current=T,D.useImperativeHandle(e,function(){return Object.defineProperty(x.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),x.current},configurable:!0})});var b=D.useState({containerWidth:i.width,containerHeight:i.height}),w=ZK(b,2),S=w[0],k=w[1],O=D.useCallback(function(R,V){k(function(F){var U=Math.round(R),W=Math.round(V);return F.containerWidth===U&&F.containerHeight===W?F:{containerWidth:U,containerHeight:W}})},[]);D.useEffect(function(){var R=function(Y){var ne,oe=Y[0].contentRect,J=oe.width,Q=oe.height;O(J,Q),(ne=I.current)===null||ne===void 0||ne.call(I,J,Q)};y>0&&(R=hP(R,y,{trailing:!0,leading:!1}));var V=new ResizeObserver(R),F=x.current.getBoundingClientRect(),U=F.width,W=F.height;return O(U,W),V.observe(x.current),function(){V.disconnect()}},[O,y]);var N=D.useMemo(function(){var R=S.containerWidth,V=S.containerHeight;if(R<0||V<0)return null;mr(xi(a)||xi(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,c),mr(!r||r>0,"The aspect(%s) must be greater than zero.",r);var F=xi(a)?R:a,U=xi(c)?V:c;r&&r>0&&(F?U=F/r:U&&(F=U*r),d&&U>d&&(U=d)),mr(F>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,F,U,a,c,l,f,r);var W=!Array.isArray(p)&&on(p.type).endsWith("Chart");return j.Children.map(p,function(K){return j.isValidElement(K)?D.cloneElement(K,bu({width:F,height:U},W?{style:bu({height:"100%",width:"100%",maxHeight:U,maxWidth:F},K.props.style)}:{})):K})},[r,p,c,d,f,l,S,a]);return j.createElement("div",{id:g?"".concat(g):void 0,className:ge("recharts-responsive-container",A),style:bu(bu({},C),{},{width:a,height:c,minWidth:l,minHeight:f,maxHeight:d}),ref:x},N)}),yh=function(e){return null};yh.displayName="Cell";function Fs(t){"@babel/helpers - typeof";return Fs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fs(t)}function ow(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Jp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ow(Object(r),!0).forEach(function(n){i7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ow(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function i7(t,e,r){return e=o7(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o7(t){var e=a7(t,"string");return Fs(e)=="symbol"?e:e+""}function a7(t,e){if(Fs(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Fs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oo={widthCache:{},cacheCount:0},s7=2e3,c7={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},aw="recharts_measurement_span";function u7(t){var e=Jp({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var ms=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||gr.isSsr)return{width:0,height:0};var n=u7(r),i=JSON.stringify({text:e,copyStyle:n});if(oo.widthCache[i])return oo.widthCache[i];try{var o=document.getElementById(aw);o||(o=document.createElement("span"),o.setAttribute("id",aw),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=Jp(Jp({},c7),n);Object.assign(o.style,a),o.textContent="".concat(e);var s=o.getBoundingClientRect(),c={width:s.width,height:s.height};return oo.widthCache[i]=c,++oo.cacheCount>s7&&(oo.cacheCount=0,oo.widthCache={}),c}catch{return{width:0,height:0}}},l7=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Vs(t){"@babel/helpers - typeof";return Vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vs(t)}function Sl(t,e){return p7(t)||d7(t,e)||h7(t,e)||f7()}function f7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h7(t,e){if(t){if(typeof t=="string")return sw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sw(t,e)}}function sw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function d7(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function p7(t){if(Array.isArray(t))return t}function m7(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y7(n.key),n)}}function g7(t,e,r){return e&&cw(t.prototype,e),r&&cw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y7(t){var e=v7(t,"string");return Vs(e)=="symbol"?e:e+""}function v7(t,e){if(Vs(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var uw=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,lw=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,b7=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,_7=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,dP={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},w7=Object.keys(dP),mo="NaN";function x7(t,e){return t*dP[e]}var wu=function(){function t(e,r){m7(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!b7.test(r)&&(this.num=NaN,this.unit=""),w7.includes(r)&&(this.num=x7(e,r),this.unit="px")}return g7(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=_7.exec(r))!==null&&n!==void 0?n:[],o=Sl(i,3),a=o[1],s=o[2];return new t(parseFloat(a),s??"")}}])}();function pP(t){if(t.includes(mo))return mo;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=uw.exec(e))!==null&&r!==void 0?r:[],i=Sl(n,4),o=i[1],a=i[2],s=i[3],c=wu.parse(o??""),u=wu.parse(s??""),l=a==="*"?c.multiply(u):c.divide(u);if(l.isNaN())return mo;e=e.replace(uw,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,d=(f=lw.exec(e))!==null&&f!==void 0?f:[],p=Sl(d,4),m=p[1],y=p[2],g=p[3],A=wu.parse(m??""),T=wu.parse(g??""),P=y==="+"?A.add(T):A.subtract(T);if(P.isNaN())return mo;e=e.replace(lw,P.toString())}return e}var fw=/\(([^()]*)\)/;function A7(t){for(var e=t;e.includes("(");){var r=fw.exec(e),n=Sl(r,2),i=n[1];e=e.replace(fw,pP(i))}return e}function E7(t){var e=t.replace(/\s+/g,"");return e=A7(e),e=pP(e),e}function T7(t){try{return E7(t)}catch{return mo}}function kd(t){var e=T7(t.slice(5,-1));return e===mo?"":e}var S7=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],P7=["dx","dy","angle","className","breakAll"];function Zp(){return Zp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zp.apply(this,arguments)}function hw(t,e){if(t==null)return{};var r=I7(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function I7(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function dw(t,e){return k7(t)||R7(t,e)||C7(t,e)||O7()}function O7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C7(t,e){if(t){if(typeof t=="string")return pw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pw(t,e)}}function pw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function R7(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function k7(t){if(Array.isArray(t))return t}var mP=/[ \f\n\r\t\v\u2028\u2029]+/,gP=function(e){var r=e.children,n=e.breakAll,i=e.style;try{var o=[];he(r)||(n?o=r.toString().split(""):o=r.toString().split(mP));var a=o.map(function(c){return{word:c,width:ms(c,i).width}}),s=n?0:ms(" ",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}},N7=function(e,r,n,i,o){var a=e.maxLines,s=e.children,c=e.style,u=e.breakAll,l=G(a),f=s,d=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F.reduce(function(U,W){var K=W.word,Y=W.width,ne=U[U.length-1];if(ne&&(i==null||o||ne.width+Y+n<Number(i)))ne.words.push(K),ne.width+=Y+n;else{var oe={words:[K],width:Y};U.push(oe)}return U},[])},p=d(r),m=function(F){return F.reduce(function(U,W){return U.width>W.width?U:W})};if(!l)return p;for(var y="…",g=function(F){var U=f.slice(0,F),W=gP({breakAll:u,style:c,children:U+y}).wordsWithComputedWidth,K=d(W),Y=K.length>a||m(K).width>Number(i);return[Y,K]},A=0,T=f.length-1,P=0,C;A<=T&&P<=f.length-1;){var x=Math.floor((A+T)/2),I=x-1,b=g(I),w=dw(b,2),S=w[0],k=w[1],O=g(x),N=dw(O,1),R=N[0];if(!S&&!R&&(A=x+1),S&&R&&(T=x-1),!S&&R){C=k;break}P++}return C||p},mw=function(e){var r=he(e)?[]:e.toString().split(mP);return[{words:r}]},$7=function(e){var r=e.width,n=e.scaleToFit,i=e.children,o=e.style,a=e.breakAll,s=e.maxLines;if((r||n)&&!gr.isSsr){var c,u,l=gP({breakAll:a,children:i,style:o});if(l){var f=l.wordsWithComputedWidth,d=l.spaceWidth;c=f,u=d}else return mw(i);return N7({breakAll:a,children:i,maxLines:s,style:o},c,u,r,n)}return mw(i)},gw="#808080",Vi=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,o=i===void 0?0:i,a=e.lineHeight,s=a===void 0?"1em":a,c=e.capHeight,u=c===void 0?"0.71em":c,l=e.scaleToFit,f=l===void 0?!1:l,d=e.textAnchor,p=d===void 0?"start":d,m=e.verticalAnchor,y=m===void 0?"end":m,g=e.fill,A=g===void 0?gw:g,T=hw(e,S7),P=D.useMemo(function(){return $7({breakAll:T.breakAll,children:T.children,maxLines:T.maxLines,scaleToFit:f,style:T.style,width:T.width})},[T.breakAll,T.children,T.maxLines,f,T.style,T.width]),C=T.dx,x=T.dy,I=T.angle,b=T.className,w=T.breakAll,S=hw(T,P7);if(!ot(n)||!ot(o))return null;var k=n+(G(C)?C:0),O=o+(G(x)?x:0),N;switch(y){case"start":N=kd("calc(".concat(u,")"));break;case"middle":N=kd("calc(".concat((P.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:N=kd("calc(".concat(P.length-1," * -").concat(s,")"));break}var R=[];if(f){var V=P[0].width,F=T.width;R.push("scale(".concat((G(F)?F/V:1)/V,")"))}return I&&R.push("rotate(".concat(I,", ").concat(k,", ").concat(O,")")),R.length&&(S.transform=R.join(" ")),j.createElement("text",Zp({},ie(S,!0),{x:k,y:O,className:ge("recharts-text",b),textAnchor:p,fill:A.includes("url")?gw:A}),P.map(function(U,W){var K=U.words.join(w?"":" ");return j.createElement("tspan",{x:k,dy:W===0?N:s,key:"".concat(K,"-").concat(W)},K)}))};function Wn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function j7(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $y(t){let e,r,n;t.length!==2?(e=Wn,r=(s,c)=>Wn(t(s),c),n=(s,c)=>t(s)-c):(e=t===Wn||t===j7?t:D7,r=t,n=t);function i(s,c,u=0,l=s.length){if(u<l){if(e(c,c)!==0)return l;do{const f=u+l>>>1;r(s[f],c)<0?u=f+1:l=f}while(u<l)}return u}function o(s,c,u=0,l=s.length){if(u<l){if(e(c,c)!==0)return l;do{const f=u+l>>>1;r(s[f],c)<=0?u=f+1:l=f}while(u<l)}return u}function a(s,c,u=0,l=s.length){const f=i(s,c,u,l-1);return f>u&&n(s[f-1],c)>-n(s[f],c)?f-1:f}return{left:i,center:a,right:o}}function D7(){return 0}function yP(t){return t===null?NaN:+t}function*M7(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const L7=$y(Wn),Dc=L7.right;$y(yP).center;class yw extends Map{constructor(e,r=B7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(vw(this,e))}has(e){return super.has(vw(this,e))}set(e,r){return super.set(F7(this,e),r)}delete(e){return super.delete(V7(this,e))}}function vw({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function F7({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function V7({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function B7(t){return t!==null&&typeof t=="object"?t.valueOf():t}function U7(t=Wn){if(t===Wn)return vP;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function vP(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const q7=Math.sqrt(50),W7=Math.sqrt(10),z7=Math.sqrt(2);function Pl(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),o=n/Math.pow(10,i),a=o>=q7?10:o>=W7?5:o>=z7?2:1;let s,c,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(t*u),c=Math.round(e*u),s/u<t&&++s,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*a,s=Math.round(t/u),c=Math.round(e/u),s*u<t&&++s,c*u>e&&--c),c<s&&.5<=r&&r<2?Pl(t,e,r*2):[s,c,u]}function em(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,o,a]=n?Pl(e,t,r):Pl(t,e,r);if(!(o>=i))return[];const s=o-i+1,c=new Array(s);if(n)if(a<0)for(let u=0;u<s;++u)c[u]=(o-u)/-a;else for(let u=0;u<s;++u)c[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)c[u]=(i+u)/-a;else for(let u=0;u<s;++u)c[u]=(i+u)*a;return c}function tm(t,e,r){return e=+e,t=+t,r=+r,Pl(t,e,r)[2]}function rm(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?tm(e,t,r):tm(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function bw(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function _w(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function bP(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?vP:U7(i);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,l=Math.log(c),f=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(e-u*f/c+d)),m=Math.min(n,Math.floor(e+(c-u)*f/c+d));bP(t,e,p,m,i)}const o=t[e];let a=r,s=n;for(Ka(t,r,e),i(t[n],o)>0&&Ka(t,r,n);a<s;){for(Ka(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}i(t[r],o)===0?Ka(t,r,s):(++s,Ka(t,s,n)),s<=e&&(r=s+1),e<=s&&(n=s-1)}return t}function Ka(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function H7(t,e,r){if(t=Float64Array.from(M7(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return _w(t);if(e>=1)return bw(t);var n,i=(n-1)*e,o=Math.floor(i),a=bw(bP(t,o).subarray(0,o+1)),s=_w(t.subarray(o+1));return a+(s-a)*(i-o)}}function K7(t,e,r=yP){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,o=Math.floor(i),a=+r(t[o],o,t),s=+r(t[o+1],o+1,t);return a+(s-a)*(i-o)}}function G7(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,o=new Array(i);++n<i;)o[n]=t+n*r;return o}function sr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function _n(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const nm=Symbol("implicit");function jy(){var t=new yw,e=[],r=[],n=nm;function i(o){let a=t.get(o);if(a===void 0){if(n!==nm)return n;t.set(o,a=e.push(o)-1)}return r[a%r.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new yw;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(r=Array.from(o),i):r.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return jy(e,r).unknown(n)},sr.apply(i,arguments),i}function Bs(){var t=jy().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,o,a,s=!1,c=0,u=0,l=.5;delete t.unknown;function f(){var d=e().length,p=i<n,m=p?i:n,y=p?n:i;o=(y-m)/Math.max(1,d-c+u*2),s&&(o=Math.floor(o)),m+=(y-m-o*(d-c))*l,a=o*(1-c),s&&(m=Math.round(m),a=Math.round(a));var g=G7(d).map(function(A){return m+o*A});return r(p?g.reverse():g)}return t.domain=function(d){return arguments.length?(e(d),f()):e()},t.range=function(d){return arguments.length?([n,i]=d,n=+n,i=+i,f()):[n,i]},t.rangeRound=function(d){return[n,i]=d,n=+n,i=+i,s=!0,f()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(d){return arguments.length?(s=!!d,f()):s},t.padding=function(d){return arguments.length?(c=Math.min(1,u=+d),f()):c},t.paddingInner=function(d){return arguments.length?(c=Math.min(1,d),f()):c},t.paddingOuter=function(d){return arguments.length?(u=+d,f()):u},t.align=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),f()):l},t.copy=function(){return Bs(e(),[n,i]).round(s).paddingInner(c).paddingOuter(u).align(l)},sr.apply(f(),arguments)}function _P(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return _P(e())},t}function gs(){return _P(Bs.apply(null,arguments).paddingInner(1))}function Dy(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function wP(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Mc(){}var Us=.7,Il=1/Us,To="\\s*([+-]?\\d+)\\s*",qs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",kr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Y7=/^#([0-9a-f]{3,8})$/,X7=new RegExp(`^rgb\\(${To},${To},${To}\\)$`),Q7=new RegExp(`^rgb\\(${kr},${kr},${kr}\\)$`),J7=new RegExp(`^rgba\\(${To},${To},${To},${qs}\\)$`),Z7=new RegExp(`^rgba\\(${kr},${kr},${kr},${qs}\\)$`),e8=new RegExp(`^hsl\\(${qs},${kr},${kr}\\)$`),t8=new RegExp(`^hsla\\(${qs},${kr},${kr},${qs}\\)$`),ww={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Dy(Mc,Ws,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:xw,formatHex:xw,formatHex8:r8,formatHsl:n8,formatRgb:Aw,toString:Aw});function xw(){return this.rgb().formatHex()}function r8(){return this.rgb().formatHex8()}function n8(){return xP(this).formatHsl()}function Aw(){return this.rgb().formatRgb()}function Ws(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Y7.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?Ew(e):r===3?new Ft(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?xu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?xu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=X7.exec(t))?new Ft(e[1],e[2],e[3],1):(e=Q7.exec(t))?new Ft(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=J7.exec(t))?xu(e[1],e[2],e[3],e[4]):(e=Z7.exec(t))?xu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=e8.exec(t))?Pw(e[1],e[2]/100,e[3]/100,1):(e=t8.exec(t))?Pw(e[1],e[2]/100,e[3]/100,e[4]):ww.hasOwnProperty(t)?Ew(ww[t]):t==="transparent"?new Ft(NaN,NaN,NaN,0):null}function Ew(t){return new Ft(t>>16&255,t>>8&255,t&255,1)}function xu(t,e,r,n){return n<=0&&(t=e=r=NaN),new Ft(t,e,r,n)}function i8(t){return t instanceof Mc||(t=Ws(t)),t?(t=t.rgb(),new Ft(t.r,t.g,t.b,t.opacity)):new Ft}function im(t,e,r,n){return arguments.length===1?i8(t):new Ft(t,e,r,n??1)}function Ft(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}Dy(Ft,im,wP(Mc,{brighter(t){return t=t==null?Il:Math.pow(Il,t),new Ft(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Us:Math.pow(Us,t),new Ft(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ft(Ii(this.r),Ii(this.g),Ii(this.b),Ol(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tw,formatHex:Tw,formatHex8:o8,formatRgb:Sw,toString:Sw}));function Tw(){return`#${Ai(this.r)}${Ai(this.g)}${Ai(this.b)}`}function o8(){return`#${Ai(this.r)}${Ai(this.g)}${Ai(this.b)}${Ai((isNaN(this.opacity)?1:this.opacity)*255)}`}function Sw(){const t=Ol(this.opacity);return`${t===1?"rgb(":"rgba("}${Ii(this.r)}, ${Ii(this.g)}, ${Ii(this.b)}${t===1?")":`, ${t})`}`}function Ol(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ii(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ai(t){return t=Ii(t),(t<16?"0":"")+t.toString(16)}function Pw(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new hr(t,e,r,n)}function xP(t){if(t instanceof hr)return new hr(t.h,t.s,t.l,t.opacity);if(t instanceof Mc||(t=Ws(t)),!t)return new hr;if(t instanceof hr)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),o=Math.max(e,r,n),a=NaN,s=o-i,c=(o+i)/2;return s?(e===o?a=(r-n)/s+(r<n)*6:r===o?a=(n-e)/s+2:a=(e-r)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new hr(a,s,c,t.opacity)}function a8(t,e,r,n){return arguments.length===1?xP(t):new hr(t,e,r,n??1)}function hr(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}Dy(hr,a8,wP(Mc,{brighter(t){return t=t==null?Il:Math.pow(Il,t),new hr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Us:Math.pow(Us,t),new hr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Ft(Nd(t>=240?t-240:t+120,i,n),Nd(t,i,n),Nd(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new hr(Iw(this.h),Au(this.s),Au(this.l),Ol(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ol(this.opacity);return`${t===1?"hsl(":"hsla("}${Iw(this.h)}, ${Au(this.s)*100}%, ${Au(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Iw(t){return t=(t||0)%360,t<0?t+360:t}function Au(t){return Math.max(0,Math.min(1,t||0))}function Nd(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const My=t=>()=>t;function s8(t,e){return function(r){return t+r*e}}function c8(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function u8(t){return(t=+t)==1?AP:function(e,r){return r-e?c8(e,r,t):My(isNaN(e)?r:e)}}function AP(t,e){var r=e-t;return r?s8(t,r):My(isNaN(t)?e:t)}const Ow=function t(e){var r=u8(e);function n(i,o){var a=r((i=im(i)).r,(o=im(o)).r),s=r(i.g,o.g),c=r(i.b,o.b),u=AP(i.opacity,o.opacity);return function(l){return i.r=a(l),i.g=s(l),i.b=c(l),i.opacity=u(l),i+""}}return n.gamma=t,n}(1);function l8(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(o){for(i=0;i<r;++i)n[i]=t[i]*(1-o)+e[i]*o;return n}}function f8(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function h8(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),o=new Array(r),a;for(a=0;a<n;++a)i[a]=Ea(t[a],e[a]);for(;a<r;++a)o[a]=e[a];return function(s){for(a=0;a<n;++a)o[a]=i[a](s);return o}}function d8(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Cl(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function p8(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=Ea(t[i],e[i]):n[i]=e[i];return function(o){for(i in r)n[i]=r[i](o);return n}}var om=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$d=new RegExp(om.source,"g");function m8(t){return function(){return t}}function g8(t){return function(e){return t(e)+""}}function y8(t,e){var r=om.lastIndex=$d.lastIndex=0,n,i,o,a=-1,s=[],c=[];for(t=t+"",e=e+"";(n=om.exec(t))&&(i=$d.exec(e));)(o=i.index)>r&&(o=e.slice(r,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:Cl(n,i)})),r=$d.lastIndex;return r<e.length&&(o=e.slice(r),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?g8(c[0].x):m8(e):(e=c.length,function(u){for(var l=0,f;l<e;++l)s[(f=c[l]).i]=f.x(u);return s.join("")})}function Ea(t,e){var r=typeof e,n;return e==null||r==="boolean"?My(e):(r==="number"?Cl:r==="string"?(n=Ws(e))?(e=n,Ow):y8:e instanceof Ws?Ow:e instanceof Date?d8:f8(e)?l8:Array.isArray(e)?h8:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?p8:Cl)(t,e)}function Ly(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function v8(t,e){e===void 0&&(e=t,t=Ea);for(var r=0,n=e.length-1,i=e[0],o=new Array(n<0?0:n);r<n;)o[r]=t(i,i=e[++r]);return function(a){var s=Math.max(0,Math.min(n-1,Math.floor(a*=n)));return o[s](a-s)}}function b8(t){return function(){return t}}function Rl(t){return+t}var Cw=[0,1];function Mt(t){return t}function am(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:b8(isNaN(e)?NaN:.5)}function _8(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function w8(t,e,r){var n=t[0],i=t[1],o=e[0],a=e[1];return i<n?(n=am(i,n),o=r(a,o)):(n=am(n,i),o=r(o,a)),function(s){return o(n(s))}}function x8(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),o=new Array(n),a=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<n;)i[a]=am(t[a],t[a+1]),o[a]=r(e[a],e[a+1]);return function(s){var c=Dc(t,s,1,n)-1;return o[c](i[c](s))}}function Lc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function vh(){var t=Cw,e=Cw,r=Ea,n,i,o,a=Mt,s,c,u;function l(){var d=Math.min(t.length,e.length);return a!==Mt&&(a=_8(t[0],t[d-1])),s=d>2?x8:w8,c=u=null,f}function f(d){return d==null||isNaN(d=+d)?o:(c||(c=s(t.map(n),e,r)))(n(a(d)))}return f.invert=function(d){return a(i((u||(u=s(e,t.map(n),Cl)))(d)))},f.domain=function(d){return arguments.length?(t=Array.from(d,Rl),l()):t.slice()},f.range=function(d){return arguments.length?(e=Array.from(d),l()):e.slice()},f.rangeRound=function(d){return e=Array.from(d),r=Ly,l()},f.clamp=function(d){return arguments.length?(a=d?!0:Mt,l()):a!==Mt},f.interpolate=function(d){return arguments.length?(r=d,l()):r},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,p){return n=d,i=p,l()}}function Fy(){return vh()(Mt,Mt)}function A8(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function kl(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Vo(t){return t=kl(Math.abs(t)),t?t[1]:NaN}function E8(t,e){return function(r,n){for(var i=r.length,o=[],a=0,s=t[0],c=0;i>0&&s>0&&(c+s+1>n&&(s=Math.max(1,n-c)),o.push(r.substring(i-=s,i+s)),!((c+=s+1)>n));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function T8(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var S8=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zs(t){if(!(e=S8.exec(t)))throw new Error("invalid format: "+t);var e;return new Vy({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}zs.prototype=Vy.prototype;function Vy(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Vy.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function P8(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var EP;function I8(t,e){var r=kl(t,e);if(!r)return t+"";var n=r[0],i=r[1],o=i-(EP=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=n.length;return o===a?n:o>a?n+new Array(o-a+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+kl(t,Math.max(0,e+o-1))[0]}function Rw(t,e){var r=kl(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const kw={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:A8,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Rw(t*100,e),r:Rw,s:I8,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Nw(t){return t}var $w=Array.prototype.map,jw=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function O8(t){var e=t.grouping===void 0||t.thousands===void 0?Nw:E8($w.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Nw:T8($w.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f){f=zs(f);var d=f.fill,p=f.align,m=f.sign,y=f.symbol,g=f.zero,A=f.width,T=f.comma,P=f.precision,C=f.trim,x=f.type;x==="n"?(T=!0,x="g"):kw[x]||(P===void 0&&(P=12),C=!0,x="g"),(g||d==="0"&&p==="=")&&(g=!0,d="0",p="=");var I=y==="$"?r:y==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",b=y==="$"?n:/[%p]/.test(x)?a:"",w=kw[x],S=/[defgprs%]/.test(x);P=P===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function k(O){var N=I,R=b,V,F,U;if(x==="c")R=w(O)+R,O="";else{O=+O;var W=O<0||1/O<0;if(O=isNaN(O)?c:w(Math.abs(O),P),C&&(O=P8(O)),W&&+O==0&&m!=="+"&&(W=!1),N=(W?m==="("?m:s:m==="-"||m==="("?"":m)+N,R=(x==="s"?jw[8+EP/3]:"")+R+(W&&m==="("?")":""),S){for(V=-1,F=O.length;++V<F;)if(U=O.charCodeAt(V),48>U||U>57){R=(U===46?i+O.slice(V+1):O.slice(V))+R,O=O.slice(0,V);break}}}T&&!g&&(O=e(O,1/0));var K=N.length+O.length+R.length,Y=K<A?new Array(A-K+1).join(d):"";switch(T&&g&&(O=e(Y+O,Y.length?A-R.length:1/0),Y=""),p){case"<":O=N+O+R+Y;break;case"=":O=N+Y+O+R;break;case"^":O=Y.slice(0,K=Y.length>>1)+N+O+R+Y.slice(K);break;default:O=Y+N+O+R;break}return o(O)}return k.toString=function(){return f+""},k}function l(f,d){var p=u((f=zs(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(Vo(d)/3)))*3,y=Math.pow(10,-m),g=jw[8+m/3];return function(A){return p(y*A)+g}}return{format:u,formatPrefix:l}}var Eu,By,TP;C8({thousands:",",grouping:[3],currency:["$",""]});function C8(t){return Eu=O8(t),By=Eu.format,TP=Eu.formatPrefix,Eu}function R8(t){return Math.max(0,-Vo(Math.abs(t)))}function k8(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Vo(e)/3)))*3-Vo(Math.abs(t)))}function N8(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Vo(e)-Vo(t))+1}function SP(t,e,r,n){var i=rm(t,e,r),o;switch(n=zs(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(o=k8(i,a))&&(n.precision=o),TP(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=N8(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=R8(i))&&(n.precision=o-(n.type==="%")*2);break}}return By(n)}function ri(t){var e=t.domain;return t.ticks=function(r){var n=e();return em(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return SP(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,o=n.length-1,a=n[i],s=n[o],c,u,l=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);l-- >0;){if(u=tm(a,s,r),u===c)return n[i]=a,n[o]=s,e(n);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;c=u}return t},t}function Nl(){var t=Fy();return t.copy=function(){return Lc(t,Nl())},sr.apply(t,arguments),ri(t)}function PP(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Rl),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return PP(t).unknown(e)},t=arguments.length?Array.from(t,Rl):[0,1],ri(r)}function IP(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],o=t[n],a;return o<i&&(a=r,r=n,n=a,a=i,i=o,o=a),t[r]=e.floor(i),t[n]=e.ceil(o),t}function Dw(t){return Math.log(t)}function Mw(t){return Math.exp(t)}function $8(t){return-Math.log(-t)}function j8(t){return-Math.exp(-t)}function D8(t){return isFinite(t)?+("1e"+t):t<0?0:t}function M8(t){return t===10?D8:t===Math.E?Math.exp:e=>Math.pow(t,e)}function L8(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Lw(t){return(e,r)=>-t(-e,r)}function Uy(t){const e=t(Dw,Mw),r=e.domain;let n=10,i,o;function a(){return i=L8(n),o=M8(n),r()[0]<0?(i=Lw(i),o=Lw(o),t($8,j8)):t(Dw,Mw),e}return e.base=function(s){return arguments.length?(n=+s,a()):n},e.domain=function(s){return arguments.length?(r(s),a()):r()},e.ticks=s=>{const c=r();let u=c[0],l=c[c.length-1];const f=l<u;f&&([u,l]=[l,u]);let d=i(u),p=i(l),m,y;const g=s==null?10:+s;let A=[];if(!(n%1)&&p-d<g){if(d=Math.floor(d),p=Math.ceil(p),u>0){for(;d<=p;++d)for(m=1;m<n;++m)if(y=d<0?m/o(-d):m*o(d),!(y<u)){if(y>l)break;A.push(y)}}else for(;d<=p;++d)for(m=n-1;m>=1;--m)if(y=d>0?m/o(-d):m*o(d),!(y<u)){if(y>l)break;A.push(y)}A.length*2<g&&(A=em(u,l,g))}else A=em(d,p,Math.min(p-d,g)).map(o);return f?A.reverse():A},e.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=zs(c)).precision==null&&(c.trim=!0),c=By(c)),s===1/0)return c;const u=Math.max(1,n*s/e.ticks().length);return l=>{let f=l/o(Math.round(i(l)));return f*n<n-.5&&(f*=n),f<=u?c(l):""}},e.nice=()=>r(IP(r(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),e}function OP(){const t=Uy(vh()).domain([1,10]);return t.copy=()=>Lc(t,OP()).base(t.base()),sr.apply(t,arguments),t}function Fw(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Vw(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function qy(t){var e=1,r=t(Fw(e),Vw(e));return r.constant=function(n){return arguments.length?t(Fw(e=+n),Vw(e)):e},ri(r)}function CP(){var t=qy(vh());return t.copy=function(){return Lc(t,CP()).constant(t.constant())},sr.apply(t,arguments)}function Bw(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function F8(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function V8(t){return t<0?-t*t:t*t}function Wy(t){var e=t(Mt,Mt),r=1;function n(){return r===1?t(Mt,Mt):r===.5?t(F8,V8):t(Bw(r),Bw(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},ri(e)}function zy(){var t=Wy(vh());return t.copy=function(){return Lc(t,zy()).exponent(t.exponent())},sr.apply(t,arguments),t}function B8(){return zy.apply(null,arguments).exponent(.5)}function Uw(t){return Math.sign(t)*t*t}function U8(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function RP(){var t=Fy(),e=[0,1],r=!1,n;function i(o){var a=U8(t(o));return isNaN(a)?n:r?Math.round(a):a}return i.invert=function(o){return t.invert(Uw(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,Rl)).map(Uw)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(r=!!o,i):r},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return RP(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},sr.apply(i,arguments),ri(i)}function kP(){var t=[],e=[],r=[],n;function i(){var a=0,s=Math.max(1,e.length);for(r=new Array(s-1);++a<s;)r[a-1]=K7(t,a/s);return o}function o(a){return a==null||isNaN(a=+a)?n:e[Dc(r,a)]}return o.invertExtent=function(a){var s=e.indexOf(a);return s<0?[NaN,NaN]:[s>0?r[s-1]:t[0],s<r.length?r[s]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let s of a)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Wn),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(n=a,o):n},o.quantiles=function(){return r.slice()},o.copy=function(){return kP().domain(t).range(e).unknown(n)},sr.apply(o,arguments)}function NP(){var t=0,e=1,r=1,n=[.5],i=[0,1],o;function a(c){return c!=null&&c<=c?i[Dc(n,c,0,r)]:o}function s(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return a}return a.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,s()):[t,e]},a.range=function(c){return arguments.length?(r=(i=Array.from(c)).length-1,s()):i.slice()},a.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},a.unknown=function(c){return arguments.length&&(o=c),a},a.thresholds=function(){return n.slice()},a.copy=function(){return NP().domain([t,e]).range(i).unknown(o)},sr.apply(ri(a),arguments)}function $P(){var t=[.5],e=[0,1],r,n=1;function i(o){return o!=null&&o<=o?e[Dc(t,o,0,n)]:r}return i.domain=function(o){return arguments.length?(t=Array.from(o),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return $P().domain(t).range(e).unknown(r)},sr.apply(i,arguments)}const jd=new Date,Dd=new Date;function st(t,e,r,n){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const c=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return c;let u;do c.push(u=new Date(+o)),e(o,s),t(o);while(u<o&&o<a);return c},i.filter=o=>st(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),r&&(i.count=(o,a)=>(jd.setTime(+o),Dd.setTime(+a),t(jd),t(Dd),Math.floor(r(jd,Dd))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(n?a=>n(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const $l=st(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);$l.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?st(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):$l);$l.range;const Jr=1e3,nr=Jr*60,Zr=nr*60,hn=Zr*24,Hy=hn*7,qw=hn*30,Md=hn*365,Ei=st(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Jr)},(t,e)=>(e-t)/Jr,t=>t.getUTCSeconds());Ei.range;const Ky=st(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Jr)},(t,e)=>{t.setTime(+t+e*nr)},(t,e)=>(e-t)/nr,t=>t.getMinutes());Ky.range;const Gy=st(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*nr)},(t,e)=>(e-t)/nr,t=>t.getUTCMinutes());Gy.range;const Yy=st(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Jr-t.getMinutes()*nr)},(t,e)=>{t.setTime(+t+e*Zr)},(t,e)=>(e-t)/Zr,t=>t.getHours());Yy.range;const Xy=st(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Zr)},(t,e)=>(e-t)/Zr,t=>t.getUTCHours());Xy.range;const Fc=st(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*nr)/hn,t=>t.getDate()-1);Fc.range;const bh=st(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/hn,t=>t.getUTCDate()-1);bh.range;const jP=st(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/hn,t=>Math.floor(t/hn));jP.range;function Ji(t){return st(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*nr)/Hy)}const _h=Ji(0),jl=Ji(1),q8=Ji(2),W8=Ji(3),Bo=Ji(4),z8=Ji(5),H8=Ji(6);_h.range;jl.range;q8.range;W8.range;Bo.range;z8.range;H8.range;function Zi(t){return st(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/Hy)}const wh=Zi(0),Dl=Zi(1),K8=Zi(2),G8=Zi(3),Uo=Zi(4),Y8=Zi(5),X8=Zi(6);wh.range;Dl.range;K8.range;G8.range;Uo.range;Y8.range;X8.range;const Qy=st(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Qy.range;const Jy=st(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Jy.range;const dn=st(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());dn.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:st(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});dn.range;const pn=st(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());pn.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:st(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});pn.range;function DP(t,e,r,n,i,o){const a=[[Ei,1,Jr],[Ei,5,5*Jr],[Ei,15,15*Jr],[Ei,30,30*Jr],[o,1,nr],[o,5,5*nr],[o,15,15*nr],[o,30,30*nr],[i,1,Zr],[i,3,3*Zr],[i,6,6*Zr],[i,12,12*Zr],[n,1,hn],[n,2,2*hn],[r,1,Hy],[e,1,qw],[e,3,3*qw],[t,1,Md]];function s(u,l,f){const d=l<u;d&&([u,l]=[l,u]);const p=f&&typeof f.range=="function"?f:c(u,l,f),m=p?p.range(u,+l+1):[];return d?m.reverse():m}function c(u,l,f){const d=Math.abs(l-u)/f,p=$y(([,,g])=>g).right(a,d);if(p===a.length)return t.every(rm(u/Md,l/Md,f));if(p===0)return $l.every(Math.max(rm(u,l,f),1));const[m,y]=a[d/a[p-1][2]<a[p][2]/d?p-1:p];return m.every(y)}return[s,c]}const[Q8,J8]=DP(pn,Jy,wh,jP,Xy,Gy),[Z8,eG]=DP(dn,Qy,_h,Fc,Yy,Ky);function Ld(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Fd(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ga(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function tG(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,c=t.shortMonths,u=Ya(i),l=Xa(i),f=Ya(o),d=Xa(o),p=Ya(a),m=Xa(a),y=Ya(s),g=Xa(s),A=Ya(c),T=Xa(c),P={a:W,A:K,b:Y,B:ne,c:null,d:Yw,e:Yw,f:EG,g:$G,G:DG,H:wG,I:xG,j:AG,L:MP,m:TG,M:SG,p:oe,q:J,Q:Jw,s:Zw,S:PG,u:IG,U:OG,V:CG,w:RG,W:kG,x:null,X:null,y:NG,Y:jG,Z:MG,"%":Qw},C={a:Q,A:Pe,b:Ae,B:ht,c:null,d:Xw,e:Xw,f:BG,g:QG,G:ZG,H:LG,I:FG,j:VG,L:FP,m:UG,M:qG,p:_t,q:Ye,Q:Jw,s:Zw,S:WG,u:zG,U:HG,V:KG,w:GG,W:YG,x:null,X:null,y:XG,Y:JG,Z:eY,"%":Qw},x={a:k,A:O,b:N,B:R,c:V,d:Kw,e:Kw,f:yG,g:Hw,G:zw,H:Gw,I:Gw,j:dG,L:gG,m:hG,M:pG,p:S,q:fG,Q:bG,s:_G,S:mG,u:aG,U:sG,V:cG,w:oG,W:uG,x:F,X:U,y:Hw,Y:zw,Z:lG,"%":vG};P.x=I(r,P),P.X=I(n,P),P.c=I(e,P),C.x=I(r,C),C.X=I(n,C),C.c=I(e,C);function I(Z,le){return function(de){var z=[],je=-1,ve=0,We=Z.length,He,wt,wr;for(de instanceof Date||(de=new Date(+de));++je<We;)Z.charCodeAt(je)===37&&(z.push(Z.slice(ve,je)),(wt=Ww[He=Z.charAt(++je)])!=null?He=Z.charAt(++je):wt=He==="e"?" ":"0",(wr=le[He])&&(He=wr(de,wt)),z.push(He),ve=je+1);return z.push(Z.slice(ve,je)),z.join("")}}function b(Z,le){return function(de){var z=Ga(1900,void 0,1),je=w(z,Z,de+="",0),ve,We;if(je!=de.length)return null;if("Q"in z)return new Date(z.Q);if("s"in z)return new Date(z.s*1e3+("L"in z?z.L:0));if(le&&!("Z"in z)&&(z.Z=0),"p"in z&&(z.H=z.H%12+z.p*12),z.m===void 0&&(z.m="q"in z?z.q:0),"V"in z){if(z.V<1||z.V>53)return null;"w"in z||(z.w=1),"Z"in z?(ve=Fd(Ga(z.y,0,1)),We=ve.getUTCDay(),ve=We>4||We===0?Dl.ceil(ve):Dl(ve),ve=bh.offset(ve,(z.V-1)*7),z.y=ve.getUTCFullYear(),z.m=ve.getUTCMonth(),z.d=ve.getUTCDate()+(z.w+6)%7):(ve=Ld(Ga(z.y,0,1)),We=ve.getDay(),ve=We>4||We===0?jl.ceil(ve):jl(ve),ve=Fc.offset(ve,(z.V-1)*7),z.y=ve.getFullYear(),z.m=ve.getMonth(),z.d=ve.getDate()+(z.w+6)%7)}else("W"in z||"U"in z)&&("w"in z||(z.w="u"in z?z.u%7:"W"in z?1:0),We="Z"in z?Fd(Ga(z.y,0,1)).getUTCDay():Ld(Ga(z.y,0,1)).getDay(),z.m=0,z.d="W"in z?(z.w+6)%7+z.W*7-(We+5)%7:z.w+z.U*7-(We+6)%7);return"Z"in z?(z.H+=z.Z/100|0,z.M+=z.Z%100,Fd(z)):Ld(z)}}function w(Z,le,de,z){for(var je=0,ve=le.length,We=de.length,He,wt;je<ve;){if(z>=We)return-1;if(He=le.charCodeAt(je++),He===37){if(He=le.charAt(je++),wt=x[He in Ww?le.charAt(je++):He],!wt||(z=wt(Z,de,z))<0)return-1}else if(He!=de.charCodeAt(z++))return-1}return z}function S(Z,le,de){var z=u.exec(le.slice(de));return z?(Z.p=l.get(z[0].toLowerCase()),de+z[0].length):-1}function k(Z,le,de){var z=p.exec(le.slice(de));return z?(Z.w=m.get(z[0].toLowerCase()),de+z[0].length):-1}function O(Z,le,de){var z=f.exec(le.slice(de));return z?(Z.w=d.get(z[0].toLowerCase()),de+z[0].length):-1}function N(Z,le,de){var z=A.exec(le.slice(de));return z?(Z.m=T.get(z[0].toLowerCase()),de+z[0].length):-1}function R(Z,le,de){var z=y.exec(le.slice(de));return z?(Z.m=g.get(z[0].toLowerCase()),de+z[0].length):-1}function V(Z,le,de){return w(Z,e,le,de)}function F(Z,le,de){return w(Z,r,le,de)}function U(Z,le,de){return w(Z,n,le,de)}function W(Z){return a[Z.getDay()]}function K(Z){return o[Z.getDay()]}function Y(Z){return c[Z.getMonth()]}function ne(Z){return s[Z.getMonth()]}function oe(Z){return i[+(Z.getHours()>=12)]}function J(Z){return 1+~~(Z.getMonth()/3)}function Q(Z){return a[Z.getUTCDay()]}function Pe(Z){return o[Z.getUTCDay()]}function Ae(Z){return c[Z.getUTCMonth()]}function ht(Z){return s[Z.getUTCMonth()]}function _t(Z){return i[+(Z.getUTCHours()>=12)]}function Ye(Z){return 1+~~(Z.getUTCMonth()/3)}return{format:function(Z){var le=I(Z+="",P);return le.toString=function(){return Z},le},parse:function(Z){var le=b(Z+="",!1);return le.toString=function(){return Z},le},utcFormat:function(Z){var le=I(Z+="",C);return le.toString=function(){return Z},le},utcParse:function(Z){var le=b(Z+="",!0);return le.toString=function(){return Z},le}}}var Ww={"-":"",_:" ",0:"0"},ft=/^\s*\d+/,rG=/^%/,nG=/[\\^$*+?|[\]().{}]/g;function Se(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",o=i.length;return n+(o<r?new Array(r-o+1).join(e)+i:i)}function iG(t){return t.replace(nG,"\\$&")}function Ya(t){return new RegExp("^(?:"+t.map(iG).join("|")+")","i")}function Xa(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function oG(t,e,r){var n=ft.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function aG(t,e,r){var n=ft.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function sG(t,e,r){var n=ft.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function cG(t,e,r){var n=ft.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function uG(t,e,r){var n=ft.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function zw(t,e,r){var n=ft.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function Hw(t,e,r){var n=ft.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function lG(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function fG(t,e,r){var n=ft.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function hG(t,e,r){var n=ft.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function Kw(t,e,r){var n=ft.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function dG(t,e,r){var n=ft.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function Gw(t,e,r){var n=ft.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function pG(t,e,r){var n=ft.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function mG(t,e,r){var n=ft.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function gG(t,e,r){var n=ft.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function yG(t,e,r){var n=ft.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function vG(t,e,r){var n=rG.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function bG(t,e,r){var n=ft.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function _G(t,e,r){var n=ft.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function Yw(t,e){return Se(t.getDate(),e,2)}function wG(t,e){return Se(t.getHours(),e,2)}function xG(t,e){return Se(t.getHours()%12||12,e,2)}function AG(t,e){return Se(1+Fc.count(dn(t),t),e,3)}function MP(t,e){return Se(t.getMilliseconds(),e,3)}function EG(t,e){return MP(t,e)+"000"}function TG(t,e){return Se(t.getMonth()+1,e,2)}function SG(t,e){return Se(t.getMinutes(),e,2)}function PG(t,e){return Se(t.getSeconds(),e,2)}function IG(t){var e=t.getDay();return e===0?7:e}function OG(t,e){return Se(_h.count(dn(t)-1,t),e,2)}function LP(t){var e=t.getDay();return e>=4||e===0?Bo(t):Bo.ceil(t)}function CG(t,e){return t=LP(t),Se(Bo.count(dn(t),t)+(dn(t).getDay()===4),e,2)}function RG(t){return t.getDay()}function kG(t,e){return Se(jl.count(dn(t)-1,t),e,2)}function NG(t,e){return Se(t.getFullYear()%100,e,2)}function $G(t,e){return t=LP(t),Se(t.getFullYear()%100,e,2)}function jG(t,e){return Se(t.getFullYear()%1e4,e,4)}function DG(t,e){var r=t.getDay();return t=r>=4||r===0?Bo(t):Bo.ceil(t),Se(t.getFullYear()%1e4,e,4)}function MG(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Se(e/60|0,"0",2)+Se(e%60,"0",2)}function Xw(t,e){return Se(t.getUTCDate(),e,2)}function LG(t,e){return Se(t.getUTCHours(),e,2)}function FG(t,e){return Se(t.getUTCHours()%12||12,e,2)}function VG(t,e){return Se(1+bh.count(pn(t),t),e,3)}function FP(t,e){return Se(t.getUTCMilliseconds(),e,3)}function BG(t,e){return FP(t,e)+"000"}function UG(t,e){return Se(t.getUTCMonth()+1,e,2)}function qG(t,e){return Se(t.getUTCMinutes(),e,2)}function WG(t,e){return Se(t.getUTCSeconds(),e,2)}function zG(t){var e=t.getUTCDay();return e===0?7:e}function HG(t,e){return Se(wh.count(pn(t)-1,t),e,2)}function VP(t){var e=t.getUTCDay();return e>=4||e===0?Uo(t):Uo.ceil(t)}function KG(t,e){return t=VP(t),Se(Uo.count(pn(t),t)+(pn(t).getUTCDay()===4),e,2)}function GG(t){return t.getUTCDay()}function YG(t,e){return Se(Dl.count(pn(t)-1,t),e,2)}function XG(t,e){return Se(t.getUTCFullYear()%100,e,2)}function QG(t,e){return t=VP(t),Se(t.getUTCFullYear()%100,e,2)}function JG(t,e){return Se(t.getUTCFullYear()%1e4,e,4)}function ZG(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Uo(t):Uo.ceil(t),Se(t.getUTCFullYear()%1e4,e,4)}function eY(){return"+0000"}function Qw(){return"%"}function Jw(t){return+t}function Zw(t){return Math.floor(+t/1e3)}var ao,BP,UP;tY({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function tY(t){return ao=tG(t),BP=ao.format,ao.parse,UP=ao.utcFormat,ao.utcParse,ao}function rY(t){return new Date(t)}function nY(t){return t instanceof Date?+t:+new Date(+t)}function Zy(t,e,r,n,i,o,a,s,c,u){var l=Fy(),f=l.invert,d=l.domain,p=u(".%L"),m=u(":%S"),y=u("%I:%M"),g=u("%I %p"),A=u("%a %d"),T=u("%b %d"),P=u("%B"),C=u("%Y");function x(I){return(c(I)<I?p:s(I)<I?m:a(I)<I?y:o(I)<I?g:n(I)<I?i(I)<I?A:T:r(I)<I?P:C)(I)}return l.invert=function(I){return new Date(f(I))},l.domain=function(I){return arguments.length?d(Array.from(I,nY)):d().map(rY)},l.ticks=function(I){var b=d();return t(b[0],b[b.length-1],I??10)},l.tickFormat=function(I,b){return b==null?x:u(b)},l.nice=function(I){var b=d();return(!I||typeof I.range!="function")&&(I=e(b[0],b[b.length-1],I??10)),I?d(IP(b,I)):l},l.copy=function(){return Lc(l,Zy(t,e,r,n,i,o,a,s,c,u))},l}function iY(){return sr.apply(Zy(Z8,eG,dn,Qy,_h,Fc,Yy,Ky,Ei,BP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function oY(){return sr.apply(Zy(Q8,J8,pn,Jy,wh,bh,Xy,Gy,Ei,UP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xh(){var t=0,e=1,r,n,i,o,a=Mt,s=!1,c;function u(f){return f==null||isNaN(f=+f)?c:a(i===0?.5:(f=(o(f)-r)*i,s?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,r=o(t=+t),n=o(e=+e),i=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(f){return arguments.length?(s=!!f,u):s},u.interpolator=function(f){return arguments.length?(a=f,u):a};function l(f){return function(d){var p,m;return arguments.length?([p,m]=d,a=f(p,m),u):[a(0),a(1)]}}return u.range=l(Ea),u.rangeRound=l(Ly),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return o=f,r=f(t),n=f(e),i=r===n?0:1/(n-r),u}}function ni(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function qP(){var t=ri(xh()(Mt));return t.copy=function(){return ni(t,qP())},_n.apply(t,arguments)}function WP(){var t=Uy(xh()).domain([1,10]);return t.copy=function(){return ni(t,WP()).base(t.base())},_n.apply(t,arguments)}function zP(){var t=qy(xh());return t.copy=function(){return ni(t,zP()).constant(t.constant())},_n.apply(t,arguments)}function ev(){var t=Wy(xh());return t.copy=function(){return ni(t,ev()).exponent(t.exponent())},_n.apply(t,arguments)}function aY(){return ev.apply(null,arguments).exponent(.5)}function HP(){var t=[],e=Mt;function r(n){if(n!=null&&!isNaN(n=+n))return e((Dc(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Wn),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,o)=>H7(t,o/n))},r.copy=function(){return HP(e).domain(t)},_n.apply(r,arguments)}function Ah(){var t=0,e=.5,r=1,n=1,i,o,a,s,c,u=Mt,l,f=!1,d;function p(y){return isNaN(y=+y)?d:(y=.5+((y=+l(y))-o)*(n*y<n*o?s:c),u(f?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([t,e,r]=y,i=l(t=+t),o=l(e=+e),a=l(r=+r),s=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),n=o<i?-1:1,p):[t,e,r]},p.clamp=function(y){return arguments.length?(f=!!y,p):f},p.interpolator=function(y){return arguments.length?(u=y,p):u};function m(y){return function(g){var A,T,P;return arguments.length?([A,T,P]=g,u=v8(y,[A,T,P]),p):[u(0),u(.5),u(1)]}}return p.range=m(Ea),p.rangeRound=m(Ly),p.unknown=function(y){return arguments.length?(d=y,p):d},function(y){return l=y,i=y(t),o=y(e),a=y(r),s=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),n=o<i?-1:1,p}}function KP(){var t=ri(Ah()(Mt));return t.copy=function(){return ni(t,KP())},_n.apply(t,arguments)}function GP(){var t=Uy(Ah()).domain([.1,1,10]);return t.copy=function(){return ni(t,GP()).base(t.base())},_n.apply(t,arguments)}function YP(){var t=qy(Ah());return t.copy=function(){return ni(t,YP()).constant(t.constant())},_n.apply(t,arguments)}function tv(){var t=Wy(Ah());return t.copy=function(){return ni(t,tv()).exponent(t.exponent())},_n.apply(t,arguments)}function sY(){return tv.apply(null,arguments).exponent(.5)}const ex=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Bs,scaleDiverging:KP,scaleDivergingLog:GP,scaleDivergingPow:tv,scaleDivergingSqrt:sY,scaleDivergingSymlog:YP,scaleIdentity:PP,scaleImplicit:nm,scaleLinear:Nl,scaleLog:OP,scaleOrdinal:jy,scalePoint:gs,scalePow:zy,scaleQuantile:kP,scaleQuantize:NP,scaleRadial:RP,scaleSequential:qP,scaleSequentialLog:WP,scaleSequentialPow:ev,scaleSequentialQuantile:HP,scaleSequentialSqrt:aY,scaleSequentialSymlog:zP,scaleSqrt:B8,scaleSymlog:CP,scaleThreshold:$P,scaleTime:iY,scaleUtc:oY,tickFormat:SP},Symbol.toStringTag,{value:"Module"}));var cY=ma;function uY(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],a=e(o);if(a!=null&&(s===void 0?a===a&&!cY(a):r(a,s)))var s=a,c=o}return c}var Eh=uY;function lY(t,e){return t>e}var XP=lY,fY=Eh,hY=XP,dY=Aa;function pY(t){return t&&t.length?fY(t,dY,hY):void 0}var mY=pY;const Mn=ke(mY);function gY(t,e){return t<e}var QP=gY,yY=Eh,vY=QP,bY=Aa;function _Y(t){return t&&t.length?yY(t,bY,vY):void 0}var wY=_Y;const Th=ke(wY);var xY=my,AY=Br,EY=oP,TY=Ut;function SY(t,e){var r=TY(t)?xY:EY;return r(t,AY(e))}var PY=SY,IY=nP,OY=PY;function CY(t,e){return IY(OY(t,e),1)}var RY=CY;const kY=ke(RY);var NY=Cy;function $Y(t,e){return NY(t,e)}var jY=$Y;const Bi=ke(jY);var Ta=1e9,DY={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},nv,qe=!0,or="[DecimalError] ",Oi=or+"Invalid argument: ",rv=or+"Exponent out of range: ",Sa=Math.floor,yi=Math.pow,MY=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Gt,ut=1e7,Be=7,JP=9007199254740991,Ml=Sa(JP/Be),te={};te.absoluteValue=te.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};te.comparedTo=te.cmp=function(t){var e,r,n,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(n=o.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return n===i?0:n>i^o.s<0?1:-1};te.decimalPlaces=te.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Be;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};te.dividedBy=te.div=function(t){return an(this,new this.constructor(t))};te.dividedToIntegerBy=te.idiv=function(t){var e=this,r=e.constructor;return $e(an(e,new r(t),0,1),r.precision)};te.equals=te.eq=function(t){return!this.cmp(t)};te.exponent=function(){return rt(this)};te.greaterThan=te.gt=function(t){return this.cmp(t)>0};te.greaterThanOrEqualTo=te.gte=function(t){return this.cmp(t)>=0};te.isInteger=te.isint=function(){return this.e>this.d.length-2};te.isNegative=te.isneg=function(){return this.s<0};te.isPositive=te.ispos=function(){return this.s>0};te.isZero=function(){return this.s===0};te.lessThan=te.lt=function(t){return this.cmp(t)<0};te.lessThanOrEqualTo=te.lte=function(t){return this.cmp(t)<1};te.logarithm=te.log=function(t){var e,r=this,n=r.constructor,i=n.precision,o=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Gt))throw Error(or+"NaN");if(r.s<1)throw Error(or+(r.s?"NaN":"-Infinity"));return r.eq(Gt)?new n(0):(qe=!1,e=an(Hs(r,o),Hs(t,o),o),qe=!0,$e(e,i))};te.minus=te.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?tI(e,t):ZP(e,(t.s=-t.s,t))};te.modulo=te.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(or+"NaN");return r.s?(qe=!1,e=an(r,t,0,1).times(t),qe=!0,r.minus(e)):$e(new n(r),i)};te.naturalExponential=te.exp=function(){return eI(this)};te.naturalLogarithm=te.ln=function(){return Hs(this)};te.negated=te.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};te.plus=te.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?ZP(e,t):tI(e,(t.s=-t.s,t))};te.precision=te.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Oi+t);if(e=rt(i)+1,n=i.d.length-1,r=n*Be+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};te.squareRoot=te.sqrt=function(){var t,e,r,n,i,o,a,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error(or+"NaN")}for(t=rt(s),qe=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=Tr(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Sa((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(i.toString()),r=c.precision,i=a=r+3;;)if(o=n,n=o.plus(an(s,o,a+2)).times(.5),Tr(o.d).slice(0,a)===(e=Tr(n.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if($e(o,r+1,0),o.times(o).eq(s)){n=o;break}}else if(e!="9999")break;a+=4}return qe=!0,$e(n,r)};te.times=te.mul=function(t){var e,r,n,i,o,a,s,c,u,l=this,f=l.constructor,d=l.d,p=(t=new f(t)).d;if(!l.s||!t.s)return new f(0);for(t.s*=l.s,r=l.e+t.e,c=d.length,u=p.length,c<u&&(o=d,d=p,p=o,a=c,c=u,u=a),o=[],a=c+u,n=a;n--;)o.push(0);for(n=u;--n>=0;){for(e=0,i=c+n;i>n;)s=o[i]+p[n]*d[i-n-1]+e,o[i--]=s%ut|0,e=s/ut|0;o[i]=(o[i]+e)%ut|0}for(;!o[--a];)o.pop();return e?++r:o.shift(),t.d=o,t.e=r,qe?$e(t,f.precision):t};te.toDecimalPlaces=te.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Mr(t,0,Ta),e===void 0?e=n.rounding:Mr(e,0,8),$e(r,t+rt(r)+1,e))};te.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Ui(n,!0):(Mr(t,0,Ta),e===void 0?e=i.rounding:Mr(e,0,8),n=$e(new i(n),t+1,e),r=Ui(n,!0,t+1)),r};te.toFixed=function(t,e){var r,n,i=this,o=i.constructor;return t===void 0?Ui(i):(Mr(t,0,Ta),e===void 0?e=o.rounding:Mr(e,0,8),n=$e(new o(i),t+rt(i)+1,e),r=Ui(n.abs(),!1,t+rt(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};te.toInteger=te.toint=function(){var t=this,e=t.constructor;return $e(new e(t),rt(t)+1,e.rounding)};te.toNumber=function(){return+this};te.toPower=te.pow=function(t){var e,r,n,i,o,a,s=this,c=s.constructor,u=12,l=+(t=new c(t));if(!t.s)return new c(Gt);if(s=new c(s),!s.s){if(t.s<1)throw Error(or+"Infinity");return s}if(s.eq(Gt))return s;if(n=c.precision,t.eq(Gt))return $e(s,n);if(e=t.e,r=t.d.length-1,a=e>=r,o=s.s,a){if((r=l<0?-l:l)<=JP){for(i=new c(Gt),e=Math.ceil(n/Be+4),qe=!1;r%2&&(i=i.times(s),rx(i.d,e)),r=Sa(r/2),r!==0;)s=s.times(s),rx(s.d,e);return qe=!0,t.s<0?new c(Gt).div(i):$e(i,n)}}else if(o<0)throw Error(or+"NaN");return o=o<0&&t.d[Math.max(e,r)]&1?-1:1,s.s=1,qe=!1,i=t.times(Hs(s,n+u)),qe=!0,i=eI(i),i.s=o,i};te.toPrecision=function(t,e){var r,n,i=this,o=i.constructor;return t===void 0?(r=rt(i),n=Ui(i,r<=o.toExpNeg||r>=o.toExpPos)):(Mr(t,1,Ta),e===void 0?e=o.rounding:Mr(e,0,8),i=$e(new o(i),t,e),r=rt(i),n=Ui(i,t<=r||r<=o.toExpNeg,t)),n};te.toSignificantDigits=te.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Mr(t,1,Ta),e===void 0?e=n.rounding:Mr(e,0,8)),$e(new n(r),t,e)};te.toString=te.valueOf=te.val=te.toJSON=te[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=rt(t),r=t.constructor;return Ui(t,e<=r.toExpNeg||e>=r.toExpPos)};function ZP(t,e){var r,n,i,o,a,s,c,u,l=t.constructor,f=l.precision;if(!t.s||!e.s)return e.s||(e=new l(t)),qe?$e(e,f):e;if(c=t.d,u=e.d,a=t.e,i=e.e,c=c.slice(),o=a-i,o){for(o<0?(n=c,o=-o,s=u.length):(n=u,i=a,s=c.length),a=Math.ceil(f/Be),s=a>s?a+1:s+1,o>s&&(o=s,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(s=c.length,o=u.length,s-o<0&&(o=s,n=u,u=c,c=n),r=0;o;)r=(c[--o]=c[o]+u[o]+r)/ut|0,c[o]%=ut;for(r&&(c.unshift(r),++i),s=c.length;c[--s]==0;)c.pop();return e.d=c,e.e=i,qe?$e(e,f):e}function Mr(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Oi+t)}function Tr(t){var e,r,n,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)n=t[e]+"",r=Be-n.length,r&&(o+=On(r)),o+=n;a=t[e],n=a+"",r=Be-n.length,r&&(o+=On(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var an=function(){function t(n,i){var o,a=0,s=n.length;for(n=n.slice();s--;)o=n[s]*i+a,n[s]=o%ut|0,a=o/ut|0;return a&&n.unshift(a),n}function e(n,i,o,a){var s,c;if(o!=a)c=o>a?1:-1;else for(s=c=0;s<o;s++)if(n[s]!=i[s]){c=n[s]>i[s]?1:-1;break}return c}function r(n,i,o){for(var a=0;o--;)n[o]-=a,a=n[o]<i[o]?1:0,n[o]=a*ut+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,a){var s,c,u,l,f,d,p,m,y,g,A,T,P,C,x,I,b,w,S=n.constructor,k=n.s==i.s?1:-1,O=n.d,N=i.d;if(!n.s)return new S(n);if(!i.s)throw Error(or+"Division by zero");for(c=n.e-i.e,b=N.length,x=O.length,p=new S(k),m=p.d=[],u=0;N[u]==(O[u]||0);)++u;if(N[u]>(O[u]||0)&&--c,o==null?T=o=S.precision:a?T=o+(rt(n)-rt(i))+1:T=o,T<0)return new S(0);if(T=T/Be+2|0,u=0,b==1)for(l=0,N=N[0],T++;(u<x||l)&&T--;u++)P=l*ut+(O[u]||0),m[u]=P/N|0,l=P%N|0;else{for(l=ut/(N[0]+1)|0,l>1&&(N=t(N,l),O=t(O,l),b=N.length,x=O.length),C=b,y=O.slice(0,b),g=y.length;g<b;)y[g++]=0;w=N.slice(),w.unshift(0),I=N[0],N[1]>=ut/2&&++I;do l=0,s=e(N,y,b,g),s<0?(A=y[0],b!=g&&(A=A*ut+(y[1]||0)),l=A/I|0,l>1?(l>=ut&&(l=ut-1),f=t(N,l),d=f.length,g=y.length,s=e(f,y,d,g),s==1&&(l--,r(f,b<d?w:N,d))):(l==0&&(s=l=1),f=N.slice()),d=f.length,d<g&&f.unshift(0),r(y,f,g),s==-1&&(g=y.length,s=e(N,y,b,g),s<1&&(l++,r(y,b<g?w:N,g))),g=y.length):s===0&&(l++,y=[0]),m[u++]=l,s&&y[0]?y[g++]=O[C]||0:(y=[O[C]],g=1);while((C++<x||y[0]!==void 0)&&T--)}return m[0]||m.shift(),p.e=c,$e(p,a?o+rt(p)+1:o)}}();function eI(t,e){var r,n,i,o,a,s,c=0,u=0,l=t.constructor,f=l.precision;if(rt(t)>16)throw Error(rv+rt(t));if(!t.s)return new l(Gt);for(e==null?(qe=!1,s=f):s=e,a=new l(.03125);t.abs().gte(.1);)t=t.times(a),u+=5;for(n=Math.log(yi(2,u))/Math.LN10*2+5|0,s+=n,r=i=o=new l(Gt),l.precision=s;;){if(i=$e(i.times(t),s),r=r.times(++c),a=o.plus(an(i,r,s)),Tr(a.d).slice(0,s)===Tr(o.d).slice(0,s)){for(;u--;)o=$e(o.times(o),s);return l.precision=f,e==null?(qe=!0,$e(o,f)):o}o=a}}function rt(t){for(var e=t.e*Be,r=t.d[0];r>=10;r/=10)e++;return e}function Vd(t,e,r){if(e>t.LN10.sd())throw qe=!0,r&&(t.precision=r),Error(or+"LN10 precision limit exceeded");return $e(new t(t.LN10),e)}function On(t){for(var e="";t--;)e+="0";return e}function Hs(t,e){var r,n,i,o,a,s,c,u,l,f=1,d=10,p=t,m=p.d,y=p.constructor,g=y.precision;if(p.s<1)throw Error(or+(p.s?"NaN":"-Infinity"));if(p.eq(Gt))return new y(0);if(e==null?(qe=!1,u=g):u=e,p.eq(10))return e==null&&(qe=!0),Vd(y,u);if(u+=d,y.precision=u,r=Tr(m),n=r.charAt(0),o=rt(p),Math.abs(o)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(t),r=Tr(p.d),n=r.charAt(0),f++;o=rt(p),n>1?(p=new y("0."+r),o++):p=new y(n+"."+r.slice(1))}else return c=Vd(y,u+2,g).times(o+""),p=Hs(new y(n+"."+r.slice(1)),u-d).plus(c),y.precision=g,e==null?(qe=!0,$e(p,g)):p;for(s=a=p=an(p.minus(Gt),p.plus(Gt),u),l=$e(p.times(p),u),i=3;;){if(a=$e(a.times(l),u),c=s.plus(an(a,new y(i),u)),Tr(c.d).slice(0,u)===Tr(s.d).slice(0,u))return s=s.times(2),o!==0&&(s=s.plus(Vd(y,u+2,g).times(o+""))),s=an(s,new y(f),u),y.precision=g,e==null?(qe=!0,$e(s,g)):s;s=c,i+=2}}function tx(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=Sa(r/Be),t.d=[],n=(r+1)%Be,r<0&&(n+=Be),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=Be;n<i;)t.d.push(+e.slice(n,n+=Be));e=e.slice(n),n=Be-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),qe&&(t.e>Ml||t.e<-Ml))throw Error(rv+r)}else t.s=0,t.e=0,t.d=[0];return t}function $e(t,e,r){var n,i,o,a,s,c,u,l,f=t.d;for(a=1,o=f[0];o>=10;o/=10)a++;if(n=e-a,n<0)n+=Be,i=e,u=f[l=0];else{if(l=Math.ceil((n+1)/Be),o=f.length,l>=o)return t;for(u=o=f[l],a=1;o>=10;o/=10)a++;n%=Be,i=n-Be+a}if(r!==void 0&&(o=yi(10,a-i-1),s=u/o%10|0,c=e<0||f[l+1]!==void 0||u%o,c=r<4?(s||c)&&(r==0||r==(t.s<0?3:2)):s>5||s==5&&(r==4||c||r==6&&(n>0?i>0?u/yi(10,a-i):0:f[l-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return c?(o=rt(t),f.length=1,e=e-o-1,f[0]=yi(10,(Be-e%Be)%Be),t.e=Sa(-e/Be)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=l,o=1,l--):(f.length=l+1,o=yi(10,Be-n),f[l]=i>0?(u/yi(10,a-i)%yi(10,i)|0)*o:0),c)for(;;)if(l==0){(f[0]+=o)==ut&&(f[0]=1,++t.e);break}else{if(f[l]+=o,f[l]!=ut)break;f[l--]=0,o=1}for(n=f.length;f[--n]===0;)f.pop();if(qe&&(t.e>Ml||t.e<-Ml))throw Error(rv+rt(t));return t}function tI(t,e){var r,n,i,o,a,s,c,u,l,f,d=t.constructor,p=d.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new d(t),qe?$e(e,p):e;if(c=t.d,f=e.d,n=e.e,u=t.e,c=c.slice(),a=u-n,a){for(l=a<0,l?(r=c,a=-a,s=f.length):(r=f,n=u,s=c.length),i=Math.max(Math.ceil(p/Be),s)+2,a>i&&(a=i,r.length=1),r.reverse(),i=a;i--;)r.push(0);r.reverse()}else{for(i=c.length,s=f.length,l=i<s,l&&(s=i),i=0;i<s;i++)if(c[i]!=f[i]){l=c[i]<f[i];break}a=0}for(l&&(r=c,c=f,f=r,e.s=-e.s),s=c.length,i=f.length-s;i>0;--i)c[s++]=0;for(i=f.length;i>a;){if(c[--i]<f[i]){for(o=i;o&&c[--o]===0;)c[o]=ut-1;--c[o],c[i]+=ut}c[i]-=f[i]}for(;c[--s]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,qe?$e(e,p):e):new d(0)}function Ui(t,e,r){var n,i=rt(t),o=Tr(t.d),a=o.length;return e?(r&&(n=r-a)>0?o=o.charAt(0)+"."+o.slice(1)+On(n):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+On(-i-1)+o,r&&(n=r-a)>0&&(o+=On(n))):i>=a?(o+=On(i+1-a),r&&(n=r-i-1)>0&&(o=o+"."+On(n))):((n=i+1)<a&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(o+="."),o+=On(n))),t.s<0?"-"+o:o}function rx(t,e){if(t.length>e)return t.length=e,!0}function rI(t){var e,r,n;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Oi+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return tx(a,o.toString())}else if(typeof o!="string")throw Error(Oi+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,MY.test(o))tx(a,o);else throw Error(Oi+o)}if(i.prototype=te,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=rI,i.config=i.set=LY,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function LY(t){if(!t||typeof t!="object")throw Error(or+"Object expected");var e,r,n,i=["precision",1,Ta,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(Sa(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(Oi+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Oi+r+": "+n);return this}var nv=rI(DY);Gt=new nv(1);const Re=nv;function FY(t){return qY(t)||UY(t)||BY(t)||VY()}function VY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BY(t,e){if(t){if(typeof t=="string")return sm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sm(t,e)}}function UY(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function qY(t){if(Array.isArray(t))return sm(t)}function sm(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var WY=function(e){return e},nI={"@@functional/placeholder":!0},iI=function(e){return e===nI},nx=function(e){return function r(){return arguments.length===0||arguments.length===1&&iI(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},zY=function t(e,r){return e===1?r:nx(function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=i.filter(function(s){return s!==nI}).length;return a>=e?r.apply(void 0,i):t(e-a,nx(function(){for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];var l=i.map(function(f){return iI(f)?c.shift():f});return r.apply(void 0,FY(l).concat(c))}))})},Sh=function(e){return zY(e.length,e)},cm=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},HY=Sh(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),KY=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return WY;var i=r.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce(function(s,c){return c(s)},o.apply(void 0,arguments))}},um=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},oI=function(e){var r=null,n=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r&&o.every(function(s,c){return s===r[c]})||(r=o,n=e.apply(void 0,o)),n}};function GY(t){var e;return t===0?e=1:e=Math.floor(new Re(t).abs().log(10).toNumber())+1,e}function YY(t,e,r){for(var n=new Re(t),i=0,o=[];n.lt(e)&&i<1e5;)o.push(n.toNumber()),n=n.add(r),i++;return o}var XY=Sh(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),QY=Sh(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),JY=Sh(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const Ph={rangeStep:YY,getDigitCount:GY,interpolateNumber:XY,uninterpolateNumber:QY,uninterpolateTruncation:JY};function lm(t){return tX(t)||eX(t)||aI(t)||ZY()}function ZY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eX(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function tX(t){if(Array.isArray(t))return fm(t)}function Ks(t,e){return iX(t)||nX(t,e)||aI(t,e)||rX()}function rX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aI(t,e){if(t){if(typeof t=="string")return fm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fm(t,e)}}function fm(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nX(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,o=void 0;try{for(var a=t[Symbol.iterator](),s;!(n=(s=a.next()).done)&&(r.push(s.value),!(e&&r.length===e));n=!0);}catch(c){i=!0,o=c}finally{try{!n&&a.return!=null&&a.return()}finally{if(i)throw o}}return r}}function iX(t){if(Array.isArray(t))return t}function sI(t){var e=Ks(t,2),r=e[0],n=e[1],i=r,o=n;return r>n&&(i=n,o=r),[i,o]}function cI(t,e,r){if(t.lte(0))return new Re(0);var n=Ph.getDigitCount(t.toNumber()),i=new Re(10).pow(n),o=t.div(i),a=n!==1?.05:.1,s=new Re(Math.ceil(o.div(a).toNumber())).add(r).mul(a),c=s.mul(i);return e?c:new Re(Math.ceil(c))}function oX(t,e,r){var n=1,i=new Re(t);if(!i.isint()&&r){var o=Math.abs(t);o<1?(n=new Re(10).pow(Ph.getDigitCount(t)-1),i=new Re(Math.floor(i.div(n).toNumber())).mul(n)):o>1&&(i=new Re(Math.floor(t)))}else t===0?i=new Re(Math.floor((e-1)/2)):r||(i=new Re(Math.floor(t)));var a=Math.floor((e-1)/2),s=KY(HY(function(c){return i.add(new Re(c-a).mul(n)).toNumber()}),cm);return s(0,e)}function uI(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new Re(0),tickMin:new Re(0),tickMax:new Re(0)};var o=cI(new Re(e).sub(t).div(r-1),n,i),a;t<=0&&e>=0?a=new Re(0):(a=new Re(t).add(e).div(2),a=a.sub(new Re(a).mod(o)));var s=Math.ceil(a.sub(t).div(o).toNumber()),c=Math.ceil(new Re(e).sub(a).div(o).toNumber()),u=s+c+1;return u>r?uI(t,e,r,n,i+1):(u<r&&(c=e>0?c+(r-u):c,s=e>0?s:s+(r-u)),{step:o,tickMin:a.sub(new Re(s).mul(o)),tickMax:a.add(new Re(c).mul(o))})}function aX(t){var e=Ks(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),s=sI([r,n]),c=Ks(s,2),u=c[0],l=c[1];if(u===-1/0||l===1/0){var f=l===1/0?[u].concat(lm(cm(0,i-1).map(function(){return 1/0}))):[].concat(lm(cm(0,i-1).map(function(){return-1/0})),[l]);return r>n?um(f):f}if(u===l)return oX(u,i,o);var d=uI(u,l,a,o),p=d.step,m=d.tickMin,y=d.tickMax,g=Ph.rangeStep(m,y.add(new Re(.1).mul(p)),p);return r>n?um(g):g}function sX(t,e){var r=Ks(t,2),n=r[0],i=r[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=sI([n,i]),s=Ks(a,2),c=s[0],u=s[1];if(c===-1/0||u===1/0)return[n,i];if(c===u)return[c];var l=Math.max(e,2),f=cI(new Re(u).sub(c).div(l-1),o,0),d=[].concat(lm(Ph.rangeStep(new Re(c),new Re(u).sub(new Re(.99).mul(f)),f)),[u]);return n>i?um(d):d}var cX=oI(aX),uX=oI(sX),lX="Invariant failed";function qi(t,e){throw new Error(lX)}var fX=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function qo(t){"@babel/helpers - typeof";return qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qo(t)}function Ll(){return Ll=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ll.apply(this,arguments)}function hX(t,e){return gX(t)||mX(t,e)||pX(t,e)||dX()}function dX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pX(t,e){if(t){if(typeof t=="string")return ix(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ix(t,e)}}function ix(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mX(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function gX(t){if(Array.isArray(t))return t}function yX(t,e){if(t==null)return{};var r=vX(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vX(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function bX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _X(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hI(n.key),n)}}function wX(t,e,r){return e&&_X(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xX(t,e,r){return e=Fl(e),AX(t,lI()?Reflect.construct(e,r||[],Fl(t).constructor):e.apply(t,r))}function AX(t,e){if(e&&(qo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EX(t)}function EX(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lI=function(){return!!t})()}function Fl(t){return Fl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fl(t)}function TX(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hm(t,e)}function hm(t,e){return hm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},hm(t,e)}function fI(t,e,r){return e=hI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hI(t){var e=SX(t,"string");return qo(e)=="symbol"?e:e+""}function SX(t,e){if(qo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(qo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vc=function(t){function e(){return bX(this,e),xX(this,e,arguments)}return TX(e,t),wX(e,[{key:"render",value:function(){var n=this.props,i=n.offset,o=n.layout,a=n.width,s=n.dataKey,c=n.data,u=n.dataPointFormatter,l=n.xAxis,f=n.yAxis,d=yX(n,fX),p=ie(d,!1);this.props.direction==="x"&&l.type!=="number"&&qi();var m=c.map(function(y){var g=u(y,s),A=g.x,T=g.y,P=g.value,C=g.errorVal;if(!C)return null;var x=[],I,b;if(Array.isArray(C)){var w=hX(C,2);I=w[0],b=w[1]}else I=b=C;if(o==="vertical"){var S=l.scale,k=T+i,O=k+a,N=k-a,R=S(P-I),V=S(P+b);x.push({x1:V,y1:O,x2:V,y2:N}),x.push({x1:R,y1:k,x2:V,y2:k}),x.push({x1:R,y1:O,x2:R,y2:N})}else if(o==="horizontal"){var F=f.scale,U=A+i,W=U-a,K=U+a,Y=F(P-I),ne=F(P+b);x.push({x1:W,y1:ne,x2:K,y2:ne}),x.push({x1:U,y1:Y,x2:U,y2:ne}),x.push({x1:W,y1:Y,x2:K,y2:Y})}return j.createElement(be,Ll({className:"recharts-errorBar",key:"bar-".concat(x.map(function(oe){return"".concat(oe.x1,"-").concat(oe.x2,"-").concat(oe.y1,"-").concat(oe.y2)}))},p),x.map(function(oe){return j.createElement("line",Ll({},oe,{key:"line-".concat(oe.x1,"-").concat(oe.x2,"-").concat(oe.y1,"-").concat(oe.y2)}))}))});return j.createElement(be,{className:"recharts-errorBars"},m)}}])}(j.Component);fI(Vc,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});fI(Vc,"displayName","ErrorBar");function Gs(t){"@babel/helpers - typeof";return Gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gs(t)}function ox(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function li(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ox(Object(r),!0).forEach(function(n){PX(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ox(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PX(t,e,r){return e=IX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IX(t){var e=OX(t,"string");return Gs(e)=="symbol"?e:e+""}function OX(t,e){if(Gs(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Gs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dI=function(e){var r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=Ht(r,Er);if(!a)return null;var s=Er.defaultProps,c=s!==void 0?li(li({},s),a.props):{},u;return a.props&&a.props.payload?u=a.props&&a.props.payload:o==="children"?u=(n||[]).reduce(function(l,f){var d=f.item,p=f.props,m=p.sectors||p.data||[];return l.concat(m.map(function(y){return{type:a.props.iconType||d.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):u=(n||[]).map(function(l){var f=l.item,d=f.type.defaultProps,p=d!==void 0?li(li({},d),f.props):{},m=p.dataKey,y=p.name,g=p.legendType,A=p.hide;return{inactive:A,dataKey:m,type:c.iconType||g||"square",color:iv(f),value:y||m,payload:p}}),li(li(li({},c),Er.getWithHeight(a,i)),{},{payload:u,item:a})};function Ys(t){"@babel/helpers - typeof";return Ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ys(t)}function ax(t){return NX(t)||kX(t)||RX(t)||CX()}function CX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RX(t,e){if(t){if(typeof t=="string")return dm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dm(t,e)}}function kX(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function NX(t){if(Array.isArray(t))return dm(t)}function dm(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function sx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ge(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sx(Object(r),!0).forEach(function(n){So(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sx(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function So(t,e,r){return e=$X(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $X(t){var e=jX(t,"string");return Ys(e)=="symbol"?e:e+""}function jX(t,e){if(Ys(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ys(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qe(t,e,r){return he(t)||he(e)?r:ot(e)?Xt(t,e,r):ue(e)?e(t):r}function ys(t,e,r,n){var i=kY(t,function(s){return Qe(s,e)});if(r==="number"){var o=i.filter(function(s){return G(s)||parseFloat(s)});return o.length?[Th(o),Mn(o)]:[1/0,-1/0]}var a=n?i.filter(function(s){return!he(s)}):i;return a.map(function(s){return ot(s)||s instanceof Date?s:""})}var DX=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,s=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(s<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var c=o.range,u=0;u<s;u++){var l=u>0?i[u-1].coordinate:i[s-1].coordinate,f=i[u].coordinate,d=u>=s-1?i[0].coordinate:i[u+1].coordinate,p=void 0;if(jt(f-l)!==jt(d-f)){var m=[];if(jt(d-f)===jt(c[1]-c[0])){p=d;var y=f+c[1]-c[0];m[0]=Math.min(y,(y+l)/2),m[1]=Math.max(y,(y+l)/2)}else{p=l;var g=d+c[1]-c[0];m[0]=Math.min(f,(g+f)/2),m[1]=Math.max(f,(g+f)/2)}var A=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(e>A[0]&&e<=A[1]||e>=m[0]&&e<=m[1]){a=i[u].index;break}}else{var T=Math.min(l,d),P=Math.max(l,d);if(e>(T+f)/2&&e<=(P+f)/2){a=i[u].index;break}}}else for(var C=0;C<s;C++)if(C===0&&e<=(n[C].coordinate+n[C+1].coordinate)/2||C>0&&C<s-1&&e>(n[C].coordinate+n[C-1].coordinate)/2&&e<=(n[C].coordinate+n[C+1].coordinate)/2||C===s-1&&e>(n[C].coordinate+n[C-1].coordinate)/2){a=n[C].index;break}return a},iv=function(e){var r,n=e,i=n.type.displayName,o=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Ge(Ge({},e.type.defaultProps),e.props):e.props,a=o.stroke,s=o.fill,c;switch(i){case"Line":c=a;break;case"Area":case"Radar":c=a&&a!=="none"?a:s;break;default:c=s;break}return c},MX=function(e){var r=e.barSize,n=e.totalSize,i=e.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var a={},s=Object.keys(o),c=0,u=s.length;c<u;c++)for(var l=o[s[c]].stackGroups,f=Object.keys(l),d=0,p=f.length;d<p;d++){var m=l[f[d]],y=m.items,g=m.cateAxisId,A=y.filter(function(b){return on(b.type).indexOf("Bar")>=0});if(A&&A.length){var T=A[0].type.defaultProps,P=T!==void 0?Ge(Ge({},T),A[0].props):A[0].props,C=P.barSize,x=P[g];a[x]||(a[x]=[]);var I=he(C)?r:C;a[x].push({item:A[0],stackList:A.slice(1),barSize:he(I)?void 0:Dt(I,n,0)})}}return a},LX=function(e){var r=e.barGap,n=e.barCategoryGap,i=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,s=e.maxBarSize,c=a.length;if(c<1)return null;var u=Dt(r,i,0,!0),l,f=[];if(a[0].barSize===+a[0].barSize){var d=!1,p=i/c,m=a.reduce(function(C,x){return C+x.barSize||0},0);m+=(c-1)*u,m>=i&&(m-=(c-1)*u,u=0),m>=i&&p>0&&(d=!0,p*=.9,m=c*p);var y=(i-m)/2>>0,g={offset:y-u,size:0};l=a.reduce(function(C,x){var I={item:x.item,position:{offset:g.offset+g.size+u,size:d?p:x.barSize}},b=[].concat(ax(C),[I]);return g=b[b.length-1].position,x.stackList&&x.stackList.length&&x.stackList.forEach(function(w){b.push({item:w,position:g})}),b},f)}else{var A=Dt(n,i,0,!0);i-2*A-(c-1)*u<=0&&(u=0);var T=(i-2*A-(c-1)*u)/c;T>1&&(T>>=0);var P=s===+s?Math.min(T,s):T;l=a.reduce(function(C,x,I){var b=[].concat(ax(C),[{item:x.item,position:{offset:A+(T+u)*I+(T-P)/2,size:P}}]);return x.stackList&&x.stackList.length&&x.stackList.forEach(function(w){b.push({item:w,position:b[b.length-1].position})}),b},f)}return l},FX=function(e,r,n,i){var o=n.children,a=n.width,s=n.margin,c=a-(s.left||0)-(s.right||0),u=dI({children:o,legendWidth:c});if(u){var l=i||{},f=l.width,d=l.height,p=u.align,m=u.verticalAlign,y=u.layout;if((y==="vertical"||y==="horizontal"&&m==="middle")&&p!=="center"&&G(e[p]))return Ge(Ge({},e),{},So({},p,e[p]+(f||0)));if((y==="horizontal"||y==="vertical"&&p==="center")&&m!=="middle"&&G(e[m]))return Ge(Ge({},e),{},So({},m,e[m]+(d||0)))}return e},VX=function(e,r,n){return he(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},pI=function(e,r,n,i,o){var a=r.props.children,s=Qt(a,Vc).filter(function(u){return VX(i,o,u.props.direction)});if(s&&s.length){var c=s.map(function(u){return u.props.dataKey});return e.reduce(function(u,l){var f=Qe(l,n);if(he(f))return u;var d=Array.isArray(f)?[Th(f),Mn(f)]:[f,f],p=c.reduce(function(m,y){var g=Qe(l,y,0),A=d[0]-Math.abs(Array.isArray(g)?g[0]:g),T=d[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(A,m[0]),Math.max(T,m[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},BX=function(e,r,n,i,o){var a=r.map(function(s){return pI(e,s,n,o,i)}).filter(function(s){return!he(s)});return a&&a.length?a.reduce(function(s,c){return[Math.min(s[0],c[0]),Math.max(s[1],c[1])]},[1/0,-1/0]):null},mI=function(e,r,n,i,o){var a=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&pI(e,c,u,i)||ys(e,u,n,o)});if(n==="number")return a.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var s={};return a.reduce(function(c,u){for(var l=0,f=u.length;l<f;l++)s[u[l]]||(s[u[l]]=!0,c.push(u[l]));return c},[])},gI=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},yI=function(e,r,n,i){if(i)return e.map(function(c){return c.coordinate});var o,a,s=e.map(function(c){return c.coordinate===r&&(o=!0),c.coordinate===n&&(a=!0),c.coordinate});return o||s.push(r),a||s.push(n),s},en=function(e,r,n){if(!e)return null;var i=e.scale,o=e.duplicateDomain,a=e.type,s=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(r||n)&&a==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?jt(s[0]-s[1])*2*u:u,r&&(e.ticks||e.niceTicks)){var l=(e.ticks||e.niceTicks).map(function(f){var d=o?o.indexOf(f):f;return{coordinate:i(d)+u,value:f,offset:u}});return l.filter(function(f){return!_a(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,d){return{coordinate:i(f)+u,value:f,index:d,offset:u}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,d){return{coordinate:i(f)+u,value:o?o[f]:f,index:d,offset:u}})},Bd=new WeakMap,Tu=function(e,r){if(typeof r!="function")return e;Bd.has(e)||Bd.set(e,new WeakMap);var n=Bd.get(e);if(n.has(r))return n.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},vI=function(e,r,n){var i=e.scale,o=e.type,a=e.layout,s=e.axisType;if(i==="auto")return a==="radial"&&s==="radiusAxis"?{scale:Bs(),realScaleType:"band"}:a==="radial"&&s==="angleAxis"?{scale:Nl(),realScaleType:"linear"}:o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:gs(),realScaleType:"point"}:o==="category"?{scale:Bs(),realScaleType:"band"}:{scale:Nl(),realScaleType:"linear"};if($c(i)){var c="scale".concat(lh(i));return{scale:(ex[c]||gs)(),realScaleType:ex[c]?c:"point"}}return ue(i)?{scale:i}:{scale:gs(),realScaleType:"point"}},cx=1e-4,bI=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,i=e.range(),o=Math.min(i[0],i[1])-cx,a=Math.max(i[0],i[1])+cx,s=e(r[0]),c=e(r[n-1]);(s<o||s>a||c<o||c>a)&&e.domain([r[0],r[n-1]])}},UX=function(e,r){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===r)return e[n].position;return null},qX=function(e,r){if(!r||r.length!==2||!G(r[0])||!G(r[1]))return e;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),o=[e[0],e[1]];return(!G(e[0])||e[0]<n)&&(o[0]=n),(!G(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<n&&(o[1]=n),o},WX=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var o=0,a=0,s=0;s<r;++s){var c=_a(e[s][n][1])?e[s][n][0]:e[s][n][1];c>=0?(e[s][n][0]=o,e[s][n][1]=o+c,o=e[s][n][1]):(e[s][n][0]=a,e[s][n][1]=a+c,a=e[s][n][1])}},zX=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var o=0,a=0;a<r;++a){var s=_a(e[a][n][1])?e[a][n][0]:e[a][n][1];s>=0?(e[a][n][0]=o,e[a][n][1]=o+s,o=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}},HX={sign:WX,expand:f5,none:jo,silhouette:h5,wiggle:d5,positive:zX},KX=function(e,r,n){var i=r.map(function(s){return s.props.dataKey}),o=HX[n],a=l5().keys(i).value(function(s,c){return+Qe(s,c,0)}).order(Lp).offset(o);return a(e)},GX=function(e,r,n,i,o,a){if(!e)return null;var s=a?r.reverse():r,c={},u=s.reduce(function(f,d){var p,m=(p=d.type)!==null&&p!==void 0&&p.defaultProps?Ge(Ge({},d.type.defaultProps),d.props):d.props,y=m.stackId,g=m.hide;if(g)return f;var A=m[n],T=f[A]||{hasStack:!1,stackGroups:{}};if(ot(y)){var P=T.stackGroups[y]||{numericAxisId:n,cateAxisId:i,items:[]};P.items.push(d),T.hasStack=!0,T.stackGroups[y]=P}else T.stackGroups[Qi("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[d]};return Ge(Ge({},f),{},So({},A,T))},c),l={};return Object.keys(u).reduce(function(f,d){var p=u[d];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(y,g){var A=p.stackGroups[g];return Ge(Ge({},y),{},So({},g,{numericAxisId:n,cateAxisId:i,items:A.items,stackedData:KX(e,A.items,o)}))},m)}return Ge(Ge({},f),{},So({},d,p))},l)},_I=function(e,r){var n=r.realScaleType,i=r.type,o=r.tickCount,a=r.originalDomain,s=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(o&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var u=e.domain();if(!u.length)return null;var l=cX(u,o,s);return e.domain([Th(l),Mn(l)]),{niceTicks:l}}if(o&&i==="number"){var f=e.domain(),d=uX(f,o,s);return{niceTicks:d}}return null};function Vl(t){var e=t.axis,r=t.ticks,n=t.bandSize,i=t.entry,o=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!he(i[e.dataKey])){var s=hl(r,"value",i[e.dataKey]);if(s)return s.coordinate+n/2}return r[o]?r[o].coordinate+n/2:null}var c=Qe(i,he(a)?e.dataKey:a);return he(c)?null:e.scale(c)}var ux=function(e){var r=e.axis,n=e.ticks,i=e.offset,o=e.bandSize,a=e.entry,s=e.index;if(r.type==="category")return n[s]?n[s].coordinate+i:null;var c=Qe(a,r.dataKey,r.domain[s]);return he(c)?null:r.scale(c)-o/2+i},YX=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return i<=0&&o>=0?0:o<0?o:i}return n[0]},XX=function(e,r){var n,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Ge(Ge({},e.type.defaultProps),e.props):e.props,o=i.stackId;if(ot(o)){var a=r[o];if(a){var s=a.items.indexOf(e);return s>=0?a.stackedData[s]:null}}return null},QX=function(e){return e.reduce(function(r,n){return[Th(n.concat([r[0]]).filter(G)),Mn(n.concat([r[1]]).filter(G))]},[1/0,-1/0])},wI=function(e,r,n){return Object.keys(e).reduce(function(i,o){var a=e[o],s=a.stackedData,c=s.reduce(function(u,l){var f=QX(l.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},lx=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fx=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pm=function(e,r,n){if(ue(e))return e(r,n);if(!Array.isArray(e))return r;var i=[];if(G(e[0]))i[0]=n?e[0]:Math.min(e[0],r[0]);else if(lx.test(e[0])){var o=+lx.exec(e[0])[1];i[0]=r[0]-o}else ue(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(G(e[1]))i[1]=n?e[1]:Math.max(e[1],r[1]);else if(fx.test(e[1])){var a=+fx.exec(e[1])[1];i[1]=r[1]+a}else ue(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},Bl=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&r&&r.length>=2){for(var o=ky(r,function(f){return f.coordinate}),a=1/0,s=1,c=o.length;s<c;s++){var u=o[s],l=o[s-1];a=Math.min((u.coordinate||0)-(l.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0},hx=function(e,r,n){return!e||!e.length||Bi(e,Xt(n,"type.defaultProps.domain"))?r:e},xI=function(e,r){var n=e.type.defaultProps?Ge(Ge({},e.type.defaultProps),e.props):e.props,i=n.dataKey,o=n.name,a=n.unit,s=n.formatter,c=n.tooltipType,u=n.chartType,l=n.hide;return Ge(Ge({},ie(e,!1)),{},{dataKey:i,unit:a,formatter:s,name:o||i,color:iv(e),value:Qe(r,i),type:c,payload:r,chartType:u,hide:l})};function Xs(t){"@babel/helpers - typeof";return Xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xs(t)}function dx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Kr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dx(Object(r),!0).forEach(function(n){AI(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dx(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function AI(t,e,r){return e=JX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JX(t){var e=ZX(t,"string");return Xs(e)=="symbol"?e:e+""}function ZX(t,e){if(Xs(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Xs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eQ(t,e){return iQ(t)||nQ(t,e)||rQ(t,e)||tQ()}function tQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rQ(t,e){if(t){if(typeof t=="string")return px(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return px(t,e)}}function px(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nQ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function iQ(t){if(Array.isArray(t))return t}var Ul=Math.PI/180,oQ=function(e){return e*180/Math.PI},Le=function(e,r,n,i){return{x:e+Math.cos(-Ul*i)*n,y:r+Math.sin(-Ul*i)*n}},EI=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},aQ=function(e,r,n,i,o){var a=e.width,s=e.height,c=e.startAngle,u=e.endAngle,l=Dt(e.cx,a,a/2),f=Dt(e.cy,s,s/2),d=EI(a,s,n),p=Dt(e.innerRadius,d,0),m=Dt(e.outerRadius,d,d*.8),y=Object.keys(r);return y.reduce(function(g,A){var T=r[A],P=T.domain,C=T.reversed,x;if(he(T.range))i==="angleAxis"?x=[c,u]:i==="radiusAxis"&&(x=[p,m]),C&&(x=[x[1],x[0]]);else{x=T.range;var I=x,b=eQ(I,2);c=b[0],u=b[1]}var w=vI(T,o),S=w.realScaleType,k=w.scale;k.domain(P).range(x),bI(k);var O=_I(k,Kr(Kr({},T),{},{realScaleType:S})),N=Kr(Kr(Kr({},T),O),{},{range:x,radius:m,realScaleType:S,scale:k,cx:l,cy:f,innerRadius:p,outerRadius:m,startAngle:c,endAngle:u});return Kr(Kr({},g),{},AI({},A,N))},{})},sQ=function(e,r){var n=e.x,i=e.y,o=r.x,a=r.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(i-a,2))},cQ=function(e,r){var n=e.x,i=e.y,o=r.cx,a=r.cy,s=sQ({x:n,y:i},{x:o,y:a});if(s<=0)return{radius:s};var c=(n-o)/s,u=Math.acos(c);return i>a&&(u=2*Math.PI-u),{radius:s,angle:oQ(u),angleInRadian:u}},uQ=function(e){var r=e.startAngle,n=e.endAngle,i=Math.floor(r/360),o=Math.floor(n/360),a=Math.min(i,o);return{startAngle:r-a*360,endAngle:n-a*360}},lQ=function(e,r){var n=r.startAngle,i=r.endAngle,o=Math.floor(n/360),a=Math.floor(i/360),s=Math.min(o,a);return e+s*360},mx=function(e,r){var n=e.x,i=e.y,o=cQ({x:n,y:i},r),a=o.radius,s=o.angle,c=r.innerRadius,u=r.outerRadius;if(a<c||a>u)return!1;if(a===0)return!0;var l=uQ(r),f=l.startAngle,d=l.endAngle,p=s,m;if(f<=d){for(;p>d;)p-=360;for(;p<f;)p+=360;m=p>=f&&p<=d}else{for(;p>f;)p-=360;for(;p<d;)p+=360;m=p>=d&&p<=f}return m?Kr(Kr({},r),{},{radius:a,angle:lQ(p,r)}):null},TI=function(e){return!D.isValidElement(e)&&!ue(e)&&typeof e!="boolean"?e.className:""};function Qs(t){"@babel/helpers - typeof";return Qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qs(t)}var fQ=["offset"];function hQ(t){return gQ(t)||mQ(t)||pQ(t)||dQ()}function dQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pQ(t,e){if(t){if(typeof t=="string")return mm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mm(t,e)}}function mQ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gQ(t){if(Array.isArray(t))return mm(t)}function mm(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function yQ(t,e){if(t==null)return{};var r=vQ(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vQ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function gx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function nt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gx(Object(r),!0).forEach(function(n){bQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gx(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bQ(t,e,r){return e=_Q(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _Q(t){var e=wQ(t,"string");return Qs(e)=="symbol"?e:e+""}function wQ(t,e){if(Qs(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Qs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Js(){return Js=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Js.apply(this,arguments)}var xQ=function(e){var r=e.value,n=e.formatter,i=he(e.children)?r:e.children;return ue(n)?n(i):i},AQ=function(e,r){var n=jt(r-e),i=Math.min(Math.abs(r-e),360);return n*i},EQ=function(e,r,n){var i=e.position,o=e.viewBox,a=e.offset,s=e.className,c=o,u=c.cx,l=c.cy,f=c.innerRadius,d=c.outerRadius,p=c.startAngle,m=c.endAngle,y=c.clockWise,g=(f+d)/2,A=AQ(p,m),T=A>=0?1:-1,P,C;i==="insideStart"?(P=p+T*a,C=y):i==="insideEnd"?(P=m-T*a,C=!y):i==="end"&&(P=m+T*a,C=y),C=A<=0?C:!C;var x=Le(u,l,g,P),I=Le(u,l,g,P+(C?1:-1)*359),b="M".concat(x.x,",").concat(x.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(C?0:1,`,
    `).concat(I.x,",").concat(I.y),w=he(e.id)?Qi("recharts-radial-line-"):e.id;return j.createElement("text",Js({},n,{dominantBaseline:"central",className:ge("recharts-radial-bar-label",s)}),j.createElement("defs",null,j.createElement("path",{id:w,d:b})),j.createElement("textPath",{xlinkHref:"#".concat(w)},r))},TQ=function(e){var r=e.viewBox,n=e.offset,i=e.position,o=r,a=o.cx,s=o.cy,c=o.innerRadius,u=o.outerRadius,l=o.startAngle,f=o.endAngle,d=(l+f)/2;if(i==="outside"){var p=Le(a,s,u+n,d),m=p.x,y=p.y;return{x:m,y,textAnchor:m>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var g=(c+u)/2,A=Le(a,s,g,d),T=A.x,P=A.y;return{x:T,y:P,textAnchor:"middle",verticalAnchor:"middle"}},SQ=function(e){var r=e.viewBox,n=e.parentViewBox,i=e.offset,o=e.position,a=r,s=a.x,c=a.y,u=a.width,l=a.height,f=l>=0?1:-1,d=f*i,p=f>0?"end":"start",m=f>0?"start":"end",y=u>=0?1:-1,g=y*i,A=y>0?"end":"start",T=y>0?"start":"end";if(o==="top"){var P={x:s+u/2,y:c-f*i,textAnchor:"middle",verticalAnchor:p};return nt(nt({},P),n?{height:Math.max(c-n.y,0),width:u}:{})}if(o==="bottom"){var C={x:s+u/2,y:c+l+d,textAnchor:"middle",verticalAnchor:m};return nt(nt({},C),n?{height:Math.max(n.y+n.height-(c+l),0),width:u}:{})}if(o==="left"){var x={x:s-g,y:c+l/2,textAnchor:A,verticalAnchor:"middle"};return nt(nt({},x),n?{width:Math.max(x.x-n.x,0),height:l}:{})}if(o==="right"){var I={x:s+u+g,y:c+l/2,textAnchor:T,verticalAnchor:"middle"};return nt(nt({},I),n?{width:Math.max(n.x+n.width-I.x,0),height:l}:{})}var b=n?{width:u,height:l}:{};return o==="insideLeft"?nt({x:s+g,y:c+l/2,textAnchor:T,verticalAnchor:"middle"},b):o==="insideRight"?nt({x:s+u-g,y:c+l/2,textAnchor:A,verticalAnchor:"middle"},b):o==="insideTop"?nt({x:s+u/2,y:c+d,textAnchor:"middle",verticalAnchor:m},b):o==="insideBottom"?nt({x:s+u/2,y:c+l-d,textAnchor:"middle",verticalAnchor:p},b):o==="insideTopLeft"?nt({x:s+g,y:c+d,textAnchor:T,verticalAnchor:m},b):o==="insideTopRight"?nt({x:s+u-g,y:c+d,textAnchor:A,verticalAnchor:m},b):o==="insideBottomLeft"?nt({x:s+g,y:c+l-d,textAnchor:T,verticalAnchor:p},b):o==="insideBottomRight"?nt({x:s+u-g,y:c+l-d,textAnchor:A,verticalAnchor:p},b):ga(o)&&(G(o.x)||xi(o.x))&&(G(o.y)||xi(o.y))?nt({x:s+Dt(o.x,u),y:c+Dt(o.y,l),textAnchor:"end",verticalAnchor:"end"},b):nt({x:s+u/2,y:c+l/2,textAnchor:"middle",verticalAnchor:"middle"},b)},PQ=function(e){return"cx"in e&&G(e.cx)};function lt(t){var e=t.offset,r=e===void 0?5:e,n=yQ(t,fQ),i=nt({offset:r},n),o=i.viewBox,a=i.position,s=i.value,c=i.children,u=i.content,l=i.className,f=l===void 0?"":l,d=i.textBreakAll;if(!o||he(s)&&he(c)&&!D.isValidElement(u)&&!ue(u))return null;if(D.isValidElement(u))return D.cloneElement(u,i);var p;if(ue(u)){if(p=D.createElement(u,i),D.isValidElement(p))return p}else p=xQ(i);var m=PQ(o),y=ie(i,!0);if(m&&(a==="insideStart"||a==="insideEnd"||a==="end"))return EQ(i,p,y);var g=m?TQ(i):SQ(i);return j.createElement(Vi,Js({className:ge("recharts-label",f)},y,g,{breakAll:d}),p)}lt.displayName="Label";var SI=function(e){var r=e.cx,n=e.cy,i=e.angle,o=e.startAngle,a=e.endAngle,s=e.r,c=e.radius,u=e.innerRadius,l=e.outerRadius,f=e.x,d=e.y,p=e.top,m=e.left,y=e.width,g=e.height,A=e.clockWise,T=e.labelViewBox;if(T)return T;if(G(y)&&G(g)){if(G(f)&&G(d))return{x:f,y:d,width:y,height:g};if(G(p)&&G(m))return{x:p,y:m,width:y,height:g}}return G(f)&&G(d)?{x:f,y:d,width:0,height:0}:G(r)&&G(n)?{cx:r,cy:n,startAngle:o||i||0,endAngle:a||i||0,innerRadius:u||0,outerRadius:l||c||s||0,clockWise:A}:e.viewBox?e.viewBox:{}},IQ=function(e,r){return e?e===!0?j.createElement(lt,{key:"label-implicit",viewBox:r}):ot(e)?j.createElement(lt,{key:"label-implicit",viewBox:r,value:e}):D.isValidElement(e)?e.type===lt?D.cloneElement(e,{key:"label-implicit",viewBox:r}):j.createElement(lt,{key:"label-implicit",content:e,viewBox:r}):ue(e)?j.createElement(lt,{key:"label-implicit",content:e,viewBox:r}):ga(e)?j.createElement(lt,Js({viewBox:r},e,{key:"label-implicit"})):null:null},OQ=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,o=SI(e),a=Qt(i,lt).map(function(c,u){return D.cloneElement(c,{viewBox:r||o,key:"label-".concat(u)})});if(!n)return a;var s=IQ(e.label,r||o);return[s].concat(hQ(a))};lt.parseViewBox=SI;lt.renderCallByParent=OQ;function CQ(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var RQ=CQ;const kQ=ke(RQ);function Zs(t){"@babel/helpers - typeof";return Zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zs(t)}var NQ=["valueAccessor"],$Q=["data","dataKey","clockWise","id","textBreakAll"];function jQ(t){return FQ(t)||LQ(t)||MQ(t)||DQ()}function DQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MQ(t,e){if(t){if(typeof t=="string")return gm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gm(t,e)}}function LQ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function FQ(t){if(Array.isArray(t))return gm(t)}function gm(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ql(){return ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ql.apply(this,arguments)}function yx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yx(Object(r),!0).forEach(function(n){VQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yx(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function VQ(t,e,r){return e=BQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BQ(t){var e=UQ(t,"string");return Zs(e)=="symbol"?e:e+""}function UQ(t,e){if(Zs(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Zs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bx(t,e){if(t==null)return{};var r=qQ(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function qQ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var WQ=function(e){return Array.isArray(e.value)?kQ(e.value):e.value};function Nr(t){var e=t.valueAccessor,r=e===void 0?WQ:e,n=bx(t,NQ),i=n.data,o=n.dataKey,a=n.clockWise,s=n.id,c=n.textBreakAll,u=bx(n,$Q);return!i||!i.length?null:j.createElement(be,{className:"recharts-label-list"},i.map(function(l,f){var d=he(o)?r(l,f):Qe(l&&l.payload,o),p=he(s)?{}:{id:"".concat(s,"-").concat(f)};return j.createElement(lt,ql({},ie(l,!0),u,p,{parentViewBox:l.parentViewBox,value:d,textBreakAll:c,viewBox:lt.parseViewBox(he(a)?l:vx(vx({},l),{},{clockWise:a})),key:"label-".concat(f),index:f}))}))}Nr.displayName="LabelList";function zQ(t,e){return t?t===!0?j.createElement(Nr,{key:"labelList-implicit",data:e}):j.isValidElement(t)||ue(t)?j.createElement(Nr,{key:"labelList-implicit",data:e,content:t}):ga(t)?j.createElement(Nr,ql({data:e},t,{key:"labelList-implicit"})):null:null}function HQ(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,i=Qt(n,Nr).map(function(a,s){return D.cloneElement(a,{data:e,key:"labelList-".concat(s)})});if(!r)return i;var o=zQ(t.label,e);return[o].concat(jQ(i))}Nr.renderCallByParent=HQ;function ec(t){"@babel/helpers - typeof";return ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ec(t)}function ym(){return ym=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ym.apply(this,arguments)}function _x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function wx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_x(Object(r),!0).forEach(function(n){KQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_x(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KQ(t,e,r){return e=GQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GQ(t){var e=YQ(t,"string");return ec(e)=="symbol"?e:e+""}function YQ(t,e){if(ec(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ec(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var XQ=function(e,r){var n=jt(r-e),i=Math.min(Math.abs(r-e),359.999);return n*i},Su=function(e){var r=e.cx,n=e.cy,i=e.radius,o=e.angle,a=e.sign,s=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,l=c*(s?1:-1)+i,f=Math.asin(c/l)/Ul,d=u?o:o+a*f,p=Le(r,n,l,d),m=Le(r,n,i,d),y=u?o-a*f:o,g=Le(r,n,l*Math.cos(f*Ul),y);return{center:p,circleTangency:m,lineTangency:g,theta:f}},PI=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.startAngle,s=e.endAngle,c=XQ(a,s),u=a+c,l=Le(r,n,o,a),f=Le(r,n,o,u),d="M ".concat(l.x,",").concat(l.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(a>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var p=Le(r,n,i,a),m=Le(r,n,i,u);d+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(a<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else d+="L ".concat(r,",").concat(n," Z");return d},QQ=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,s=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,l=e.endAngle,f=jt(l-u),d=Su({cx:r,cy:n,radius:o,angle:u,sign:f,cornerRadius:a,cornerIsExternal:c}),p=d.circleTangency,m=d.lineTangency,y=d.theta,g=Su({cx:r,cy:n,radius:o,angle:l,sign:-f,cornerRadius:a,cornerIsExternal:c}),A=g.circleTangency,T=g.lineTangency,P=g.theta,C=c?Math.abs(u-l):Math.abs(u-l)-y-P;if(C<0)return s?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):PI({cx:r,cy:n,innerRadius:i,outerRadius:o,startAngle:u,endAngle:l});var x="M ".concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(C>180),",").concat(+(f<0),",").concat(A.x,",").concat(A.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
  `);if(i>0){var I=Su({cx:r,cy:n,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),b=I.circleTangency,w=I.lineTangency,S=I.theta,k=Su({cx:r,cy:n,radius:i,angle:l,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),O=k.circleTangency,N=k.lineTangency,R=k.theta,V=c?Math.abs(u-l):Math.abs(u-l)-S-R;if(V<0&&a===0)return"".concat(x,"L").concat(r,",").concat(n,"Z");x+="L".concat(N.x,",").concat(N.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(V>180),",").concat(+(f>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,"Z")}else x+="L".concat(r,",").concat(n,"Z");return x},JQ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},II=function(e){var r=wx(wx({},JQ),e),n=r.cx,i=r.cy,o=r.innerRadius,a=r.outerRadius,s=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,l=r.startAngle,f=r.endAngle,d=r.className;if(a<o||l===f)return null;var p=ge("recharts-sector",d),m=a-o,y=Dt(s,m,0,!0),g;return y>0&&Math.abs(l-f)<360?g=QQ({cx:n,cy:i,innerRadius:o,outerRadius:a,cornerRadius:Math.min(y,m/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:l,endAngle:f}):g=PI({cx:n,cy:i,innerRadius:o,outerRadius:a,startAngle:l,endAngle:f}),j.createElement("path",ym({},ie(r,!0),{className:p,d:g,role:"img"}))};function tc(t){"@babel/helpers - typeof";return tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tc(t)}function vm(){return vm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vm.apply(this,arguments)}function xx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ax(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xx(Object(r),!0).forEach(function(n){ZQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xx(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZQ(t,e,r){return e=eJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eJ(t){var e=tJ(t,"string");return tc(e)=="symbol"?e:e+""}function tJ(t,e){if(tc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(tc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ex={curveBasisClosed:Z4,curveBasisOpen:e5,curveBasis:J4,curveBumpX:L4,curveBumpY:F4,curveLinearClosed:t5,curveLinear:hh,curveMonotoneX:r5,curveMonotoneY:n5,curveNatural:i5,curveStep:o5,curveStepAfter:s5,curveStepBefore:a5},Pu=function(e){return e.x===+e.x&&e.y===+e.y},Qa=function(e){return e.x},Ja=function(e){return e.y},rJ=function(e,r){if(ue(e))return e;var n="curve".concat(lh(e));return(n==="curveMonotone"||n==="curveBump")&&r?Ex["".concat(n).concat(r==="vertical"?"Y":"X")]:Ex[n]||hh},nJ=function(e){var r=e.type,n=r===void 0?"linear":r,i=e.points,o=i===void 0?[]:i,a=e.baseLine,s=e.layout,c=e.connectNulls,u=c===void 0?!1:c,l=rJ(n,s),f=u?o.filter(function(y){return Pu(y)}):o,d;if(Array.isArray(a)){var p=u?a.filter(function(y){return Pu(y)}):a,m=f.map(function(y,g){return Ax(Ax({},y),{},{base:p[g]})});return s==="vertical"?d=gu().y(Ja).x1(Qa).x0(function(y){return y.base.x}):d=gu().x(Qa).y1(Ja).y0(function(y){return y.base.y}),d.defined(Pu).curve(l),d(m)}return s==="vertical"&&G(a)?d=gu().y(Ja).x1(Qa).x0(a):G(a)?d=gu().x(Qa).y1(Ja).y0(a):d=xS().x(Qa).y(Ja),d.defined(Pu).curve(l),d(f)},Ci=function(e){var r=e.className,n=e.points,i=e.path,o=e.pathRef;if((!n||!n.length)&&!i)return null;var a=n&&n.length?nJ(e):i;return j.createElement("path",vm({},ie(e,!1),dl(e),{className:ge("recharts-curve",r),d:a,ref:o}))},OI={exports:{}},iJ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",oJ=iJ,aJ=oJ;function CI(){}function RI(){}RI.resetWarningCache=CI;var sJ=function(){function t(n,i,o,a,s,c){if(c!==aJ){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:RI,resetWarningCache:CI};return r.PropTypes=r,r};OI.exports=sJ();var cJ=OI.exports;const ye=ke(cJ);var uJ=Object.getOwnPropertyNames,lJ=Object.getOwnPropertySymbols,fJ=Object.prototype.hasOwnProperty;function Tx(t,e){return function(n,i,o){return t(n,i,o)&&e(n,i,o)}}function Iu(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);var o=i.cache,a=o.get(r),s=o.get(n);if(a&&s)return a===n&&s===r;o.set(r,n),o.set(n,r);var c=t(r,n,i);return o.delete(r),o.delete(n),c}}function Sx(t){return uJ(t).concat(lJ(t))}var kI=Object.hasOwn||function(t,e){return fJ.call(t,e)};function Pa(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var NI="_owner",Px=Object.getOwnPropertyDescriptor,Ix=Object.keys;function hJ(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function dJ(t,e){return Pa(t.getTime(),e.getTime())}function Ox(t,e,r){if(t.size!==e.size)return!1;for(var n={},i=t.entries(),o=0,a,s;(a=i.next())&&!a.done;){for(var c=e.entries(),u=!1,l=0;(s=c.next())&&!s.done;){var f=a.value,d=f[0],p=f[1],m=s.value,y=m[0],g=m[1];!u&&!n[l]&&(u=r.equals(d,y,o,l,t,e,r)&&r.equals(p,g,d,y,t,e,r))&&(n[l]=!0),l++}if(!u)return!1;o++}return!0}function pJ(t,e,r){var n=Ix(t),i=n.length;if(Ix(e).length!==i)return!1;for(var o;i-- >0;)if(o=n[i],o===NI&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!kI(e,o)||!r.equals(t[o],e[o],o,o,t,e,r))return!1;return!0}function Za(t,e,r){var n=Sx(t),i=n.length;if(Sx(e).length!==i)return!1;for(var o,a,s;i-- >0;)if(o=n[i],o===NI&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!kI(e,o)||!r.equals(t[o],e[o],o,o,t,e,r)||(a=Px(t,o),s=Px(e,o),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable)))return!1;return!0}function mJ(t,e){return Pa(t.valueOf(),e.valueOf())}function gJ(t,e){return t.source===e.source&&t.flags===e.flags}function Cx(t,e,r){if(t.size!==e.size)return!1;for(var n={},i=t.values(),o,a;(o=i.next())&&!o.done;){for(var s=e.values(),c=!1,u=0;(a=s.next())&&!a.done;)!c&&!n[u]&&(c=r.equals(o.value,a.value,o.value,a.value,t,e,r))&&(n[u]=!0),u++;if(!c)return!1}return!0}function yJ(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}var vJ="[object Arguments]",bJ="[object Boolean]",_J="[object Date]",wJ="[object Map]",xJ="[object Number]",AJ="[object Object]",EJ="[object RegExp]",TJ="[object Set]",SJ="[object String]",PJ=Array.isArray,Rx=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,kx=Object.assign,IJ=Object.prototype.toString.call.bind(Object.prototype.toString);function OJ(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,a=t.areRegExpsEqual,s=t.areSetsEqual,c=t.areTypedArraysEqual;return function(l,f,d){if(l===f)return!0;if(l==null||f==null||typeof l!="object"||typeof f!="object")return l!==l&&f!==f;var p=l.constructor;if(p!==f.constructor)return!1;if(p===Object)return i(l,f,d);if(PJ(l))return e(l,f,d);if(Rx!=null&&Rx(l))return c(l,f,d);if(p===Date)return r(l,f,d);if(p===RegExp)return a(l,f,d);if(p===Map)return n(l,f,d);if(p===Set)return s(l,f,d);var m=IJ(l);return m===_J?r(l,f,d):m===EJ?a(l,f,d):m===wJ?n(l,f,d):m===TJ?s(l,f,d):m===AJ?typeof l.then!="function"&&typeof f.then!="function"&&i(l,f,d):m===vJ?i(l,f,d):m===bJ||m===xJ||m===SJ?o(l,f,d):!1}}function CJ(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,i={areArraysEqual:n?Za:hJ,areDatesEqual:dJ,areMapsEqual:n?Tx(Ox,Za):Ox,areObjectsEqual:n?Za:pJ,arePrimitiveWrappersEqual:mJ,areRegExpsEqual:gJ,areSetsEqual:n?Tx(Cx,Za):Cx,areTypedArraysEqual:n?Za:yJ};if(r&&(i=kx({},i,r(i))),e){var o=Iu(i.areArraysEqual),a=Iu(i.areMapsEqual),s=Iu(i.areObjectsEqual),c=Iu(i.areSetsEqual);i=kx({},i,{areArraysEqual:o,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:c})}return i}function RJ(t){return function(e,r,n,i,o,a,s){return t(e,r,s)}}function kJ(t){var e=t.circular,r=t.comparator,n=t.createState,i=t.equals,o=t.strict;if(n)return function(c,u){var l=n(),f=l.cache,d=f===void 0?e?new WeakMap:void 0:f,p=l.meta;return r(c,u,{cache:d,equals:i,meta:p,strict:o})};if(e)return function(c,u){return r(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var a={cache:void 0,equals:i,meta:void 0,strict:o};return function(c,u){return r(c,u,a)}}var NJ=ii();ii({strict:!0});ii({circular:!0});ii({circular:!0,strict:!0});ii({createInternalComparator:function(){return Pa}});ii({strict:!0,createInternalComparator:function(){return Pa}});ii({circular:!0,createInternalComparator:function(){return Pa}});ii({circular:!0,createInternalComparator:function(){return Pa},strict:!0});function ii(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,i=t.createState,o=t.strict,a=o===void 0?!1:o,s=CJ(t),c=OJ(s),u=n?n(c):RJ(c);return kJ({circular:r,comparator:c,createState:i,equals:u,strict:a})}function $J(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function Nx(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(o){r<0&&(r=o),o-r>e?(t(o),r=-1):$J(i)};requestAnimationFrame(n)}function bm(t){"@babel/helpers - typeof";return bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bm(t)}function jJ(t){return FJ(t)||LJ(t)||MJ(t)||DJ()}function DJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MJ(t,e){if(t){if(typeof t=="string")return $x(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $x(t,e)}}function $x(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function LJ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function FJ(t){if(Array.isArray(t))return t}function VJ(){var t={},e=function(){return null},r=!1,n=function i(o){if(!r){if(Array.isArray(o)){if(!o.length)return;var a=o,s=jJ(a),c=s[0],u=s.slice(1);if(typeof c=="number"){Nx(i.bind(null,u),c);return}i(c),Nx(i.bind(null,u));return}bm(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){r=!0},start:function(o){r=!1,n(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function rc(t){"@babel/helpers - typeof";return rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rc(t)}function jx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Dx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jx(Object(r),!0).forEach(function(n){$I(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jx(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $I(t,e,r){return e=BJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BJ(t){var e=UJ(t,"string");return rc(e)==="symbol"?e:String(e)}function UJ(t,e){if(rc(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(rc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qJ=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,i){return n.filter(function(o){return i.includes(o)})})},WJ=function(e){return e},zJ=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},vs=function(e,r){return Object.keys(r).reduce(function(n,i){return Dx(Dx({},n),{},$I({},i,e(i,r[i])))},{})},Mx=function(e,r,n){return e.map(function(i){return"".concat(zJ(i)," ").concat(r,"ms ").concat(n)}).join(",")};function HJ(t,e){return YJ(t)||GJ(t,e)||jI(t,e)||KJ()}function KJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GJ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function YJ(t){if(Array.isArray(t))return t}function XJ(t){return ZJ(t)||JJ(t)||jI(t)||QJ()}function QJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jI(t,e){if(t){if(typeof t=="string")return _m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _m(t,e)}}function JJ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ZJ(t){if(Array.isArray(t))return _m(t)}function _m(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Wl=1e-4,DI=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},MI=function(e,r){return e.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},Lx=function(e,r){return function(n){var i=DI(e,r);return MI(i,n)}},eZ=function(e,r){return function(n){var i=DI(e,r),o=[].concat(XJ(i.map(function(a,s){return a*s}).slice(1)),[0]);return MI(o,n)}},Fx=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0],o=r[1],a=r[2],s=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,o=0,a=1,s=1;break;case"ease":i=.25,o=.1,a=.25,s=1;break;case"ease-in":i=.42,o=0,a=1,s=1;break;case"ease-out":i=.42,o=0,a=.58,s=1;break;case"ease-in-out":i=0,o=0,a=.58,s=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),l=HJ(u,4);i=l[0],o=l[1],a=l[2],s=l[3]}}}var f=Lx(i,a),d=Lx(o,s),p=eZ(i,a),m=function(A){return A>1?1:A<0?0:A},y=function(A){for(var T=A>1?1:A,P=T,C=0;C<8;++C){var x=f(P)-T,I=p(P);if(Math.abs(x-T)<Wl||I<Wl)return d(P);P=m(P-x/I)}return d(P)};return y.isStepper=!1,y},tZ=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,i=e.damping,o=i===void 0?8:i,a=e.dt,s=a===void 0?17:a,c=function(l,f,d){var p=-(l-f)*n,m=d*o,y=d+(p-m)*s/1e3,g=d*s/1e3+l;return Math.abs(g-f)<Wl&&Math.abs(y)<Wl?[f,0]:[g,y]};return c.isStepper=!0,c.dt=s,c},rZ=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Fx(i);case"spring":return tZ();default:if(i.split("(")[0]==="cubic-bezier")return Fx(i)}return typeof i=="function"?i:null};function nc(t){"@babel/helpers - typeof";return nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nc(t)}function Vx(t){return oZ(t)||iZ(t)||LI(t)||nZ()}function nZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oZ(t){if(Array.isArray(t))return xm(t)}function Bx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bx(Object(r),!0).forEach(function(n){wm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bx(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wm(t,e,r){return e=aZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aZ(t){var e=sZ(t,"string");return nc(e)==="symbol"?e:String(e)}function sZ(t,e){if(nc(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(nc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cZ(t,e){return fZ(t)||lZ(t,e)||LI(t,e)||uZ()}function uZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LI(t,e){if(t){if(typeof t=="string")return xm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xm(t,e)}}function xm(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lZ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function fZ(t){if(Array.isArray(t))return t}var zl=function(e,r,n){return e+(r-e)*n},Am=function(e){var r=e.from,n=e.to;return r!==n},hZ=function t(e,r,n){var i=vs(function(o,a){if(Am(a)){var s=e(a.from,a.to,a.velocity),c=cZ(s,2),u=c[0],l=c[1];return pt(pt({},a),{},{from:u,velocity:l})}return a},r);return n<1?vs(function(o,a){return Am(a)?pt(pt({},a),{},{velocity:zl(a.velocity,i[o].velocity,n),from:zl(a.from,i[o].from,n)}):a},r):t(e,i,n-1)};const dZ=function(t,e,r,n,i){var o=qJ(t,e),a=o.reduce(function(g,A){return pt(pt({},g),{},wm({},A,[t[A],e[A]]))},{}),s=o.reduce(function(g,A){return pt(pt({},g),{},wm({},A,{from:t[A],velocity:0,to:e[A]}))},{}),c=-1,u,l,f=function(){return null},d=function(){return vs(function(A,T){return T.from},s)},p=function(){return!Object.values(s).filter(Am).length},m=function(A){u||(u=A);var T=A-u,P=T/r.dt;s=hZ(r,s,P),i(pt(pt(pt({},t),e),d())),u=A,p()||(c=requestAnimationFrame(f))},y=function(A){l||(l=A);var T=(A-l)/n,P=vs(function(x,I){return zl.apply(void 0,Vx(I).concat([r(T)]))},a);if(i(pt(pt(pt({},t),e),P)),T<1)c=requestAnimationFrame(f);else{var C=vs(function(x,I){return zl.apply(void 0,Vx(I).concat([r(1)]))},a);i(pt(pt(pt({},t),e),C))}};return f=r.isStepper?m:y,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function Wo(t){"@babel/helpers - typeof";return Wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wo(t)}var pZ=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function mZ(t,e){if(t==null)return{};var r=gZ(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gZ(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Ud(t){return _Z(t)||bZ(t)||vZ(t)||yZ()}function yZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vZ(t,e){if(t){if(typeof t=="string")return Em(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Em(t,e)}}function bZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _Z(t){if(Array.isArray(t))return Em(t)}function Em(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ux(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ur(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ux(Object(r),!0).forEach(function(n){ss(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ux(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ss(t,e,r){return e=FI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FI(n.key),n)}}function AZ(t,e,r){return e&&xZ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function FI(t){var e=EZ(t,"string");return Wo(e)==="symbol"?e:String(e)}function EZ(t,e){if(Wo(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Wo(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TZ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tm(t,e)}function Tm(t,e){return Tm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Tm(t,e)}function SZ(t){var e=PZ();return function(){var n=Hl(t),i;if(e){var o=Hl(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return Sm(this,i)}}function Sm(t,e){if(e&&(Wo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pm(t)}function Pm(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PZ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Hl(t){return Hl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hl(t)}var br=function(t){TZ(r,t);var e=SZ(r);function r(n,i){var o;wZ(this,r),o=e.call(this,n,i);var a=o.props,s=a.isActive,c=a.attributeName,u=a.from,l=a.to,f=a.steps,d=a.children,p=a.duration;if(o.handleStyleChange=o.handleStyleChange.bind(Pm(o)),o.changeStyle=o.changeStyle.bind(Pm(o)),!s||p<=0)return o.state={style:{}},typeof d=="function"&&(o.state={style:l}),Sm(o);if(f&&f.length)o.state={style:f[0].style};else if(u){if(typeof d=="function")return o.state={style:u},Sm(o);o.state={style:c?ss({},c,u):u}}else o.state={style:{}};return o}return AZ(r,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,a=i.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.isActive,s=o.canBegin,c=o.attributeName,u=o.shouldReAnimate,l=o.to,f=o.from,d=this.state.style;if(s){if(!a){var p={style:c?ss({},c,l):l};this.state&&d&&(c&&d[c]!==l||!c&&d!==l)&&this.setState(p);return}if(!(NJ(i.to,l)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=m||u?f:i.to;if(this.state&&d){var g={style:c?ss({},c,y):y};(c&&d[c]!==y||!c&&d!==y)&&this.setState(g)}this.runAnimation(ur(ur({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,a=i.from,s=i.to,c=i.duration,u=i.easing,l=i.begin,f=i.onAnimationEnd,d=i.onAnimationStart,p=dZ(a,s,rZ(u),c,this.changeStyle),m=function(){o.stopJSAnimation=p()};this.manager.start([d,l,m,c,f])}},{key:"runStepAnimation",value:function(i){var o=this,a=i.steps,s=i.begin,c=i.onAnimationStart,u=a[0],l=u.style,f=u.duration,d=f===void 0?0:f,p=function(y,g,A){if(A===0)return y;var T=g.duration,P=g.easing,C=P===void 0?"ease":P,x=g.style,I=g.properties,b=g.onAnimationEnd,w=A>0?a[A-1]:g,S=I||Object.keys(x);if(typeof C=="function"||C==="spring")return[].concat(Ud(y),[o.runJSAnimation.bind(o,{from:w.style,to:x,duration:T,easing:C}),T]);var k=Mx(S,T,C),O=ur(ur(ur({},w.style),x),{},{transition:k});return[].concat(Ud(y),[O,T,b]).filter(WJ)};return this.manager.start([c].concat(Ud(a.reduce(p,[l,Math.max(d,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=VJ());var o=i.begin,a=i.duration,s=i.attributeName,c=i.to,u=i.easing,l=i.onAnimationStart,f=i.onAnimationEnd,d=i.steps,p=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(i);return}if(d.length>1){this.runStepAnimation(i);return}var y=s?ss({},s,c):c,g=Mx(Object.keys(y),a,u);m.start([l,o,ur(ur({},y),{},{transition:g}),a,f])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=mZ(i,pZ),u=D.Children.count(o),l=this.state.style;if(typeof o=="function")return o(l);if(!s||u===0||a<=0)return o;var f=function(p){var m=p.props,y=m.style,g=y===void 0?{}:y,A=m.className,T=D.cloneElement(p,ur(ur({},c),{},{style:ur(ur({},g),l),className:A}));return T};return u===1?f(D.Children.only(o)):j.createElement("div",null,D.Children.map(o,function(d){return f(d)}))}}]),r}(D.PureComponent);br.displayName="Animate";br.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};br.propTypes={from:ye.oneOfType([ye.object,ye.string]),to:ye.oneOfType([ye.object,ye.string]),attributeName:ye.string,duration:ye.number,begin:ye.number,easing:ye.oneOfType([ye.string,ye.func]),steps:ye.arrayOf(ye.shape({duration:ye.number.isRequired,style:ye.object.isRequired,easing:ye.oneOfType([ye.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ye.func]),properties:ye.arrayOf("string"),onAnimationEnd:ye.func})),children:ye.oneOfType([ye.node,ye.func]),isActive:ye.bool,canBegin:ye.bool,onAnimationEnd:ye.func,shouldReAnimate:ye.bool,onAnimationStart:ye.func,onAnimationReStart:ye.func};ye.object,ye.object,ye.object,ye.element;ye.object,ye.object,ye.object,ye.oneOfType([ye.array,ye.element]),ye.any;function ic(t){"@babel/helpers - typeof";return ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ic(t)}function Kl(){return Kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Kl.apply(this,arguments)}function IZ(t,e){return kZ(t)||RZ(t,e)||CZ(t,e)||OZ()}function OZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CZ(t,e){if(t){if(typeof t=="string")return qx(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qx(t,e)}}function qx(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function RZ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function kZ(t){if(Array.isArray(t))return t}function Wx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Wx(Object(r),!0).forEach(function(n){NZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wx(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function NZ(t,e,r){return e=$Z(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Z(t){var e=jZ(t,"string");return ic(e)=="symbol"?e:e+""}function jZ(t,e){if(ic(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ic(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hx=function(e,r,n,i,o){var a=Math.min(Math.abs(n)/2,Math.abs(i)/2),s=i>=0?1:-1,c=n>=0?1:-1,u=i>=0&&n>=0||i<0&&n<0?1:0,l;if(a>0&&o instanceof Array){for(var f=[0,0,0,0],d=0,p=4;d<p;d++)f[d]=o[d]>a?a:o[d];l="M".concat(e,",").concat(r+s*f[0]),f[0]>0&&(l+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+c*f[0],",").concat(r)),l+="L ".concat(e+n-c*f[1],",").concat(r),f[1]>0&&(l+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+n,",").concat(r+s*f[1])),l+="L ".concat(e+n,",").concat(r+i-s*f[2]),f[2]>0&&(l+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+n-c*f[2],",").concat(r+i)),l+="L ".concat(e+c*f[3],",").concat(r+i),f[3]>0&&(l+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(r+i-s*f[3])),l+="Z"}else if(a>0&&o===+o&&o>0){var m=Math.min(a,o);l="M ".concat(e,",").concat(r+s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+c*m,",").concat(r,`
            L `).concat(e+n-c*m,",").concat(r,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+n,",").concat(r+s*m,`
            L `).concat(e+n,",").concat(r+i-s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+n-c*m,",").concat(r+i,`
            L `).concat(e+c*m,",").concat(r+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e,",").concat(r+i-s*m," Z")}else l="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return l},DZ=function(e,r){if(!e||!r)return!1;var n=e.x,i=e.y,o=r.x,a=r.y,s=r.width,c=r.height;if(Math.abs(s)>0&&Math.abs(c)>0){var u=Math.min(o,o+s),l=Math.max(o,o+s),f=Math.min(a,a+c),d=Math.max(a,a+c);return n>=u&&n<=l&&i>=f&&i<=d}return!1},MZ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ov=function(e){var r=zx(zx({},MZ),e),n=D.useRef(),i=D.useState(-1),o=IZ(i,2),a=o[0],s=o[1];D.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&s(C)}catch{}},[]);var c=r.x,u=r.y,l=r.width,f=r.height,d=r.radius,p=r.className,m=r.animationEasing,y=r.animationDuration,g=r.animationBegin,A=r.isAnimationActive,T=r.isUpdateAnimationActive;if(c!==+c||u!==+u||l!==+l||f!==+f||l===0||f===0)return null;var P=ge("recharts-rectangle",p);return T?j.createElement(br,{canBegin:a>0,from:{width:l,height:f,x:c,y:u},to:{width:l,height:f,x:c,y:u},duration:y,animationEasing:m,isActive:T},function(C){var x=C.width,I=C.height,b=C.x,w=C.y;return j.createElement(br,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:y,isActive:A,easing:m},j.createElement("path",Kl({},ie(r,!0),{className:P,d:Hx(b,w,x,I,d),ref:n})))}):j.createElement("path",Kl({},ie(r,!0),{className:P,d:Hx(c,u,l,f,d)}))},LZ=["points","className","baseLinePoints","connectNulls"];function go(){return go=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},go.apply(this,arguments)}function FZ(t,e){if(t==null)return{};var r=VZ(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function VZ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Kx(t){return WZ(t)||qZ(t)||UZ(t)||BZ()}function BZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UZ(t,e){if(t){if(typeof t=="string")return Im(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Im(t,e)}}function qZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function WZ(t){if(Array.isArray(t))return Im(t)}function Im(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Gx=function(e){return e&&e.x===+e.x&&e.y===+e.y},zZ=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){Gx(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),Gx(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},bs=function(e,r){var n=zZ(e);r&&(n=[n.reduce(function(o,a){return[].concat(Kx(o),Kx(a))},[])]);var i=n.map(function(o){return o.reduce(function(a,s,c){return"".concat(a).concat(c===0?"M":"L").concat(s.x,",").concat(s.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},HZ=function(e,r,n){var i=bs(e,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(bs(r.reverse(),n).slice(1))},KZ=function(e){var r=e.points,n=e.className,i=e.baseLinePoints,o=e.connectNulls,a=FZ(e,LZ);if(!r||!r.length)return null;var s=ge("recharts-polygon",n);if(i&&i.length){var c=a.stroke&&a.stroke!=="none",u=HZ(r,i,o);return j.createElement("g",{className:s},j.createElement("path",go({},ie(a,!0),{fill:u.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:u})),c?j.createElement("path",go({},ie(a,!0),{fill:"none",d:bs(r,o)})):null,c?j.createElement("path",go({},ie(a,!0),{fill:"none",d:bs(i,o)})):null)}var l=bs(r,o);return j.createElement("path",go({},ie(a,!0),{fill:l.slice(-1)==="Z"?a.fill:"none",className:s,d:l}))};function Om(){return Om=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Om.apply(this,arguments)}var Bc=function(e){var r=e.cx,n=e.cy,i=e.r,o=e.className,a=ge("recharts-dot",o);return r===+r&&n===+n&&i===+i?j.createElement("circle",Om({},ie(e,!1),dl(e),{className:a,cx:r,cy:n,r:i})):null};function oc(t){"@babel/helpers - typeof";return oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oc(t)}var GZ=["x","y","top","left","width","height","className"];function Cm(){return Cm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cm.apply(this,arguments)}function Yx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function YZ(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yx(Object(r),!0).forEach(function(n){XZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yx(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XZ(t,e,r){return e=QZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QZ(t){var e=JZ(t,"string");return oc(e)=="symbol"?e:e+""}function JZ(t,e){if(oc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(oc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZZ(t,e){if(t==null)return{};var r=eee(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function eee(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var tee=function(e,r,n,i,o,a){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(a,",").concat(r,"h").concat(n)},ree=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,o=i===void 0?0:i,a=e.top,s=a===void 0?0:a,c=e.left,u=c===void 0?0:c,l=e.width,f=l===void 0?0:l,d=e.height,p=d===void 0?0:d,m=e.className,y=ZZ(e,GZ),g=YZ({x:n,y:o,top:s,left:u,width:f,height:p},y);return!G(n)||!G(o)||!G(f)||!G(p)||!G(s)||!G(u)?null:j.createElement("path",Cm({},ie(g,!0),{className:ge("recharts-cross",m),d:tee(n,o,f,p,s,u)}))},nee=Eh,iee=XP,oee=Br;function aee(t,e){return t&&t.length?nee(t,oee(e),iee):void 0}var see=aee;const cee=ke(see);var uee=Eh,lee=Br,fee=QP;function hee(t,e){return t&&t.length?uee(t,lee(e),fee):void 0}var dee=hee;const pee=ke(dee);var mee=["cx","cy","angle","ticks","axisLine"],gee=["ticks","tick","angle","tickFormatter","stroke"];function zo(t){"@babel/helpers - typeof";return zo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zo(t)}function _s(){return _s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_s.apply(this,arguments)}function Xx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Xx(Object(r),!0).forEach(function(n){Ih(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xx(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qx(t,e){if(t==null)return{};var r=yee(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function yee(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function vee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BI(n.key),n)}}function bee(t,e,r){return e&&Jx(t.prototype,e),r&&Jx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _ee(t,e,r){return e=Gl(e),wee(t,VI()?Reflect.construct(e,r||[],Gl(t).constructor):e.apply(t,r))}function wee(t,e){if(e&&(zo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xee(t)}function xee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VI=function(){return!!t})()}function Gl(t){return Gl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gl(t)}function Aee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rm(t,e)}function Rm(t,e){return Rm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Rm(t,e)}function Ih(t,e,r){return e=BI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BI(t){var e=Eee(t,"string");return zo(e)=="symbol"?e:e+""}function Eee(t,e){if(zo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(zo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Oh=function(t){function e(){return vee(this,e),_ee(this,e,arguments)}return Aee(e,t),bee(e,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,o=this.props,a=o.angle,s=o.cx,c=o.cy;return Le(s,c,i,a)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,o=n.cy,a=n.angle,s=n.ticks,c=cee(s,function(l){return l.coordinate||0}),u=pee(s,function(l){return l.coordinate||0});return{cx:i,cy:o,startAngle:a,endAngle:a,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,o=n.cy,a=n.angle,s=n.ticks,c=n.axisLine,u=Qx(n,mee),l=s.reduce(function(m,y){return[Math.min(m[0],y.coordinate),Math.max(m[1],y.coordinate)]},[1/0,-1/0]),f=Le(i,o,l[0],a),d=Le(i,o,l[1],a),p=fi(fi(fi({},ie(u,!1)),{},{fill:"none"},ie(c,!1)),{},{x1:f.x,y1:f.y,x2:d.x,y2:d.y});return j.createElement("line",_s({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var n=this,i=this.props,o=i.ticks,a=i.tick,s=i.angle,c=i.tickFormatter,u=i.stroke,l=Qx(i,gee),f=this.getTickTextAnchor(),d=ie(l,!1),p=ie(a,!1),m=o.map(function(y,g){var A=n.getTickValueCoord(y),T=fi(fi(fi(fi({textAnchor:f,transform:"rotate(".concat(90-s,", ").concat(A.x,", ").concat(A.y,")")},d),{},{stroke:"none",fill:u},p),{},{index:g},A),{},{payload:y});return j.createElement(be,_s({className:ge("recharts-polar-radius-axis-tick",TI(a)),key:"tick-".concat(y.coordinate)},Fi(n.props,y,g)),e.renderTickItem(a,T,c?c(y.value,g):y.value))});return j.createElement(be,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,i=n.ticks,o=n.axisLine,a=n.tick;return!i||!i.length?null:j.createElement(be,{className:ge("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),a&&this.renderTicks(),lt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,o){var a;return j.isValidElement(n)?a=j.cloneElement(n,i):ue(n)?a=n(i):a=j.createElement(Vi,_s({},i,{className:"recharts-polar-radius-axis-tick-value"}),o),a}}])}(D.PureComponent);Ih(Oh,"displayName","PolarRadiusAxis");Ih(Oh,"axisType","radiusAxis");Ih(Oh,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Ho(t){"@babel/helpers - typeof";return Ho=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ho(t)}function vi(){return vi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vi.apply(this,arguments)}function Zx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zx(Object(r),!0).forEach(function(n){Ch(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zx(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qI(n.key),n)}}function See(t,e,r){return e&&eA(t.prototype,e),r&&eA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pee(t,e,r){return e=Yl(e),Iee(t,UI()?Reflect.construct(e,r||[],Yl(t).constructor):e.apply(t,r))}function Iee(t,e){if(e&&(Ho(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Oee(t)}function Oee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UI=function(){return!!t})()}function Yl(t){return Yl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yl(t)}function Cee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&km(t,e)}function km(t,e){return km=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},km(t,e)}function Ch(t,e,r){return e=qI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qI(t){var e=Ree(t,"string");return Ho(e)=="symbol"?e:e+""}function Ree(t,e){if(Ho(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ho(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kee=Math.PI/180,tA=1e-5,Rh=function(t){function e(){return Tee(this,e),Pee(this,e,arguments)}return Cee(e,t),See(e,[{key:"getTickLineCoord",value:function(n){var i=this.props,o=i.cx,a=i.cy,s=i.radius,c=i.orientation,u=i.tickSize,l=u||8,f=Le(o,a,s,n.coordinate),d=Le(o,a,s+(c==="inner"?-1:1)*l,n.coordinate);return{x1:f.x,y1:f.y,x2:d.x,y2:d.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,o=Math.cos(-n.coordinate*kee),a;return o>tA?a=i==="outer"?"start":"end":o<-tA?a=i==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,o=n.cy,a=n.radius,s=n.axisLine,c=n.axisLineType,u=hi(hi({},ie(this.props,!1)),{},{fill:"none"},ie(s,!1));if(c==="circle")return j.createElement(Bc,vi({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:o,r:a}));var l=this.props.ticks,f=l.map(function(d){return Le(i,o,a,d.coordinate)});return j.createElement(KZ,vi({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,o=i.ticks,a=i.tick,s=i.tickLine,c=i.tickFormatter,u=i.stroke,l=ie(this.props,!1),f=ie(a,!1),d=hi(hi({},l),{},{fill:"none"},ie(s,!1)),p=o.map(function(m,y){var g=n.getTickLineCoord(m),A=n.getTickTextAnchor(m),T=hi(hi(hi({textAnchor:A},l),{},{stroke:"none",fill:u},f),{},{index:y,payload:m,x:g.x2,y:g.y2});return j.createElement(be,vi({className:ge("recharts-polar-angle-axis-tick",TI(a)),key:"tick-".concat(m.coordinate)},Fi(n.props,m,y)),s&&j.createElement("line",vi({className:"recharts-polar-angle-axis-tick-line"},d,g)),a&&e.renderTickItem(a,T,c?c(m.value,y):m.value))});return j.createElement(be,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var n=this.props,i=n.ticks,o=n.radius,a=n.axisLine;return o<=0||!i||!i.length?null:j.createElement(be,{className:ge("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,o){var a;return j.isValidElement(n)?a=j.cloneElement(n,i):ue(n)?a=n(i):a=j.createElement(Vi,vi({},i,{className:"recharts-polar-angle-axis-tick-value"}),o),a}}])}(D.PureComponent);Ch(Rh,"displayName","PolarAngleAxis");Ch(Rh,"axisType","angleAxis");Ch(Rh,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Nee=HS,$ee=Nee(Object.getPrototypeOf,Object),jee=$ee,Dee=vn,Mee=jee,Lee=bn,Fee="[object Object]",Vee=Function.prototype,Bee=Object.prototype,WI=Vee.toString,Uee=Bee.hasOwnProperty,qee=WI.call(Object);function Wee(t){if(!Lee(t)||Dee(t)!=Fee)return!1;var e=Mee(t);if(e===null)return!0;var r=Uee.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&WI.call(r)==qee}var zee=Wee;const Hee=ke(zee);var Kee=vn,Gee=bn,Yee="[object Boolean]";function Xee(t){return t===!0||t===!1||Gee(t)&&Kee(t)==Yee}var Qee=Xee;const Jee=ke(Qee);function ac(t){"@babel/helpers - typeof";return ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ac(t)}function Xl(){return Xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xl.apply(this,arguments)}function Zee(t,e){return nte(t)||rte(t,e)||tte(t,e)||ete()}function ete(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tte(t,e){if(t){if(typeof t=="string")return rA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rA(t,e)}}function rA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rte(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function nte(t){if(Array.isArray(t))return t}function nA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function iA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nA(Object(r),!0).forEach(function(n){ite(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ite(t,e,r){return e=ote(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ote(t){var e=ate(t,"string");return ac(e)=="symbol"?e:e+""}function ate(t,e){if(ac(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ac(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oA=function(e,r,n,i,o){var a=n-i,s;return s="M ".concat(e,",").concat(r),s+="L ".concat(e+n,",").concat(r),s+="L ".concat(e+n-a/2,",").concat(r+o),s+="L ".concat(e+n-a/2-i,",").concat(r+o),s+="L ".concat(e,",").concat(r," Z"),s},ste={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},cte=function(e){var r=iA(iA({},ste),e),n=D.useRef(),i=D.useState(-1),o=Zee(i,2),a=o[0],s=o[1];D.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var P=n.current.getTotalLength();P&&s(P)}catch{}},[]);var c=r.x,u=r.y,l=r.upperWidth,f=r.lowerWidth,d=r.height,p=r.className,m=r.animationEasing,y=r.animationDuration,g=r.animationBegin,A=r.isUpdateAnimationActive;if(c!==+c||u!==+u||l!==+l||f!==+f||d!==+d||l===0&&f===0||d===0)return null;var T=ge("recharts-trapezoid",p);return A?j.createElement(br,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:d,x:c,y:u},to:{upperWidth:l,lowerWidth:f,height:d,x:c,y:u},duration:y,animationEasing:m,isActive:A},function(P){var C=P.upperWidth,x=P.lowerWidth,I=P.height,b=P.x,w=P.y;return j.createElement(br,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:y,easing:m},j.createElement("path",Xl({},ie(r,!0),{className:T,d:oA(b,w,C,x,I),ref:n})))}):j.createElement("g",null,j.createElement("path",Xl({},ie(r,!0),{className:T,d:oA(c,u,l,f,d)})))},ute=["option","shapeType","propTransformer","activeClassName","isActive"];function sc(t){"@babel/helpers - typeof";return sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sc(t)}function lte(t,e){if(t==null)return{};var r=fte(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fte(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function aA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ql(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aA(Object(r),!0).forEach(function(n){hte(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hte(t,e,r){return e=dte(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dte(t){var e=pte(t,"string");return sc(e)=="symbol"?e:e+""}function pte(t,e){if(sc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(sc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mte(t,e){return Ql(Ql({},e),t)}function gte(t,e){return t==="symbols"}function sA(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return j.createElement(ov,r);case"trapezoid":return j.createElement(cte,r);case"sector":return j.createElement(II,r);case"symbols":if(gte(e))return j.createElement(Ey,r);break;default:return null}}function yte(t){return D.isValidElement(t)?t.props:t}function zI(t){var e=t.option,r=t.shapeType,n=t.propTransformer,i=n===void 0?mte:n,o=t.activeClassName,a=o===void 0?"recharts-active-shape":o,s=t.isActive,c=lte(t,ute),u;if(D.isValidElement(e))u=D.cloneElement(e,Ql(Ql({},c),yte(e)));else if(ue(e))u=e(c);else if(Hee(e)&&!Jee(e)){var l=i(e,c);u=j.createElement(sA,{shapeType:r,elementProps:l})}else{var f=c;u=j.createElement(sA,{shapeType:r,elementProps:f})}return s?j.createElement(be,{className:a},u):u}function kh(t,e){return e!=null&&"trapezoids"in t.props}function Nh(t,e){return e!=null&&"sectors"in t.props}function cc(t,e){return e!=null&&"points"in t.props}function vte(t,e){var r,n,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,o=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return i&&o}function bte(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function _te(t,e){var r=t.x===e.x,n=t.y===e.y,i=t.z===e.z;return r&&n&&i}function wte(t,e){var r;return kh(t,e)?r=vte:Nh(t,e)?r=bte:cc(t,e)&&(r=_te),r}function xte(t,e){var r;return kh(t,e)?r="trapezoids":Nh(t,e)?r="sectors":cc(t,e)&&(r="points"),r}function Ate(t,e){if(kh(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Nh(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return cc(t,e)?e.payload:{}}function Ete(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,i=xte(r,e),o=Ate(r,e),a=n.filter(function(c,u){var l=Bi(o,c),f=r.props[i].filter(function(m){var y=wte(r,e);return y(m,e)}),d=r.props[i].indexOf(f[f.length-1]),p=u===d;return l&&p}),s=n.indexOf(a[a.length-1]);return s}var Bu;function Ko(t){"@babel/helpers - typeof";return Ko=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ko(t)}function yo(){return yo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yo.apply(this,arguments)}function cA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function De(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cA(Object(r),!0).forEach(function(n){rr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KI(n.key),n)}}function Ste(t,e,r){return e&&uA(t.prototype,e),r&&uA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pte(t,e,r){return e=Jl(e),Ite(t,HI()?Reflect.construct(e,r||[],Jl(t).constructor):e.apply(t,r))}function Ite(t,e){if(e&&(Ko(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ote(t)}function Ote(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HI=function(){return!!t})()}function Jl(t){return Jl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jl(t)}function Cte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nm(t,e)}function Nm(t,e){return Nm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Nm(t,e)}function rr(t,e,r){return e=KI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KI(t){var e=Rte(t,"string");return Ko(e)=="symbol"?e:e+""}function Rte(t,e){if(Ko(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ko(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wn=function(t){function e(r){var n;return Tte(this,e),n=Pte(this,e,[r]),rr(n,"pieRef",null),rr(n,"sectorRefs",[]),rr(n,"id",Qi("recharts-pie-")),rr(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ue(i)&&i()}),rr(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ue(i)&&i()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return Cte(e,t),Ste(e,[{key:"isActiveIndex",value:function(n){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(n)!==-1:n===i}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.label,s=o.labelLine,c=o.dataKey,u=o.valueKey,l=ie(this.props,!1),f=ie(a,!1),d=ie(s,!1),p=a&&a.offsetRadius||20,m=n.map(function(y,g){var A=(y.startAngle+y.endAngle)/2,T=Le(y.cx,y.cy,y.outerRadius+p,A),P=De(De(De(De({},l),y),{},{stroke:"none"},f),{},{index:g,textAnchor:e.getTextAnchor(T.x,y.cx)},T),C=De(De(De(De({},l),y),{},{fill:"none",stroke:y.fill},d),{},{index:g,points:[Le(y.cx,y.cy,y.outerRadius,A),T]}),x=c;return he(c)&&he(u)?x="value":he(c)&&(x=u),j.createElement(be,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(g)},s&&e.renderLabelLineItem(s,C,"line"),e.renderLabelItem(a,P,Qe(y,x)))});return j.createElement(be,{className:"recharts-pie-labels"},m)}},{key:"renderSectorsStatically",value:function(n){var i=this,o=this.props,a=o.activeShape,s=o.blendStroke,c=o.inactiveShape;return n.map(function(u,l){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=i.isActiveIndex(l),d=c&&i.hasActiveIndex()?c:null,p=f?a:d,m=De(De({},u),{},{stroke:s?u.fill:u.stroke,tabIndex:-1});return j.createElement(be,yo({ref:function(g){g&&!i.sectorRefs.includes(g)&&i.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},Fi(i.props,u,l),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(l)}),j.createElement(zI,yo({option:p,isActive:f,shapeType:"sector"},m)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,i=this.props,o=i.sectors,a=i.isAnimationActive,s=i.animationBegin,c=i.animationDuration,u=i.animationEasing,l=i.animationId,f=this.state,d=f.prevSectors,p=f.prevIsAnimationActive;return j.createElement(br,{begin:s,duration:c,isActive:a,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(l,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(m){var y=m.t,g=[],A=o&&o[0],T=A.startAngle;return o.forEach(function(P,C){var x=d&&d[C],I=C>0?Xt(P,"paddingAngle",0):0;if(x){var b=it(x.endAngle-x.startAngle,P.endAngle-P.startAngle),w=De(De({},P),{},{startAngle:T+I,endAngle:T+b(y)+I});g.push(w),T=w.endAngle}else{var S=P.endAngle,k=P.startAngle,O=it(0,S-k),N=O(y),R=De(De({},P),{},{startAngle:T+I,endAngle:T+N+I});g.push(R),T=R.endAngle}}),j.createElement(be,null,n.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(n){var i=this;n.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var a=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"ArrowRight":{var s=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,i=n.sectors,o=n.isAnimationActive,a=this.state.prevSectors;return o&&i&&i.length&&(!a||!Bi(a,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,i=this.props,o=i.hide,a=i.sectors,s=i.className,c=i.label,u=i.cx,l=i.cy,f=i.innerRadius,d=i.outerRadius,p=i.isAnimationActive,m=this.state.isAnimationFinished;if(o||!a||!a.length||!G(u)||!G(l)||!G(f)||!G(d))return null;var y=ge("recharts-pie",s);return j.createElement(be,{tabIndex:this.props.rootTabIndex,className:y,ref:function(A){n.pieRef=A}},this.renderSectors(),c&&this.renderLabels(a),lt.renderCallByParent(this.props,null,!1),(!p||m)&&Nr.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return i.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:n.sectors!==i.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,i){return n>i?"start":n<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,i,o){if(j.isValidElement(n))return j.cloneElement(n,i);if(ue(n))return n(i);var a=ge("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return j.createElement(Ci,yo({},i,{key:o,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(n,i,o){if(j.isValidElement(n))return j.cloneElement(n,i);var a=o;if(ue(n)&&(a=n(i),j.isValidElement(a)))return a;var s=ge("recharts-pie-label-text",typeof n!="boolean"&&!ue(n)?n.className:"");return j.createElement(Vi,yo({},i,{alignmentBaseline:"middle",className:s}),a)}}])}(D.PureComponent);Bu=wn;rr(wn,"displayName","Pie");rr(wn,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!gr.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});rr(wn,"parseDeltaAngle",function(t,e){var r=jt(e-t),n=Math.min(Math.abs(e-t),360);return r*n});rr(wn,"getRealPieData",function(t){var e=t.data,r=t.children,n=ie(t,!1),i=Qt(r,yh);return e&&e.length?e.map(function(o,a){return De(De(De({payload:o},n),o),i&&i[a]&&i[a].props)}):i&&i.length?i.map(function(o){return De(De({},n),o.props)}):[]});rr(wn,"parseCoordinateOfPie",function(t,e){var r=e.top,n=e.left,i=e.width,o=e.height,a=EI(i,o),s=n+Dt(t.cx,i,i/2),c=r+Dt(t.cy,o,o/2),u=Dt(t.innerRadius,a,0),l=Dt(t.outerRadius,a,a*.8),f=t.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:s,cy:c,innerRadius:u,outerRadius:l,maxRadius:f}});rr(wn,"getComposedData",function(t){var e=t.item,r=t.offset,n=e.type.defaultProps!==void 0?De(De({},e.type.defaultProps),e.props):e.props,i=Bu.getRealPieData(n);if(!i||!i.length)return null;var o=n.cornerRadius,a=n.startAngle,s=n.endAngle,c=n.paddingAngle,u=n.dataKey,l=n.nameKey,f=n.valueKey,d=n.tooltipType,p=Math.abs(n.minAngle),m=Bu.parseCoordinateOfPie(n,r),y=Bu.parseDeltaAngle(a,s),g=Math.abs(y),A=u;he(u)&&he(f)?(mr(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),A="value"):he(u)&&(mr(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),A=f);var T=i.filter(function(w){return Qe(w,A,0)!==0}).length,P=(g>=360?T:T-1)*c,C=g-T*p-P,x=i.reduce(function(w,S){var k=Qe(S,A,0);return w+(G(k)?k:0)},0),I;if(x>0){var b;I=i.map(function(w,S){var k=Qe(w,A,0),O=Qe(w,l,S),N=(G(k)?k:0)/x,R;S?R=b.endAngle+jt(y)*c*(k!==0?1:0):R=a;var V=R+jt(y)*((k!==0?p:0)+N*C),F=(R+V)/2,U=(m.innerRadius+m.outerRadius)/2,W=[{name:O,value:k,payload:w,dataKey:A,type:d}],K=Le(m.cx,m.cy,U,F);return b=De(De(De({percent:N,cornerRadius:o,name:O,tooltipPayload:W,midAngle:F,middleRadius:U,tooltipPosition:K},w),m),{},{value:Qe(w,A),startAngle:R,endAngle:V,payload:w,paddingAngle:jt(y)*c}),b})}return De(De({},m),{},{sectors:I,data:i})});var kte=Math.ceil,Nte=Math.max;function $te(t,e,r,n){for(var i=-1,o=Nte(kte((e-t)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=t,t+=r;return a}var jte=$te,Dte=fP,lA=1/0,Mte=17976931348623157e292;function Lte(t){if(!t)return t===0?t:0;if(t=Dte(t),t===lA||t===-lA){var e=t<0?-1:1;return e*Mte}return t===t?t:0}var GI=Lte,Fte=jte,Vte=gh,qd=GI;function Bte(t){return function(e,r,n){return n&&typeof n!="number"&&Vte(e,r,n)&&(r=n=void 0),e=qd(e),r===void 0?(r=e,e=0):r=qd(r),n=n===void 0?e<r?1:-1:qd(n),Fte(e,r,n,t)}}var Ute=Bte,qte=Ute,Wte=qte(),zte=Wte;const Zl=ke(zte);function uc(t){"@babel/helpers - typeof";return uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uc(t)}function fA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fA(Object(r),!0).forEach(function(n){YI(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function YI(t,e,r){return e=Hte(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hte(t){var e=Kte(t,"string");return uc(e)=="symbol"?e:e+""}function Kte(t,e){if(uc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(uc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gte=["Webkit","Moz","O","ms"],Yte=function(e,r){var n=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=Gte.reduce(function(o,a){return hA(hA({},o),{},YI({},a+n,r))},{});return i[e]=r,i};function Go(t){"@babel/helpers - typeof";return Go=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Go(t)}function ef(){return ef=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ef.apply(this,arguments)}function dA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dA(Object(r),!0).forEach(function(n){zt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QI(n.key),n)}}function Qte(t,e,r){return e&&pA(t.prototype,e),r&&pA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jte(t,e,r){return e=tf(e),Zte(t,XI()?Reflect.construct(e,r||[],tf(t).constructor):e.apply(t,r))}function Zte(t,e){if(e&&(Go(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ere(t)}function ere(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XI=function(){return!!t})()}function tf(t){return tf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tf(t)}function tre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$m(t,e)}function $m(t,e){return $m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},$m(t,e)}function zt(t,e,r){return e=QI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QI(t){var e=rre(t,"string");return Go(e)=="symbol"?e:e+""}function rre(t,e){if(Go(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Go(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nre=function(e){var r=e.data,n=e.startIndex,i=e.endIndex,o=e.x,a=e.width,s=e.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=gs().domain(Zl(0,c)).range([o,o+a-s]),l=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(i),scale:u,scaleValues:l}},mA=function(e){return e.changedTouches&&!!e.changedTouches.length},Yo=function(t){function e(r){var n;return Xte(this,e),n=Jte(this,e,[r]),zt(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),zt(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),zt(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,o=i.endIndex,a=i.onDragEnd,s=i.startIndex;a==null||a({endIndex:o,startIndex:s})}),n.detachDragEndListener()}),zt(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),zt(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),zt(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),zt(n,"handleSlideDragStart",function(i){var o=mA(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return tre(e,t),Qte(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,o=n.endX,a=this.state.scaleValues,s=this.props,c=s.gap,u=s.data,l=u.length-1,f=Math.min(i,o),d=Math.max(i,o),p=e.getIndexInRange(a,f),m=e.getIndexInRange(a,d);return{startIndex:p-p%c,endIndex:m===l?l:m-m%c}}},{key:"getTextOfTick",value:function(n){var i=this.props,o=i.data,a=i.tickFormatter,s=i.dataKey,c=Qe(o[n],s,n);return ue(a)?a(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,o=i.slideMoveStartX,a=i.startX,s=i.endX,c=this.props,u=c.x,l=c.width,f=c.travellerWidth,d=c.startIndex,p=c.endIndex,m=c.onChange,y=n.pageX-o;y>0?y=Math.min(y,u+l-f-s,u+l-f-a):y<0&&(y=Math.max(y,u-a,u-s));var g=this.getIndex({startX:a+y,endX:s+y});(g.startIndex!==d||g.endIndex!==p)&&m&&m(g),this.setState({startX:a+y,endX:s+y,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var o=mA(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,o=i.brushMoveStartX,a=i.movingTravellerId,s=i.endX,c=i.startX,u=this.state[a],l=this.props,f=l.x,d=l.width,p=l.travellerWidth,m=l.onChange,y=l.gap,g=l.data,A={startX:this.state.startX,endX:this.state.endX},T=n.pageX-o;T>0?T=Math.min(T,f+d-p-u):T<0&&(T=Math.max(T,f-u)),A[a]=u+T;var P=this.getIndex(A),C=P.startIndex,x=P.endIndex,I=function(){var w=g.length-1;return a==="startX"&&(s>c?C%y===0:x%y===0)||s<c&&x===w||a==="endX"&&(s>c?x%y===0:C%y===0)||s>c&&x===w};this.setState(zt(zt({},a,u+T),"brushMoveStartX",n.pageX),function(){m&&I()&&m(P)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var o=this,a=this.state,s=a.scaleValues,c=a.startX,u=a.endX,l=this.state[i],f=s.indexOf(l);if(f!==-1){var d=f+n;if(!(d===-1||d>=s.length)){var p=s[d];i==="startX"&&p>=u||i==="endX"&&p<=c||this.setState(zt({},i,p),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,o=n.y,a=n.width,s=n.height,c=n.fill,u=n.stroke;return j.createElement("rect",{stroke:u,fill:c,x:i,y:o,width:a,height:s})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,o=n.y,a=n.width,s=n.height,c=n.data,u=n.children,l=n.padding,f=D.Children.only(u);return f?j.cloneElement(f,{x:i,y:o,width:a,height:s,margin:l,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,i){var o,a,s=this,c=this.props,u=c.y,l=c.travellerWidth,f=c.height,d=c.traveller,p=c.ariaLabel,m=c.data,y=c.startIndex,g=c.endIndex,A=Math.max(n,this.props.x),T=Wd(Wd({},ie(this.props,!1)),{},{x:A,y:u,width:l,height:f}),P=p||"Min value: ".concat((o=m[y])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=m[g])===null||a===void 0?void 0:a.name);return j.createElement(be,{tabIndex:0,role:"slider","aria-label":P,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(x){["ArrowLeft","ArrowRight"].includes(x.key)&&(x.preventDefault(),x.stopPropagation(),s.handleTravellerMoveKeyboard(x.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(d,T))}},{key:"renderSlide",value:function(n,i){var o=this.props,a=o.y,s=o.height,c=o.stroke,u=o.travellerWidth,l=Math.min(n,i)+u,f=Math.max(Math.abs(i-n)-u,0);return j.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:l,y:a,width:f,height:s})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,o=n.endIndex,a=n.y,s=n.height,c=n.travellerWidth,u=n.stroke,l=this.state,f=l.startX,d=l.endX,p=5,m={pointerEvents:"none",fill:u};return j.createElement(be,{className:"recharts-brush-texts"},j.createElement(Vi,ef({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,d)-p,y:a+s/2},m),this.getTextOfTick(i)),j.createElement(Vi,ef({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,d)+c+p,y:a+s/2},m),this.getTextOfTick(o)))}},{key:"render",value:function(){var n=this.props,i=n.data,o=n.className,a=n.children,s=n.x,c=n.y,u=n.width,l=n.height,f=n.alwaysShowText,d=this.state,p=d.startX,m=d.endX,y=d.isTextActive,g=d.isSlideMoving,A=d.isTravellerMoving,T=d.isTravellerFocused;if(!i||!i.length||!G(s)||!G(c)||!G(u)||!G(l)||u<=0||l<=0)return null;var P=ge("recharts-brush",o),C=j.Children.count(a)===1,x=Yte("userSelect","none");return j.createElement(be,{className:P,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:x},this.renderBackground(),C&&this.renderPanorama(),this.renderSlide(p,m),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(m,"endX"),(y||g||A||T||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,o=n.y,a=n.width,s=n.height,c=n.stroke,u=Math.floor(o+s/2)-1;return j.createElement(j.Fragment,null,j.createElement("rect",{x:i,y:o,width:a,height:s,fill:c,stroke:"none"}),j.createElement("line",{x1:i+1,y1:u,x2:i+a-1,y2:u,fill:"none",stroke:"#fff"}),j.createElement("line",{x1:i+1,y1:u+2,x2:i+a-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var o;return j.isValidElement(n)?o=j.cloneElement(n,i):ue(n)?o=n(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(n,i){var o=n.data,a=n.width,s=n.x,c=n.travellerWidth,u=n.updateId,l=n.startIndex,f=n.endIndex;if(o!==i.prevData||u!==i.prevUpdateId)return Wd({prevData:o,prevTravellerWidth:c,prevUpdateId:u,prevX:s,prevWidth:a},o&&o.length?nre({data:o,width:a,x:s,travellerWidth:c,startIndex:l,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||s!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([s,s+a-c]);var d=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:o,prevTravellerWidth:c,prevUpdateId:u,prevX:s,prevWidth:a,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:d}}return null}},{key:"getIndexInRange",value:function(n,i){for(var o=n.length,a=0,s=o-1;s-a>1;){var c=Math.floor((a+s)/2);n[c]>i?s=c:a=c}return i>=n[s]?s:a}}])}(D.PureComponent);zt(Yo,"displayName","Brush");zt(Yo,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var ire=Ry;function ore(t,e){var r;return ire(t,function(n,i,o){return r=e(n,i,o),!r}),!!r}var are=ore,sre=LS,cre=Br,ure=are,lre=Ut,fre=gh;function hre(t,e,r){var n=lre(t)?sre:ure;return r&&fre(t,e,r)&&(e=void 0),n(t,cre(e))}var dre=hre;const pre=ke(dre);var $r=function(e,r){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===r},gA=aP;function mre(t,e,r){e=="__proto__"&&gA?gA(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var gre=mre,yre=gre,vre=iP,bre=Br;function _re(t,e){var r={};return e=bre(e),vre(t,function(n,i,o){yre(r,i,e(n,i,o))}),r}var wre=_re;const xre=ke(wre);function Are(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var Ere=Are,Tre=Ry;function Sre(t,e){var r=!0;return Tre(t,function(n,i,o){return r=!!e(n,i,o),r}),r}var Pre=Sre,Ire=Ere,Ore=Pre,Cre=Br,Rre=Ut,kre=gh;function Nre(t,e,r){var n=Rre(t)?Ire:Ore;return r&&kre(t,e,r)&&(e=void 0),n(t,Cre(e))}var $re=Nre;const JI=ke($re);var jre=["x","y"];function lc(t){"@babel/helpers - typeof";return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lc(t)}function jm(){return jm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jm.apply(this,arguments)}function yA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function es(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yA(Object(r),!0).forEach(function(n){Dre(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Dre(t,e,r){return e=Mre(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mre(t){var e=Lre(t,"string");return lc(e)=="symbol"?e:e+""}function Lre(t,e){if(lc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(lc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fre(t,e){if(t==null)return{};var r=Vre(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Vre(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Bre(t,e){var r=t.x,n=t.y,i=Fre(t,jre),o="".concat(r),a=parseInt(o,10),s="".concat(n),c=parseInt(s,10),u="".concat(e.height||i.height),l=parseInt(u,10),f="".concat(e.width||i.width),d=parseInt(f,10);return es(es(es(es(es({},e),i),a?{x:a}:{}),c?{y:c}:{}),{},{height:l,width:d,name:e.name,radius:e.radius})}function vA(t){return j.createElement(zI,jm({shapeType:"rectangle",propTransformer:Bre,activeClassName:"recharts-active-bar"},t))}var Ure=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof e=="number")return e;var o=typeof n=="number";return o?e(n,i):(o||qi(),r)}},qre=["value","background"],ZI;function Xo(t){"@babel/helpers - typeof";return Xo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xo(t)}function Wre(t,e){if(t==null)return{};var r=zre(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zre(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function rf(){return rf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rf.apply(this,arguments)}function bA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function et(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bA(Object(r),!0).forEach(function(n){Ln(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _A(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tO(n.key),n)}}function Kre(t,e,r){return e&&_A(t.prototype,e),r&&_A(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gre(t,e,r){return e=nf(e),Yre(t,eO()?Reflect.construct(e,r||[],nf(t).constructor):e.apply(t,r))}function Yre(t,e){if(e&&(Xo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xre(t)}function Xre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eO=function(){return!!t})()}function nf(t){return nf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nf(t)}function Qre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dm(t,e)}function Dm(t,e){return Dm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Dm(t,e)}function Ln(t,e,r){return e=tO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tO(t){var e=Jre(t,"string");return Xo(e)=="symbol"?e:e+""}function Jre(t,e){if(Xo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Xo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qn=function(t){function e(){var r;Hre(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=Gre(this,e,[].concat(i)),Ln(r,"state",{isAnimationFinished:!1}),Ln(r,"id",Qi("recharts-bar-")),Ln(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),a&&a()}),Ln(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),a&&a()}),r}return Qre(e,t),Kre(e,[{key:"renderRectanglesStatically",value:function(n){var i=this,o=this.props,a=o.shape,s=o.dataKey,c=o.activeIndex,u=o.activeBar,l=ie(this.props,!1);return n&&n.map(function(f,d){var p=d===c,m=p?u:a,y=et(et(et({},l),f),{},{isActive:p,option:m,index:d,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return j.createElement(be,rf({className:"recharts-bar-rectangle"},Fi(i.props,f,d),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value)}),j.createElement(vA,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,o=i.data,a=i.layout,s=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,l=i.animationEasing,f=i.animationId,d=this.state.prevData;return j.createElement(br,{begin:c,duration:u,isActive:s,easing:l,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,y=o.map(function(g,A){var T=d&&d[A];if(T){var P=it(T.x,g.x),C=it(T.y,g.y),x=it(T.width,g.width),I=it(T.height,g.height);return et(et({},g),{},{x:P(m),y:C(m),width:x(m),height:I(m)})}if(a==="horizontal"){var b=it(0,g.height),w=b(m);return et(et({},g),{},{y:g.y+g.height-w,height:w})}var S=it(0,g.width),k=S(m);return et(et({},g),{},{width:k})});return j.createElement(be,null,n.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,o=n.isAnimationActive,a=this.state.prevData;return o&&i&&i.length&&(!a||!Bi(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,o=i.data,a=i.dataKey,s=i.activeIndex,c=ie(this.props.background,!1);return o.map(function(u,l){u.value;var f=u.background,d=Wre(u,qre);if(!f)return null;var p=et(et(et(et(et({},d),{},{fill:"#eee"},f),c),Fi(n.props,u,l)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:a,index:l,className:"recharts-bar-background-rectangle"});return j.createElement(vA,rf({key:"background-bar-".concat(l),option:n.props.background,isActive:l===s},p))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,s=o.xAxis,c=o.yAxis,u=o.layout,l=o.children,f=Qt(l,Vc);if(!f)return null;var d=u==="vertical"?a[0].height/2:a[0].width/2,p=function(g,A){var T=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:T,errorVal:Qe(g,A)}},m={clipPath:n?"url(#clipPath-".concat(i,")"):null};return j.createElement(be,m,f.map(function(y){return j.cloneElement(y,{key:"error-bar-".concat(i,"-").concat(y.props.dataKey),data:a,xAxis:s,yAxis:c,layout:u,offset:d,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,o=n.data,a=n.className,s=n.xAxis,c=n.yAxis,u=n.left,l=n.top,f=n.width,d=n.height,p=n.isAnimationActive,m=n.background,y=n.id;if(i||!o||!o.length)return null;var g=this.state.isAnimationFinished,A=ge("recharts-bar",a),T=s&&s.allowDataOverflow,P=c&&c.allowDataOverflow,C=T||P,x=he(y)?this.id:y;return j.createElement(be,{className:A},T||P?j.createElement("defs",null,j.createElement("clipPath",{id:"clipPath-".concat(x)},j.createElement("rect",{x:T?u:u-f/2,y:P?l:l-d/2,width:T?f:f*2,height:P?d:d*2}))):null,j.createElement(be,{className:"recharts-bar-rectangles",clipPath:C?"url(#clipPath-".concat(x,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(C,x),(!p||g)&&Nr.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])}(D.PureComponent);ZI=Qn;Ln(Qn,"displayName","Bar");Ln(Qn,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!gr.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ln(Qn,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,i=t.bandSize,o=t.xAxis,a=t.yAxis,s=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,l=t.dataStartIndex,f=t.displayedData,d=t.offset,p=UX(n,r);if(!p)return null;var m=e.layout,y=r.type.defaultProps,g=y!==void 0?et(et({},y),r.props):r.props,A=g.dataKey,T=g.children,P=g.minPointSize,C=m==="horizontal"?a:o,x=u?C.scale.domain():null,I=YX({numericAxis:C}),b=Qt(T,yh),w=f.map(function(S,k){var O,N,R,V,F,U;u?O=qX(u[l+k],x):(O=Qe(S,A),Array.isArray(O)||(O=[I,O]));var W=Ure(P,ZI.defaultProps.minPointSize)(O[1],k);if(m==="horizontal"){var K,Y=[a.scale(O[0]),a.scale(O[1])],ne=Y[0],oe=Y[1];N=ux({axis:o,ticks:s,bandSize:i,offset:p.offset,entry:S,index:k}),R=(K=oe??ne)!==null&&K!==void 0?K:void 0,V=p.size;var J=ne-oe;if(F=Number.isNaN(J)?0:J,U={x:N,y:a.y,width:V,height:a.height},Math.abs(W)>0&&Math.abs(F)<Math.abs(W)){var Q=jt(F||W)*(Math.abs(W)-Math.abs(F));R-=Q,F+=Q}}else{var Pe=[o.scale(O[0]),o.scale(O[1])],Ae=Pe[0],ht=Pe[1];if(N=Ae,R=ux({axis:a,ticks:c,bandSize:i,offset:p.offset,entry:S,index:k}),V=ht-Ae,F=p.size,U={x:o.x,y:R,width:o.width,height:F},Math.abs(W)>0&&Math.abs(V)<Math.abs(W)){var _t=jt(V||W)*(Math.abs(W)-Math.abs(V));V+=_t}}return et(et(et({},S),{},{x:N,y:R,width:V,height:F,value:u?O:O[1],payload:S,background:U},b&&b[k]&&b[k].props),{},{tooltipPayload:[xI(r,S)],tooltipPosition:{x:N+V/2,y:R+F/2}})});return et({data:w,layout:m},d)});function fc(t){"@babel/helpers - typeof";return fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fc(t)}function Zre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rO(n.key),n)}}function ene(t,e,r){return e&&wA(t.prototype,e),r&&wA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function xA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xA(Object(r),!0).forEach(function(n){$h(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $h(t,e,r){return e=rO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rO(t){var e=tne(t,"string");return fc(e)=="symbol"?e:e+""}function tne(t,e){if(fc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(fc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var av=function(e,r,n,i,o){var a=e.width,s=e.height,c=e.layout,u=e.children,l=Object.keys(r),f={left:n.left,leftMirror:n.left,right:a-n.right,rightMirror:a-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},d=!!Ht(u,Qn);return l.reduce(function(p,m){var y=r[m],g=y.orientation,A=y.domain,T=y.padding,P=T===void 0?{}:T,C=y.mirror,x=y.reversed,I="".concat(g).concat(C?"Mirror":""),b,w,S,k,O;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var N=A[1]-A[0],R=1/0,V=y.categoricalDomain.sort();if(V.forEach(function(Pe,Ae){Ae>0&&(R=Math.min((Pe||0)-(V[Ae-1]||0),R))}),Number.isFinite(R)){var F=R/N,U=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(b=F*U/2),y.padding==="no-gap"){var W=Dt(e.barCategoryGap,F*U),K=F*U/2;b=K-W-(K-W)/U*W}}}i==="xAxis"?w=[n.left+(P.left||0)+(b||0),n.left+n.width-(P.right||0)-(b||0)]:i==="yAxis"?w=c==="horizontal"?[n.top+n.height-(P.bottom||0),n.top+(P.top||0)]:[n.top+(P.top||0)+(b||0),n.top+n.height-(P.bottom||0)-(b||0)]:w=y.range,x&&(w=[w[1],w[0]]);var Y=vI(y,o,d),ne=Y.scale,oe=Y.realScaleType;ne.domain(A).range(w),bI(ne);var J=_I(ne,lr(lr({},y),{},{realScaleType:oe}));i==="xAxis"?(O=g==="top"&&!C||g==="bottom"&&C,S=n.left,k=f[I]-O*y.height):i==="yAxis"&&(O=g==="left"&&!C||g==="right"&&C,S=f[I]-O*y.width,k=n.top);var Q=lr(lr(lr({},y),J),{},{realScaleType:oe,x:S,y:k,scale:ne,width:i==="xAxis"?n.width:y.width,height:i==="yAxis"?n.height:y.height});return Q.bandSize=Bl(Q,J),!y.hide&&i==="xAxis"?f[I]+=(O?-1:1)*Q.height:y.hide||(f[I]+=(O?-1:1)*Q.width),lr(lr({},p),{},$h({},m,Q))},{})},nO=function(e,r){var n=e.x,i=e.y,o=r.x,a=r.y;return{x:Math.min(n,o),y:Math.min(i,a),width:Math.abs(o-n),height:Math.abs(a-i)}},rne=function(e){var r=e.x1,n=e.y1,i=e.x2,o=e.y2;return nO({x:r,y:n},{x:i,y:o})},iO=function(){function t(e){Zre(this,t),this.scale=e}return ene(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,o=n.position;if(r!==void 0){if(o)switch(o){case"start":return this.scale(r);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(r)+s}default:return this.scale(r)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],o=n[n.length-1];return i<=o?r>=i&&r<=o:r>=o&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}])}();$h(iO,"EPS",1e-4);var sv=function(e){var r=Object.keys(e).reduce(function(n,i){return lr(lr({},n),{},$h({},i,iO.create(e[i])))},{});return lr(lr({},r),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.bandAware,s=o.position;return xre(i,function(c,u){return r[u].apply(c,{bandAware:a,position:s})})},isInRange:function(i){return JI(i,function(o,a){return r[a].isInRange(o)})}})};function nne(t){return(t%180+180)%180}var ine=function(e){var r=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=nne(i),a=o*Math.PI/180,s=Math.atan(n/r),c=a>s&&a<Math.PI-s?n/Math.sin(a):r/Math.cos(a);return Math.abs(c)},one=Br,ane=jc,sne=ph;function cne(t){return function(e,r,n){var i=Object(e);if(!ane(e)){var o=one(r);e=sne(e),r=function(s){return o(i[s],s,i)}}var a=t(e,r,n);return a>-1?i[o?e[a]:a]:void 0}}var une=cne,lne=GI;function fne(t){var e=lne(t),r=e%1;return e===e?r?e-r:e:0}var hne=fne,dne=JS,pne=Br,mne=hne,gne=Math.max;function yne(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:mne(r);return i<0&&(i=gne(n+i,0)),dne(t,pne(e),i)}var vne=yne,bne=une,_ne=vne,wne=bne(_ne),xne=wne;const Ane=ke(xne);var Ene=CB(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),cv=D.createContext(void 0),uv=D.createContext(void 0),oO=D.createContext(void 0),aO=D.createContext({}),sO=D.createContext(void 0),cO=D.createContext(0),uO=D.createContext(0),AA=function(e){var r=e.state,n=r.xAxisMap,i=r.yAxisMap,o=r.offset,a=e.clipPathId,s=e.children,c=e.width,u=e.height,l=Ene(o);return j.createElement(cv.Provider,{value:n},j.createElement(uv.Provider,{value:i},j.createElement(aO.Provider,{value:o},j.createElement(oO.Provider,{value:l},j.createElement(sO.Provider,{value:a},j.createElement(cO.Provider,{value:u},j.createElement(uO.Provider,{value:c},s)))))))},Tne=function(){return D.useContext(sO)},lO=function(e){var r=D.useContext(cv);r==null&&qi();var n=r[e];return n==null&&qi(),n},Sne=function(){var e=D.useContext(cv);return $n(e)},Pne=function(){var e=D.useContext(uv),r=Ane(e,function(n){return JI(n.domain,Number.isFinite)});return r||$n(e)},fO=function(e){var r=D.useContext(uv);r==null&&qi();var n=r[e];return n==null&&qi(),n},Ine=function(){var e=D.useContext(oO);return e},One=function(){return D.useContext(aO)},lv=function(){return D.useContext(uO)},fv=function(){return D.useContext(cO)};function Qo(t){"@babel/helpers - typeof";return Qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qo(t)}function Cne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rne(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dO(n.key),n)}}function kne(t,e,r){return e&&Rne(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nne(t,e,r){return e=of(e),$ne(t,hO()?Reflect.construct(e,r||[],of(t).constructor):e.apply(t,r))}function $ne(t,e){if(e&&(Qo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jne(t)}function jne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hO=function(){return!!t})()}function of(t){return of=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},of(t)}function Dne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mm(t,e)}function Mm(t,e){return Mm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Mm(t,e)}function EA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function TA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EA(Object(r),!0).forEach(function(n){hv(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hv(t,e,r){return e=dO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dO(t){var e=Mne(t,"string");return Qo(e)=="symbol"?e:e+""}function Mne(t,e){if(Qo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Qo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lne(t,e){return Une(t)||Bne(t,e)||Vne(t,e)||Fne()}function Fne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vne(t,e){if(t){if(typeof t=="string")return SA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SA(t,e)}}function SA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Bne(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function Une(t){if(Array.isArray(t))return t}function Lm(){return Lm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lm.apply(this,arguments)}var qne=function(e,r){var n;return j.isValidElement(e)?n=j.cloneElement(e,r):ue(e)?n=e(r):n=j.createElement("line",Lm({},r,{className:"recharts-reference-line-line"})),n},Wne=function(e,r,n,i,o,a,s,c,u){var l=o.x,f=o.y,d=o.width,p=o.height;if(n){var m=u.y,y=e.y.apply(m,{position:a});if($r(u,"discard")&&!e.y.isInRange(y))return null;var g=[{x:l+d,y},{x:l,y}];return c==="left"?g.reverse():g}if(r){var A=u.x,T=e.x.apply(A,{position:a});if($r(u,"discard")&&!e.x.isInRange(T))return null;var P=[{x:T,y:f+p},{x:T,y:f}];return s==="top"?P.reverse():P}if(i){var C=u.segment,x=C.map(function(I){return e.apply(I,{position:a})});return $r(u,"discard")&&pre(x,function(I){return!e.isInRange(I)})?null:x}return null};function zne(t){var e=t.x,r=t.y,n=t.segment,i=t.xAxisId,o=t.yAxisId,a=t.shape,s=t.className,c=t.alwaysShow,u=Tne(),l=lO(i),f=fO(o),d=Ine();if(!u||!d)return null;mr(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=sv({x:l.scale,y:f.scale}),m=ot(e),y=ot(r),g=n&&n.length===2,A=Wne(p,m,y,g,d,t.position,l.orientation,f.orientation,t);if(!A)return null;var T=Lne(A,2),P=T[0],C=P.x,x=P.y,I=T[1],b=I.x,w=I.y,S=$r(t,"hidden")?"url(#".concat(u,")"):void 0,k=TA(TA({clipPath:S},ie(t,!0)),{},{x1:C,y1:x,x2:b,y2:w});return j.createElement(be,{className:ge("recharts-reference-line",s)},qne(a,k),lt.renderCallByParent(t,rne({x1:C,y1:x,x2:b,y2:w})))}var dv=function(t){function e(){return Cne(this,e),Nne(this,e,arguments)}return Dne(e,t),kne(e,[{key:"render",value:function(){return j.createElement(zne,this.props)}}])}(j.Component);hv(dv,"displayName","ReferenceLine");hv(dv,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Fm(){return Fm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fm.apply(this,arguments)}function Jo(t){"@babel/helpers - typeof";return Jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jo(t)}function PA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function IA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PA(Object(r),!0).forEach(function(n){jh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kne(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mO(n.key),n)}}function Gne(t,e,r){return e&&Kne(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yne(t,e,r){return e=af(e),Xne(t,pO()?Reflect.construct(e,r||[],af(t).constructor):e.apply(t,r))}function Xne(t,e){if(e&&(Jo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qne(t)}function Qne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pO=function(){return!!t})()}function af(t){return af=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},af(t)}function Jne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vm(t,e)}function Vm(t,e){return Vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Vm(t,e)}function jh(t,e,r){return e=mO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mO(t){var e=Zne(t,"string");return Jo(e)=="symbol"?e:e+""}function Zne(t,e){if(Jo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Jo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eie=function(e){var r=e.x,n=e.y,i=e.xAxis,o=e.yAxis,a=sv({x:i.scale,y:o.scale}),s=a.apply({x:r,y:n},{bandAware:!0});return $r(e,"discard")&&!a.isInRange(s)?null:s},Dh=function(t){function e(){return Hne(this,e),Yne(this,e,arguments)}return Jne(e,t),Gne(e,[{key:"render",value:function(){var n=this.props,i=n.x,o=n.y,a=n.r,s=n.alwaysShow,c=n.clipPathId,u=ot(i),l=ot(o);if(mr(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!l)return null;var f=eie(this.props);if(!f)return null;var d=f.x,p=f.y,m=this.props,y=m.shape,g=m.className,A=$r(this.props,"hidden")?"url(#".concat(c,")"):void 0,T=IA(IA({clipPath:A},ie(this.props,!0)),{},{cx:d,cy:p});return j.createElement(be,{className:ge("recharts-reference-dot",g)},e.renderDot(y,T),lt.renderCallByParent(this.props,{x:d-a,y:p-a,width:2*a,height:2*a}))}}])}(j.Component);jh(Dh,"displayName","ReferenceDot");jh(Dh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});jh(Dh,"renderDot",function(t,e){var r;return j.isValidElement(t)?r=j.cloneElement(t,e):ue(t)?r=t(e):r=j.createElement(Bc,Fm({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function Bm(){return Bm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Bm.apply(this,arguments)}function Zo(t){"@babel/helpers - typeof";return Zo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zo(t)}function OA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function CA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OA(Object(r),!0).forEach(function(n){Mh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yO(n.key),n)}}function nie(t,e,r){return e&&rie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function iie(t,e,r){return e=sf(e),oie(t,gO()?Reflect.construct(e,r||[],sf(t).constructor):e.apply(t,r))}function oie(t,e){if(e&&(Zo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aie(t)}function aie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gO=function(){return!!t})()}function sf(t){return sf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sf(t)}function sie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Um(t,e)}function Um(t,e){return Um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Um(t,e)}function Mh(t,e,r){return e=yO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yO(t){var e=cie(t,"string");return Zo(e)=="symbol"?e:e+""}function cie(t,e){if(Zo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Zo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uie=function(e,r,n,i,o){var a=o.x1,s=o.x2,c=o.y1,u=o.y2,l=o.xAxis,f=o.yAxis;if(!l||!f)return null;var d=sv({x:l.scale,y:f.scale}),p={x:e?d.x.apply(a,{position:"start"}):d.x.rangeMin,y:n?d.y.apply(c,{position:"start"}):d.y.rangeMin},m={x:r?d.x.apply(s,{position:"end"}):d.x.rangeMax,y:i?d.y.apply(u,{position:"end"}):d.y.rangeMax};return $r(o,"discard")&&(!d.isInRange(p)||!d.isInRange(m))?null:nO(p,m)},Lh=function(t){function e(){return tie(this,e),iie(this,e,arguments)}return sie(e,t),nie(e,[{key:"render",value:function(){var n=this.props,i=n.x1,o=n.x2,a=n.y1,s=n.y2,c=n.className,u=n.alwaysShow,l=n.clipPathId;mr(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=ot(i),d=ot(o),p=ot(a),m=ot(s),y=this.props.shape;if(!f&&!d&&!p&&!m&&!y)return null;var g=uie(f,d,p,m,this.props);if(!g&&!y)return null;var A=$r(this.props,"hidden")?"url(#".concat(l,")"):void 0;return j.createElement(be,{className:ge("recharts-reference-area",c)},e.renderRect(y,CA(CA({clipPath:A},ie(this.props,!0)),g)),lt.renderCallByParent(this.props,g))}}])}(j.Component);Mh(Lh,"displayName","ReferenceArea");Mh(Lh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Mh(Lh,"renderRect",function(t,e){var r;return j.isValidElement(t)?r=j.cloneElement(t,e):ue(t)?r=t(e):r=j.createElement(ov,Bm({},e,{className:"recharts-reference-area-rect"})),r});function vO(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function lie(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return ine(n,r)}function fie(t,e,r){var n=r==="width",i=t.x,o=t.y,a=t.width,s=t.height;return e===1?{start:n?i:o,end:n?i+a:o+s}:{start:n?i+a:o+s,end:n?i:o}}function cf(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var o=r();return t*(e-t*o/2-n)>=0&&t*(e+t*o/2-i)<=0}function hie(t,e){return vO(t,e+1)}function die(t,e,r,n,i){for(var o=(n||[]).slice(),a=e.start,s=e.end,c=0,u=1,l=a,f=function(){var m=n==null?void 0:n[c];if(m===void 0)return{v:vO(n,u)};var y=c,g,A=function(){return g===void 0&&(g=r(m,y)),g},T=m.coordinate,P=c===0||cf(t,T,A,l,s);P||(c=0,l=a,u+=1),P&&(l=T+t*(A()/2+i),c+=u)},d;u<=o.length;)if(d=f(),d)return d.v;return[]}function hc(t){"@babel/helpers - typeof";return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hc(t)}function RA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function St(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RA(Object(r),!0).forEach(function(n){pie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pie(t,e,r){return e=mie(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mie(t){var e=gie(t,"string");return hc(e)=="symbol"?e:e+""}function gie(t,e){if(hc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(hc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yie(t,e,r,n,i){for(var o=(n||[]).slice(),a=o.length,s=e.start,c=e.end,u=function(d){var p=o[d],m,y=function(){return m===void 0&&(m=r(p,d)),m};if(d===a-1){var g=t*(p.coordinate+t*y()/2-c);o[d]=p=St(St({},p),{},{tickCoord:g>0?p.coordinate-g*t:p.coordinate})}else o[d]=p=St(St({},p),{},{tickCoord:p.coordinate});var A=cf(t,p.tickCoord,y,s,c);A&&(c=p.tickCoord-t*(y()/2+i),o[d]=St(St({},p),{},{isShow:!0}))},l=a-1;l>=0;l--)u(l);return o}function vie(t,e,r,n,i,o){var a=(n||[]).slice(),s=a.length,c=e.start,u=e.end;if(o){var l=n[s-1],f=r(l,s-1),d=t*(l.coordinate+t*f/2-u);a[s-1]=l=St(St({},l),{},{tickCoord:d>0?l.coordinate-d*t:l.coordinate});var p=cf(t,l.tickCoord,function(){return f},c,u);p&&(u=l.tickCoord-t*(f/2+i),a[s-1]=St(St({},l),{},{isShow:!0}))}for(var m=o?s-1:s,y=function(T){var P=a[T],C,x=function(){return C===void 0&&(C=r(P,T)),C};if(T===0){var I=t*(P.coordinate-t*x()/2-c);a[T]=P=St(St({},P),{},{tickCoord:I<0?P.coordinate-I*t:P.coordinate})}else a[T]=P=St(St({},P),{},{tickCoord:P.coordinate});var b=cf(t,P.tickCoord,x,c,u);b&&(c=P.tickCoord+t*(x()/2+i),a[T]=St(St({},P),{},{isShow:!0}))},g=0;g<m;g++)y(g);return a}function pv(t,e,r){var n=t.tick,i=t.ticks,o=t.viewBox,a=t.minTickGap,s=t.orientation,c=t.interval,u=t.tickFormatter,l=t.unit,f=t.angle;if(!i||!i.length||!n)return[];if(G(c)||gr.isSsr)return hie(i,typeof c=="number"&&G(c)?c:0);var d=[],p=s==="top"||s==="bottom"?"width":"height",m=l&&p==="width"?ms(l,{fontSize:e,letterSpacing:r}):{width:0,height:0},y=function(P,C){var x=ue(u)?u(P.value,C):P.value;return p==="width"?lie(ms(x,{fontSize:e,letterSpacing:r}),m,f):ms(x,{fontSize:e,letterSpacing:r})[p]},g=i.length>=2?jt(i[1].coordinate-i[0].coordinate):1,A=fie(o,g,p);return c==="equidistantPreserveStart"?die(g,A,y,i,a):(c==="preserveStart"||c==="preserveStartEnd"?d=vie(g,A,y,i,a,c==="preserveStartEnd"):d=yie(g,A,y,i,a),d.filter(function(T){return T.isShow}))}var bie=["viewBox"],_ie=["viewBox"],wie=["ticks"];function ea(t){"@babel/helpers - typeof";return ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ea(t)}function vo(){return vo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vo.apply(this,arguments)}function kA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $t(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kA(Object(r),!0).forEach(function(n){mv(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zd(t,e){if(t==null)return{};var r=xie(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function xie(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Aie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_O(n.key),n)}}function Eie(t,e,r){return e&&NA(t.prototype,e),r&&NA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tie(t,e,r){return e=uf(e),Sie(t,bO()?Reflect.construct(e,r||[],uf(t).constructor):e.apply(t,r))}function Sie(t,e){if(e&&(ea(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pie(t)}function Pie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bO=function(){return!!t})()}function uf(t){return uf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},uf(t)}function Iie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qm(t,e)}function qm(t,e){return qm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},qm(t,e)}function mv(t,e,r){return e=_O(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _O(t){var e=Oie(t,"string");return ea(e)=="symbol"?e:e+""}function Oie(t,e){if(ea(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ea(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ia=function(t){function e(r){var n;return Aie(this,e),n=Tie(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return Iie(e,t),Eie(e,[{key:"shouldComponentUpdate",value:function(n,i){var o=n.viewBox,a=zd(n,bie),s=this.props,c=s.viewBox,u=zd(s,_ie);return!Eo(o,c)||!Eo(a,u)||!Eo(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,o=i.x,a=i.y,s=i.width,c=i.height,u=i.orientation,l=i.tickSize,f=i.mirror,d=i.tickMargin,p,m,y,g,A,T,P=f?-1:1,C=n.tickSize||l,x=G(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=m=n.coordinate,g=a+ +!f*c,y=g-P*C,T=y-P*d,A=x;break;case"left":y=g=n.coordinate,m=o+ +!f*s,p=m-P*C,A=p-P*d,T=x;break;case"right":y=g=n.coordinate,m=o+ +f*s,p=m+P*C,A=p+P*d,T=x;break;default:p=m=n.coordinate,g=a+ +f*c,y=g+P*C,T=y+P*d,A=x;break}return{line:{x1:p,y1:y,x2:m,y2:g},tick:{x:A,y:T}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,o=n.mirror,a;switch(i){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,o=n.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,o=n.y,a=n.width,s=n.height,c=n.orientation,u=n.mirror,l=n.axisLine,f=$t($t($t({},ie(this.props,!1)),ie(l,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var d=+(c==="top"&&!u||c==="bottom"&&u);f=$t($t({},f),{},{x1:i,y1:o+d*s,x2:i+a,y2:o+d*s})}else{var p=+(c==="left"&&!u||c==="right"&&u);f=$t($t({},f),{},{x1:i+p*a,y1:o,x2:i+p*a,y2:o+s})}return j.createElement("line",vo({},f,{className:ge("recharts-cartesian-axis-line",Xt(l,"className"))}))}},{key:"renderTicks",value:function(n,i,o){var a=this,s=this.props,c=s.tickLine,u=s.stroke,l=s.tick,f=s.tickFormatter,d=s.unit,p=pv($t($t({},this.props),{},{ticks:n}),i,o),m=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),g=ie(this.props,!1),A=ie(l,!1),T=$t($t({},g),{},{fill:"none"},ie(c,!1)),P=p.map(function(C,x){var I=a.getTickLineCoord(C),b=I.line,w=I.tick,S=$t($t($t($t({textAnchor:m,verticalAnchor:y},g),{},{stroke:"none",fill:u},A),w),{},{index:x,payload:C,visibleTicksCount:p.length,tickFormatter:f});return j.createElement(be,vo({className:"recharts-cartesian-axis-tick",key:"tick-".concat(C.value,"-").concat(C.coordinate,"-").concat(C.tickCoord)},Fi(a.props,C,x)),c&&j.createElement("line",vo({},T,b,{className:ge("recharts-cartesian-axis-tick-line",Xt(c,"className"))})),l&&e.renderTickItem(l,S,"".concat(ue(f)?f(C.value,x):C.value).concat(d||"")))});return j.createElement("g",{className:"recharts-cartesian-axis-ticks"},P)}},{key:"render",value:function(){var n=this,i=this.props,o=i.axisLine,a=i.width,s=i.height,c=i.ticksGenerator,u=i.className,l=i.hide;if(l)return null;var f=this.props,d=f.ticks,p=zd(f,wie),m=d;return ue(c)&&(m=d&&d.length>0?c(this.props):c(p)),a<=0||s<=0||!m||!m.length?null:j.createElement(be,{className:ge("recharts-cartesian-axis",u),ref:function(g){n.layerReference=g}},o&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),lt.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,o){var a;return j.isValidElement(n)?a=j.cloneElement(n,i):ue(n)?a=n(i):a=j.createElement(Vi,vo({},i,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(D.Component);mv(Ia,"displayName","CartesianAxis");mv(Ia,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Cie=["x1","y1","x2","y2","key"],Rie=["offset"];function Wi(t){"@babel/helpers - typeof";return Wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wi(t)}function $A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ot(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$A(Object(r),!0).forEach(function(n){kie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$A(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kie(t,e,r){return e=Nie(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Nie(t){var e=$ie(t,"string");return Wi(e)=="symbol"?e:e+""}function $ie(t,e){if(Wi(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Wi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ti(){return Ti=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ti.apply(this,arguments)}function jA(t,e){if(t==null)return{};var r=jie(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function jie(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Die=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,i=e.x,o=e.y,a=e.width,s=e.height,c=e.ry;return j.createElement("rect",{x:i,y:o,ry:c,width:a,height:s,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function wO(t,e){var r;if(j.isValidElement(t))r=j.cloneElement(t,e);else if(ue(t))r=t(e);else{var n=e.x1,i=e.y1,o=e.x2,a=e.y2,s=e.key,c=jA(e,Cie),u=ie(c,!1);u.offset;var l=jA(u,Rie);r=j.createElement("line",Ti({},l,{x1:n,y1:i,x2:o,y2:a,fill:"none",key:s}))}return r}function Mie(t){var e=t.x,r=t.width,n=t.horizontal,i=n===void 0?!0:n,o=t.horizontalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,c){var u=Ot(Ot({},t),{},{x1:e,y1:s,x2:e+r,y2:s,key:"line-".concat(c),index:c});return wO(i,u)});return j.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function Lie(t){var e=t.y,r=t.height,n=t.vertical,i=n===void 0?!0:n,o=t.verticalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,c){var u=Ot(Ot({},t),{},{x1:s,y1:e,x2:s,y2:e+r,key:"line-".concat(c),index:c});return wO(i,u)});return j.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function Fie(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,i=t.y,o=t.width,a=t.height,s=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var l=s.map(function(d){return Math.round(d+i-i)}).sort(function(d,p){return d-p});i!==l[0]&&l.unshift(0);var f=l.map(function(d,p){var m=!l[p+1],y=m?i+a-d:l[p+1]-d;if(y<=0)return null;var g=p%e.length;return j.createElement("rect",{key:"react-".concat(p),y:d,x:n,height:y,width:o,stroke:"none",fill:e[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Vie(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,i=t.fillOpacity,o=t.x,a=t.y,s=t.width,c=t.height,u=t.verticalPoints;if(!r||!n||!n.length)return null;var l=u.map(function(d){return Math.round(d+o-o)}).sort(function(d,p){return d-p});o!==l[0]&&l.unshift(0);var f=l.map(function(d,p){var m=!l[p+1],y=m?o+s-d:l[p+1]-d;if(y<=0)return null;var g=p%n.length;return j.createElement("rect",{key:"react-".concat(p),x:d,y:a,width:y,height:c,stroke:"none",fill:n[g],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return j.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Bie=function(e,r){var n=e.xAxis,i=e.width,o=e.height,a=e.offset;return yI(pv(Ot(Ot(Ot({},Ia.defaultProps),n),{},{ticks:en(n,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.left,a.left+a.width,r)},Uie=function(e,r){var n=e.yAxis,i=e.width,o=e.height,a=e.offset;return yI(pv(Ot(Ot(Ot({},Ia.defaultProps),n),{},{ticks:en(n,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.top,a.top+a.height,r)},so={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Uu(t){var e,r,n,i,o,a,s=lv(),c=fv(),u=One(),l=Ot(Ot({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:so.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:so.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:so.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:so.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:so.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:so.verticalFill,x:G(t.x)?t.x:u.left,y:G(t.y)?t.y:u.top,width:G(t.width)?t.width:u.width,height:G(t.height)?t.height:u.height}),f=l.x,d=l.y,p=l.width,m=l.height,y=l.syncWithTicks,g=l.horizontalValues,A=l.verticalValues,T=Sne(),P=Pne();if(!G(p)||p<=0||!G(m)||m<=0||!G(f)||f!==+f||!G(d)||d!==+d)return null;var C=l.verticalCoordinatesGenerator||Bie,x=l.horizontalCoordinatesGenerator||Uie,I=l.horizontalPoints,b=l.verticalPoints;if((!I||!I.length)&&ue(x)){var w=g&&g.length,S=x({yAxis:P?Ot(Ot({},P),{},{ticks:w?g:P.ticks}):void 0,width:s,height:c,offset:u},w?!0:y);mr(Array.isArray(S),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Wi(S),"]")),Array.isArray(S)&&(I=S)}if((!b||!b.length)&&ue(C)){var k=A&&A.length,O=C({xAxis:T?Ot(Ot({},T),{},{ticks:k?A:T.ticks}):void 0,width:s,height:c,offset:u},k?!0:y);mr(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Wi(O),"]")),Array.isArray(O)&&(b=O)}return j.createElement("g",{className:"recharts-cartesian-grid"},j.createElement(Die,{fill:l.fill,fillOpacity:l.fillOpacity,x:l.x,y:l.y,width:l.width,height:l.height,ry:l.ry}),j.createElement(Mie,Ti({},l,{offset:u,horizontalPoints:I,xAxis:T,yAxis:P})),j.createElement(Lie,Ti({},l,{offset:u,verticalPoints:b,xAxis:T,yAxis:P})),j.createElement(Fie,Ti({},l,{horizontalPoints:I})),j.createElement(Vie,Ti({},l,{verticalPoints:b})))}Uu.displayName="CartesianGrid";var qie=["type","layout","connectNulls","ref"],Wie=["key"];function ta(t){"@babel/helpers - typeof";return ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ta(t)}function DA(t,e){if(t==null)return{};var r=zie(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zie(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ws(){return ws=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ws.apply(this,arguments)}function MA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MA(Object(r),!0).forEach(function(n){fr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function co(t){return Yie(t)||Gie(t)||Kie(t)||Hie()}function Hie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kie(t,e){if(t){if(typeof t=="string")return Wm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wm(t,e)}}function Gie(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Yie(t){if(Array.isArray(t))return Wm(t)}function Wm(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Xie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,AO(n.key),n)}}function Qie(t,e,r){return e&&LA(t.prototype,e),r&&LA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jie(t,e,r){return e=lf(e),Zie(t,xO()?Reflect.construct(e,r||[],lf(t).constructor):e.apply(t,r))}function Zie(t,e){if(e&&(ta(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eoe(t)}function eoe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xO=function(){return!!t})()}function lf(t){return lf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lf(t)}function toe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zm(t,e)}function zm(t,e){return zm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},zm(t,e)}function fr(t,e,r){return e=AO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AO(t){var e=roe(t,"string");return ta(e)=="symbol"?e:e+""}function roe(t,e){if(ta(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ta(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uc=function(t){function e(){var r;Xie(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=Jie(this,e,[].concat(i)),fr(r,"state",{isAnimationFinished:!0,totalLength:0}),fr(r,"generateSimpleStrokeDasharray",function(a,s){return"".concat(s,"px ").concat(a-s,"px")}),fr(r,"getStrokeDasharray",function(a,s,c){var u=c.reduce(function(A,T){return A+T});if(!u)return r.generateSimpleStrokeDasharray(s,a);for(var l=Math.floor(a/u),f=a%u,d=s-a,p=[],m=0,y=0;m<c.length;y+=c[m],++m)if(y+c[m]>f){p=[].concat(co(c.slice(0,m)),[f-y]);break}var g=p.length%2===0?[0,d]:[d];return[].concat(co(e.repeat(c,l)),co(p),g).map(function(A){return"".concat(A,"px")}).join(", ")}),fr(r,"id",Qi("recharts-line-")),fr(r,"pathRef",function(a){r.mainCurve=a}),fr(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),fr(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return toe(e,t),Qie(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.points,s=o.xAxis,c=o.yAxis,u=o.layout,l=o.children,f=Qt(l,Vc);if(!f)return null;var d=function(y,g){return{x:y.x,y:y.y,value:y.value,errorVal:Qe(y.payload,g)}},p={clipPath:n?"url(#clipPath-".concat(i,")"):null};return j.createElement(be,p,f.map(function(m){return j.cloneElement(m,{key:"bar-".concat(m.props.dataKey),data:a,xAxis:s,yAxis:c,layout:u,dataPointFormatter:d})}))}},{key:"renderDots",value:function(n,i,o){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,c=s.dot,u=s.points,l=s.dataKey,f=ie(this.props,!1),d=ie(c,!0),p=u.map(function(y,g){var A=Wt(Wt(Wt({key:"dot-".concat(g),r:3},f),d),{},{value:y.value,dataKey:l,cx:y.x,cy:y.y,index:g,payload:y.payload});return e.renderDotItem(c,A)}),m={clipPath:n?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return j.createElement(be,ws({className:"recharts-line-dots",key:"dots"},m),p)}},{key:"renderCurveStatically",value:function(n,i,o,a){var s=this.props,c=s.type,u=s.layout,l=s.connectNulls;s.ref;var f=DA(s,qie),d=Wt(Wt(Wt({},ie(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:n},a),{},{type:c,layout:u,connectNulls:l});return j.createElement(Ci,ws({},d,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,i){var o=this,a=this.props,s=a.points,c=a.strokeDasharray,u=a.isAnimationActive,l=a.animationBegin,f=a.animationDuration,d=a.animationEasing,p=a.animationId,m=a.animateNewValues,y=a.width,g=a.height,A=this.state,T=A.prevPoints,P=A.totalLength;return j.createElement(br,{begin:l,duration:f,isActive:u,easing:d,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(C){var x=C.t;if(T){var I=T.length/s.length,b=s.map(function(N,R){var V=Math.floor(R*I);if(T[V]){var F=T[V],U=it(F.x,N.x),W=it(F.y,N.y);return Wt(Wt({},N),{},{x:U(x),y:W(x)})}if(m){var K=it(y*2,N.x),Y=it(g/2,N.y);return Wt(Wt({},N),{},{x:K(x),y:Y(x)})}return Wt(Wt({},N),{},{x:N.x,y:N.y})});return o.renderCurveStatically(b,n,i)}var w=it(0,P),S=w(x),k;if(c){var O="".concat(c).split(/[,\s]+/gim).map(function(N){return parseFloat(N)});k=o.getStrokeDasharray(S,P,O)}else k=o.generateSimpleStrokeDasharray(P,S);return o.renderCurveStatically(s,n,i,{strokeDasharray:k})})}},{key:"renderCurve",value:function(n,i){var o=this.props,a=o.points,s=o.isAnimationActive,c=this.state,u=c.prevPoints,l=c.totalLength;return s&&a&&a.length&&(!u&&l>0||!Bi(u,a))?this.renderCurveWithAnimation(n,i):this.renderCurveStatically(a,n,i)}},{key:"render",value:function(){var n,i=this.props,o=i.hide,a=i.dot,s=i.points,c=i.className,u=i.xAxis,l=i.yAxis,f=i.top,d=i.left,p=i.width,m=i.height,y=i.isAnimationActive,g=i.id;if(o||!s||!s.length)return null;var A=this.state.isAnimationFinished,T=s.length===1,P=ge("recharts-line",c),C=u&&u.allowDataOverflow,x=l&&l.allowDataOverflow,I=C||x,b=he(g)?this.id:g,w=(n=ie(a,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},S=w.r,k=S===void 0?3:S,O=w.strokeWidth,N=O===void 0?2:O,R=uS(a)?a:{},V=R.clipDot,F=V===void 0?!0:V,U=k*2+N;return j.createElement(be,{className:P},C||x?j.createElement("defs",null,j.createElement("clipPath",{id:"clipPath-".concat(b)},j.createElement("rect",{x:C?d:d-p/2,y:x?f:f-m/2,width:C?p:p*2,height:x?m:m*2})),!F&&j.createElement("clipPath",{id:"clipPath-dots-".concat(b)},j.createElement("rect",{x:d-U/2,y:f-U/2,width:p+U,height:m+U}))):null,!T&&this.renderCurve(I,b),this.renderErrorBar(I,b),(T||a)&&this.renderDots(I,F,b),(!y||A)&&Nr.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,i){for(var o=n.length%2!==0?[].concat(co(n),[0]):n,a=[],s=0;s<i;++s)a=[].concat(co(a),co(o));return a}},{key:"renderDotItem",value:function(n,i){var o;if(j.isValidElement(n))o=j.cloneElement(n,i);else if(ue(n))o=n(i);else{var a=i.key,s=DA(i,Wie),c=ge("recharts-line-dot",typeof n!="boolean"?n.className:"");o=j.createElement(Bc,ws({key:a},s,{className:c}))}return o}}])}(D.PureComponent);fr(Uc,"displayName","Line");fr(Uc,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!gr.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});fr(Uc,"getComposedData",function(t){var e=t.props,r=t.xAxis,n=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,a=t.dataKey,s=t.bandSize,c=t.displayedData,u=t.offset,l=e.layout,f=c.map(function(d,p){var m=Qe(d,a);return l==="horizontal"?{x:Vl({axis:r,ticks:i,bandSize:s,entry:d,index:p}),y:he(m)?null:n.scale(m),value:m,payload:d}:{x:he(m)?null:r.scale(m),y:Vl({axis:n,ticks:o,bandSize:s,entry:d,index:p}),value:m,payload:d}});return Wt({points:f,layout:l},u)});var noe=["layout","type","stroke","connectNulls","isRange","ref"],ioe=["key"],EO;function ra(t){"@babel/helpers - typeof";return ra=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ra(t)}function TO(t,e){if(t==null)return{};var r=ooe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ooe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Si(){return Si=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Si.apply(this,arguments)}function FA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Pn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FA(Object(r),!0).forEach(function(n){Sr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aoe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PO(n.key),n)}}function soe(t,e,r){return e&&VA(t.prototype,e),r&&VA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function coe(t,e,r){return e=ff(e),uoe(t,SO()?Reflect.construct(e,r||[],ff(t).constructor):e.apply(t,r))}function uoe(t,e){if(e&&(ra(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return loe(t)}function loe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SO=function(){return!!t})()}function ff(t){return ff=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ff(t)}function foe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hm(t,e)}function Hm(t,e){return Hm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Hm(t,e)}function Sr(t,e,r){return e=PO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PO(t){var e=hoe(t,"string");return ra(e)=="symbol"?e:e+""}function hoe(t,e){if(ra(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ra(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mn=function(t){function e(){var r;aoe(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=coe(this,e,[].concat(i)),Sr(r,"state",{isAnimationFinished:!0}),Sr(r,"id",Qi("recharts-area-")),Sr(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),ue(a)&&a()}),Sr(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),ue(a)&&a()}),r}return foe(e,t),soe(e,[{key:"renderDots",value:function(n,i,o){var a=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(a&&!s)return null;var c=this.props,u=c.dot,l=c.points,f=c.dataKey,d=ie(this.props,!1),p=ie(u,!0),m=l.map(function(g,A){var T=Pn(Pn(Pn({key:"dot-".concat(A),r:3},d),p),{},{index:A,cx:g.x,cy:g.y,dataKey:f,value:g.value,payload:g.payload,points:l});return e.renderDotItem(u,T)}),y={clipPath:n?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return j.createElement(be,Si({className:"recharts-area-dots"},y),m)}},{key:"renderHorizontalRect",value:function(n){var i=this.props,o=i.baseLine,a=i.points,s=i.strokeWidth,c=a[0].x,u=a[a.length-1].x,l=n*Math.abs(c-u),f=Mn(a.map(function(d){return d.y||0}));return G(o)&&typeof o=="number"?f=Math.max(o,f):o&&Array.isArray(o)&&o.length&&(f=Math.max(Mn(o.map(function(d){return d.y||0})),f)),G(f)?j.createElement("rect",{x:c<u?c:c-l,y:0,width:l,height:Math.floor(f+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var i=this.props,o=i.baseLine,a=i.points,s=i.strokeWidth,c=a[0].y,u=a[a.length-1].y,l=n*Math.abs(c-u),f=Mn(a.map(function(d){return d.x||0}));return G(o)&&typeof o=="number"?f=Math.max(o,f):o&&Array.isArray(o)&&o.length&&(f=Math.max(Mn(o.map(function(d){return d.x||0})),f)),G(f)?j.createElement("rect",{x:0,y:c<u?c:c-l,width:f+(s?parseInt("".concat(s),10):1),height:Math.floor(l)}):null}},{key:"renderClipRect",value:function(n){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,i,o,a){var s=this.props,c=s.layout,u=s.type,l=s.stroke,f=s.connectNulls,d=s.isRange;s.ref;var p=TO(s,noe);return j.createElement(be,{clipPath:o?"url(#clipPath-".concat(a,")"):null},j.createElement(Ci,Si({},ie(p,!0),{points:n,connectNulls:f,type:u,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),l!=="none"&&j.createElement(Ci,Si({},ie(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:n})),l!=="none"&&d&&j.createElement(Ci,Si({},ie(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(n,i){var o=this,a=this.props,s=a.points,c=a.baseLine,u=a.isAnimationActive,l=a.animationBegin,f=a.animationDuration,d=a.animationEasing,p=a.animationId,m=this.state,y=m.prevPoints,g=m.prevBaseLine;return j.createElement(br,{begin:l,duration:f,isActive:u,easing:d,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var T=A.t;if(y){var P=y.length/s.length,C=s.map(function(w,S){var k=Math.floor(S*P);if(y[k]){var O=y[k],N=it(O.x,w.x),R=it(O.y,w.y);return Pn(Pn({},w),{},{x:N(T),y:R(T)})}return w}),x;if(G(c)&&typeof c=="number"){var I=it(g,c);x=I(T)}else if(he(c)||_a(c)){var b=it(g,0);x=b(T)}else x=c.map(function(w,S){var k=Math.floor(S*P);if(g[k]){var O=g[k],N=it(O.x,w.x),R=it(O.y,w.y);return Pn(Pn({},w),{},{x:N(T),y:R(T)})}return w});return o.renderAreaStatically(C,x,n,i)}return j.createElement(be,null,j.createElement("defs",null,j.createElement("clipPath",{id:"animationClipPath-".concat(i)},o.renderClipRect(T))),j.createElement(be,{clipPath:"url(#animationClipPath-".concat(i,")")},o.renderAreaStatically(s,c,n,i)))})}},{key:"renderArea",value:function(n,i){var o=this.props,a=o.points,s=o.baseLine,c=o.isAnimationActive,u=this.state,l=u.prevPoints,f=u.prevBaseLine,d=u.totalLength;return c&&a&&a.length&&(!l&&d>0||!Bi(l,a)||!Bi(f,s))?this.renderAreaWithAnimation(n,i):this.renderAreaStatically(a,s,n,i)}},{key:"render",value:function(){var n,i=this.props,o=i.hide,a=i.dot,s=i.points,c=i.className,u=i.top,l=i.left,f=i.xAxis,d=i.yAxis,p=i.width,m=i.height,y=i.isAnimationActive,g=i.id;if(o||!s||!s.length)return null;var A=this.state.isAnimationFinished,T=s.length===1,P=ge("recharts-area",c),C=f&&f.allowDataOverflow,x=d&&d.allowDataOverflow,I=C||x,b=he(g)?this.id:g,w=(n=ie(a,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},S=w.r,k=S===void 0?3:S,O=w.strokeWidth,N=O===void 0?2:O,R=uS(a)?a:{},V=R.clipDot,F=V===void 0?!0:V,U=k*2+N;return j.createElement(be,{className:P},C||x?j.createElement("defs",null,j.createElement("clipPath",{id:"clipPath-".concat(b)},j.createElement("rect",{x:C?l:l-p/2,y:x?u:u-m/2,width:C?p:p*2,height:x?m:m*2})),!F&&j.createElement("clipPath",{id:"clipPath-dots-".concat(b)},j.createElement("rect",{x:l-U/2,y:u-U/2,width:p+U,height:m+U}))):null,T?null:this.renderArea(I,b),(a||T)&&this.renderDots(I,F,b),(!y||A)&&Nr.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:n.points!==i.curPoints||n.baseLine!==i.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(D.PureComponent);EO=mn;Sr(mn,"displayName","Area");Sr(mn,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!gr.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Sr(mn,"getBaseValue",function(t,e,r,n){var i=t.layout,o=t.baseValue,a=e.props.baseValue,s=a??o;if(G(s)&&typeof s=="number")return s;var c=i==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var l=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return s==="dataMin"?f:s==="dataMax"||l<0?l:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]});Sr(mn,"getComposedData",function(t){var e=t.props,r=t.item,n=t.xAxis,i=t.yAxis,o=t.xAxisTicks,a=t.yAxisTicks,s=t.bandSize,c=t.dataKey,u=t.stackedData,l=t.dataStartIndex,f=t.displayedData,d=t.offset,p=e.layout,m=u&&u.length,y=EO.getBaseValue(e,r,n,i),g=p==="horizontal",A=!1,T=f.map(function(C,x){var I;m?I=u[l+x]:(I=Qe(C,c),Array.isArray(I)?A=!0:I=[y,I]);var b=I[1]==null||m&&Qe(C,c)==null;return g?{x:Vl({axis:n,ticks:o,bandSize:s,entry:C,index:x}),y:b?null:i.scale(I[1]),value:I,payload:C}:{x:b?null:n.scale(I[1]),y:Vl({axis:i,ticks:a,bandSize:s,entry:C,index:x}),value:I,payload:C}}),P;return m||A?P=T.map(function(C){var x=Array.isArray(C.value)?C.value[0]:null;return g?{x:C.x,y:x!=null&&C.y!=null?i.scale(x):null}:{x:x!=null?n.scale(x):null,y:C.y}}):P=g?i.scale(y):n.scale(y),Pn({points:T,baseLine:P,layout:p,isRange:A},d)});Sr(mn,"renderDotItem",function(t,e){var r;if(j.isValidElement(t))r=j.cloneElement(t,e);else if(ue(t))r=t(e);else{var n=ge("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,o=TO(e,ioe);r=j.createElement(Bc,Si({},o,{key:i,className:n}))}return r});function na(t){"@babel/helpers - typeof";return na=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},na(t)}function doe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function poe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CO(n.key),n)}}function moe(t,e,r){return e&&poe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function goe(t,e,r){return e=hf(e),yoe(t,IO()?Reflect.construct(e,r||[],hf(t).constructor):e.apply(t,r))}function yoe(t,e){if(e&&(na(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return voe(t)}function voe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IO=function(){return!!t})()}function hf(t){return hf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hf(t)}function boe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Km(t,e)}function Km(t,e){return Km=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Km(t,e)}function OO(t,e,r){return e=CO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CO(t){var e=_oe(t,"string");return na(e)=="symbol"?e:e+""}function _oe(t,e){if(na(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(na(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gm(){return Gm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gm.apply(this,arguments)}function woe(t){var e=t.xAxisId,r=lv(),n=fv(),i=lO(e);return i==null?null:j.createElement(Ia,Gm({},i,{className:ge("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(a){return en(a,!0)}}))}var zn=function(t){function e(){return doe(this,e),goe(this,e,arguments)}return boe(e,t),moe(e,[{key:"render",value:function(){return j.createElement(woe,this.props)}}])}(j.Component);OO(zn,"displayName","XAxis");OO(zn,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function ia(t){"@babel/helpers - typeof";return ia=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ia(t)}function xoe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Aoe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NO(n.key),n)}}function Eoe(t,e,r){return e&&Aoe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Toe(t,e,r){return e=df(e),Soe(t,RO()?Reflect.construct(e,r||[],df(t).constructor):e.apply(t,r))}function Soe(t,e){if(e&&(ia(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Poe(t)}function Poe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RO=function(){return!!t})()}function df(t){return df=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},df(t)}function Ioe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ym(t,e)}function Ym(t,e){return Ym=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ym(t,e)}function kO(t,e,r){return e=NO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NO(t){var e=Ooe(t,"string");return ia(e)=="symbol"?e:e+""}function Ooe(t,e){if(ia(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ia(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xm(){return Xm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xm.apply(this,arguments)}var Coe=function(e){var r=e.yAxisId,n=lv(),i=fv(),o=fO(r);return o==null?null:j.createElement(Ia,Xm({},o,{className:ge("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(s){return en(s,!0)}}))},Hn=function(t){function e(){return xoe(this,e),Toe(this,e,arguments)}return Ioe(e,t),Eoe(e,[{key:"render",value:function(){return j.createElement(Coe,this.props)}}])}(j.Component);kO(Hn,"displayName","YAxis");kO(Hn,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function BA(t){return $oe(t)||Noe(t)||koe(t)||Roe()}function Roe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function koe(t,e){if(t){if(typeof t=="string")return Qm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qm(t,e)}}function Noe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $oe(t){if(Array.isArray(t))return Qm(t)}function Qm(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Jm=function(e,r,n,i,o){var a=Qt(e,dv),s=Qt(e,Dh),c=[].concat(BA(a),BA(s)),u=Qt(e,Lh),l="".concat(i,"Id"),f=i[0],d=r;if(c.length&&(d=c.reduce(function(y,g){if(g.props[l]===n&&$r(g.props,"extendDomain")&&G(g.props[f])){var A=g.props[f];return[Math.min(y[0],A),Math.max(y[1],A)]}return y},d)),u.length){var p="".concat(f,"1"),m="".concat(f,"2");d=u.reduce(function(y,g){if(g.props[l]===n&&$r(g.props,"extendDomain")&&G(g.props[p])&&G(g.props[m])){var A=g.props[p],T=g.props[m];return[Math.min(y[0],A,T),Math.max(y[1],A,T)]}return y},d)}return o&&o.length&&(d=o.reduce(function(y,g){return G(g)?[Math.min(y[0],g),Math.max(y[1],g)]:y},d)),d},$O={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,u,l){this.fn=c,this.context=u,this.once=l||!1}function o(c,u,l,f,d){if(typeof l!="function")throw new TypeError("The listener must be a function");var p=new i(l,f||c,d),m=r?r+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],p]:c._events[m].push(p):(c._events[m]=p,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],l,f;if(this._eventsCount===0)return u;for(f in l=this._events)e.call(l,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},s.prototype.listeners=function(u){var l=r?r+u:u,f=this._events[l];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,p=f.length,m=new Array(p);d<p;d++)m[d]=f[d].fn;return m},s.prototype.listenerCount=function(u){var l=r?r+u:u,f=this._events[l];return f?f.fn?1:f.length:0},s.prototype.emit=function(u,l,f,d,p,m){var y=r?r+u:u;if(!this._events[y])return!1;var g=this._events[y],A=arguments.length,T,P;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),A){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,l),!0;case 3:return g.fn.call(g.context,l,f),!0;case 4:return g.fn.call(g.context,l,f,d),!0;case 5:return g.fn.call(g.context,l,f,d,p),!0;case 6:return g.fn.call(g.context,l,f,d,p,m),!0}for(P=1,T=new Array(A-1);P<A;P++)T[P-1]=arguments[P];g.fn.apply(g.context,T)}else{var C=g.length,x;for(P=0;P<C;P++)switch(g[P].once&&this.removeListener(u,g[P].fn,void 0,!0),A){case 1:g[P].fn.call(g[P].context);break;case 2:g[P].fn.call(g[P].context,l);break;case 3:g[P].fn.call(g[P].context,l,f);break;case 4:g[P].fn.call(g[P].context,l,f,d);break;default:if(!T)for(x=1,T=new Array(A-1);x<A;x++)T[x-1]=arguments[x];g[P].fn.apply(g[P].context,T)}}return!0},s.prototype.on=function(u,l,f){return o(this,u,l,f,!1)},s.prototype.once=function(u,l,f){return o(this,u,l,f,!0)},s.prototype.removeListener=function(u,l,f,d){var p=r?r+u:u;if(!this._events[p])return this;if(!l)return a(this,p),this;var m=this._events[p];if(m.fn)m.fn===l&&(!d||m.once)&&(!f||m.context===f)&&a(this,p);else{for(var y=0,g=[],A=m.length;y<A;y++)(m[y].fn!==l||d&&!m[y].once||f&&m[y].context!==f)&&g.push(m[y]);g.length?this._events[p]=g.length===1?g[0]:g:a(this,p)}return this},s.prototype.removeAllListeners=function(u){var l;return u?(l=r?r+u:u,this._events[l]&&a(this,l)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,t.exports=s})($O);var joe=$O.exports;const Doe=ke(joe);var Hd=new Doe,Kd="recharts.syncMouseEvents";function dc(t){"@babel/helpers - typeof";return dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dc(t)}function Moe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Loe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jO(n.key),n)}}function Foe(t,e,r){return e&&Loe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gd(t,e,r){return e=jO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jO(t){var e=Voe(t,"string");return dc(e)=="symbol"?e:e+""}function Voe(t,e){if(dc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(dc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Boe=function(){function t(){Moe(this,t),Gd(this,"activeIndex",0),Gd(this,"coordinateList",[]),Gd(this,"layout","horizontal")}return Foe(t,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,o=i===void 0?null:i,a=r.container,s=a===void 0?null:a,c=r.layout,u=c===void 0?null:c,l=r.offset,f=l===void 0?null:l,d=r.mouseHandlerCallback,p=d===void 0?null:d;this.coordinateList=(n=o??this.coordinateList)!==null&&n!==void 0?n:[],this.container=s??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,a=i.y,s=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,l=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=o+c+u,d=a+this.offset.top+s/2+l;this.mouseHandlerCallback({pageX:f,pageY:d})}}}])}();function Uoe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],i=t==null?void 0:t[1];if(n&&i&&G(n)&&G(i))return!0}return!1}function qoe(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function DO(t){var e=t.cx,r=t.cy,n=t.radius,i=t.startAngle,o=t.endAngle,a=Le(e,r,n,i),s=Le(e,r,n,o);return{points:[a,s],cx:e,cy:r,radius:n,startAngle:i,endAngle:o}}function Woe(t,e,r){var n,i,o,a;if(t==="horizontal")n=e.x,o=n,i=r.top,a=r.top+r.height;else if(t==="vertical")i=e.y,a=i,n=r.left,o=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,c=e.cy,u=e.innerRadius,l=e.outerRadius,f=e.angle,d=Le(s,c,u,f),p=Le(s,c,l,f);n=d.x,i=d.y,o=p.x,a=p.y}else return DO(e);return[{x:n,y:i},{x:o,y:a}]}function pc(t){"@babel/helpers - typeof";return pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pc(t)}function UA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ou(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UA(Object(r),!0).forEach(function(n){zoe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zoe(t,e,r){return e=Hoe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hoe(t){var e=Koe(t,"string");return pc(e)=="symbol"?e:e+""}function Koe(t,e){if(pc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(pc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Goe(t){var e,r,n=t.element,i=t.tooltipEventType,o=t.isActive,a=t.activeCoordinate,s=t.activePayload,c=t.offset,u=t.activeTooltipIndex,l=t.tooltipAxisBandSize,f=t.layout,d=t.chartName,p=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!o||!a||d!=="ScatterChart"&&i!=="axis")return null;var m,y=Ci;if(d==="ScatterChart")m=a,y=ree;else if(d==="BarChart")m=qoe(f,a,c,l),y=ov;else if(f==="radial"){var g=DO(a),A=g.cx,T=g.cy,P=g.radius,C=g.startAngle,x=g.endAngle;m={cx:A,cy:T,startAngle:C,endAngle:x,innerRadius:P,outerRadius:P},y=II}else m={points:Woe(f,a,c)},y=Ci;var I=Ou(Ou(Ou(Ou({stroke:"#ccc",pointerEvents:"none"},c),m),ie(p,!1)),{},{payload:s,payloadIndex:u,className:ge("recharts-tooltip-cursor",p.className)});return D.isValidElement(p)?D.cloneElement(p,I):D.createElement(y,I)}var Yoe=["item"],Xoe=["children","className","width","height","style","compact","title","desc"];function oa(t){"@babel/helpers - typeof";return oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oa(t)}function bo(){return bo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bo.apply(this,arguments)}function qA(t,e){return Zoe(t)||Joe(t,e)||LO(t,e)||Qoe()}function Qoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Joe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function Zoe(t){if(Array.isArray(t))return t}function WA(t,e){if(t==null)return{};var r=eae(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function eae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function tae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FO(n.key),n)}}function nae(t,e,r){return e&&rae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function iae(t,e,r){return e=pf(e),oae(t,MO()?Reflect.construct(e,r||[],pf(t).constructor):e.apply(t,r))}function oae(t,e){if(e&&(oa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aae(t)}function aae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MO=function(){return!!t})()}function pf(t){return pf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pf(t)}function sae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zm(t,e)}function Zm(t,e){return Zm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Zm(t,e)}function aa(t){return lae(t)||uae(t)||LO(t)||cae()}function cae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LO(t,e){if(t){if(typeof t=="string")return eg(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eg(t,e)}}function uae(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lae(t){if(Array.isArray(t))return eg(t)}function eg(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function zA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function B(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zA(Object(r),!0).forEach(function(n){se(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function se(t,e,r){return e=FO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FO(t){var e=fae(t,"string");return oa(e)=="symbol"?e:e+""}function fae(t,e){if(oa(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(oa(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hae={xAxis:["bottom","top"],yAxis:["left","right"]},dae={width:"100%",height:"100%"},VO={x:0,y:0};function Cu(t){return t}var pae=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},mae=function(e,r,n,i){var o=r.find(function(l){return l&&l.index===n});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,s=i.radius;return B(B(B({},i),Le(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var c=o.coordinate,u=i.angle;return B(B(B({},i),Le(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return VO},Fh=function(e,r){var n=r.graphicalItems,i=r.dataStartIndex,o=r.dataEndIndex,a=(n??[]).reduce(function(s,c){var u=c.props.data;return u&&u.length?[].concat(aa(s),aa(u)):s},[]);return a.length>0?a:e&&e.length&&G(i)&&G(o)?e.slice(i,o+1):[]};function BO(t){return t==="number"?[0,"auto"]:void 0}var tg=function(e,r,n,i){var o=e.graphicalItems,a=e.tooltipAxis,s=Fh(r,e);return n<0||!o||!o.length||n>=s.length?null:o.reduce(function(c,u){var l,f=(l=u.props.data)!==null&&l!==void 0?l:r;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var d;if(a.dataKey&&!a.allowDuplicatedCategory){var p=f===void 0?s:f;d=hl(p,a.dataKey,i)}else d=f&&f[n]||s[n];return d?[].concat(aa(c),[xI(u,d)]):c},[])},HA=function(e,r,n,i){var o=i||{x:e.chartX,y:e.chartY},a=pae(o,n),s=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,l=DX(a,s,u,c);if(l>=0&&u){var f=u[l]&&u[l].value,d=tg(e,r,l,f),p=mae(n,s,l,o);return{activeTooltipIndex:l,activeLabel:f,activePayload:d,activeCoordinate:p}}return null},gae=function(e,r){var n=r.axes,i=r.graphicalItems,o=r.axisType,a=r.axisIdKey,s=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,l=e.layout,f=e.children,d=e.stackOffset,p=gI(l,o);return n.reduce(function(m,y){var g,A=y.type.defaultProps!==void 0?B(B({},y.type.defaultProps),y.props):y.props,T=A.type,P=A.dataKey,C=A.allowDataOverflow,x=A.allowDuplicatedCategory,I=A.scale,b=A.ticks,w=A.includeHidden,S=A[a];if(m[S])return m;var k=Fh(e.data,{graphicalItems:i.filter(function(J){var Q,Pe=a in J.props?J.props[a]:(Q=J.type.defaultProps)===null||Q===void 0?void 0:Q[a];return Pe===S}),dataStartIndex:c,dataEndIndex:u}),O=k.length,N,R,V;Uoe(A.domain,C,T)&&(N=pm(A.domain,null,C),p&&(T==="number"||I!=="auto")&&(V=ys(k,P,"category")));var F=BO(T);if(!N||N.length===0){var U,W=(U=A.domain)!==null&&U!==void 0?U:F;if(P){if(N=ys(k,P,T),T==="category"&&p){var K=PU(N);x&&K?(R=N,N=Zl(0,O)):x||(N=hx(W,N,y).reduce(function(J,Q){return J.indexOf(Q)>=0?J:[].concat(aa(J),[Q])},[]))}else if(T==="category")x?N=N.filter(function(J){return J!==""&&!he(J)}):N=hx(W,N,y).reduce(function(J,Q){return J.indexOf(Q)>=0||Q===""||he(Q)?J:[].concat(aa(J),[Q])},[]);else if(T==="number"){var Y=BX(k,i.filter(function(J){var Q,Pe,Ae=a in J.props?J.props[a]:(Q=J.type.defaultProps)===null||Q===void 0?void 0:Q[a],ht="hide"in J.props?J.props.hide:(Pe=J.type.defaultProps)===null||Pe===void 0?void 0:Pe.hide;return Ae===S&&(w||!ht)}),P,o,l);Y&&(N=Y)}p&&(T==="number"||I!=="auto")&&(V=ys(k,P,"category"))}else p?N=Zl(0,O):s&&s[S]&&s[S].hasStack&&T==="number"?N=d==="expand"?[0,1]:wI(s[S].stackGroups,c,u):N=mI(k,i.filter(function(J){var Q=a in J.props?J.props[a]:J.type.defaultProps[a],Pe="hide"in J.props?J.props.hide:J.type.defaultProps.hide;return Q===S&&(w||!Pe)}),T,l,!0);if(T==="number")N=Jm(f,N,S,o,b),W&&(N=pm(W,N,C));else if(T==="category"&&W){var ne=W,oe=N.every(function(J){return ne.indexOf(J)>=0});oe&&(N=ne)}}return B(B({},m),{},se({},S,B(B({},A),{},{axisType:o,domain:N,categoricalDomain:V,duplicateDomain:R,originalDomain:(g=A.domain)!==null&&g!==void 0?g:F,isCategorical:p,layout:l})))},{})},yae=function(e,r){var n=r.graphicalItems,i=r.Axis,o=r.axisType,a=r.axisIdKey,s=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,l=e.layout,f=e.children,d=Fh(e.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),p=d.length,m=gI(l,o),y=-1;return n.reduce(function(g,A){var T=A.type.defaultProps!==void 0?B(B({},A.type.defaultProps),A.props):A.props,P=T[a],C=BO("number");if(!g[P]){y++;var x;return m?x=Zl(0,p):s&&s[P]&&s[P].hasStack?(x=wI(s[P].stackGroups,c,u),x=Jm(f,x,P,o)):(x=pm(C,mI(d,n.filter(function(I){var b,w,S=a in I.props?I.props[a]:(b=I.type.defaultProps)===null||b===void 0?void 0:b[a],k="hide"in I.props?I.props.hide:(w=I.type.defaultProps)===null||w===void 0?void 0:w.hide;return S===P&&!k}),"number",l),i.defaultProps.allowDataOverflow),x=Jm(f,x,P,o)),B(B({},g),{},se({},P,B(B({axisType:o},i.defaultProps),{},{hide:!0,orientation:Xt(hae,"".concat(o,".").concat(y%2),null),domain:x,originalDomain:C,isCategorical:m,layout:l})))}return g},{})},vae=function(e,r){var n=r.axisType,i=n===void 0?"xAxis":n,o=r.AxisComp,a=r.graphicalItems,s=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,l=e.children,f="".concat(i,"Id"),d=Qt(l,o),p={};return d&&d.length?p=gae(e,{axes:d,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:c,dataEndIndex:u}):a&&a.length&&(p=yae(e,{Axis:o,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:c,dataEndIndex:u})),p},bae=function(e){var r=$n(e),n=en(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:ky(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Bl(r,n)}},KA=function(e){var r=e.children,n=e.defaultShowTooltip,i=Ht(r,Yo),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!n}},_ae=function(e){return!e||!e.length?!1:e.some(function(r){var n=on(r&&r.type);return n&&n.indexOf("Bar")>=0})},GA=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},wae=function(e,r){var n=e.props,i=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,s=e.yAxisMap,c=s===void 0?{}:s,u=n.width,l=n.height,f=n.children,d=n.margin||{},p=Ht(f,Yo),m=Ht(f,Er),y=Object.keys(c).reduce(function(x,I){var b=c[I],w=b.orientation;return!b.mirror&&!b.hide?B(B({},x),{},se({},w,x[w]+b.width)):x},{left:d.left||0,right:d.right||0}),g=Object.keys(a).reduce(function(x,I){var b=a[I],w=b.orientation;return!b.mirror&&!b.hide?B(B({},x),{},se({},w,Xt(x,"".concat(w))+b.height)):x},{top:d.top||0,bottom:d.bottom||0}),A=B(B({},g),y),T=A.bottom;p&&(A.bottom+=p.props.height||Yo.defaultProps.height),m&&r&&(A=FX(A,i,n,r));var P=u-A.left-A.right,C=l-A.top-A.bottom;return B(B({brushBottom:T},A),{},{width:Math.max(P,0),height:Math.max(C,0)})},xae=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},Vh=function(e){var r=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,o=i===void 0?"axis":i,a=e.validateTooltipEventTypes,s=a===void 0?["axis"]:a,c=e.axisComponents,u=e.legendContent,l=e.formatAxisMap,f=e.defaultProps,d=function(A,T){var P=T.graphicalItems,C=T.stackGroups,x=T.offset,I=T.updateId,b=T.dataStartIndex,w=T.dataEndIndex,S=A.barSize,k=A.layout,O=A.barGap,N=A.barCategoryGap,R=A.maxBarSize,V=GA(k),F=V.numericAxisName,U=V.cateAxisName,W=_ae(P),K=[];return P.forEach(function(Y,ne){var oe=Fh(A.data,{graphicalItems:[Y],dataStartIndex:b,dataEndIndex:w}),J=Y.type.defaultProps!==void 0?B(B({},Y.type.defaultProps),Y.props):Y.props,Q=J.dataKey,Pe=J.maxBarSize,Ae=J["".concat(F,"Id")],ht=J["".concat(U,"Id")],_t={},Ye=c.reduce(function(xr,qr){var oi=T["".concat(qr.axisType,"Map")],eo=J["".concat(qr.axisType,"Id")];oi&&oi[eo]||qr.axisType==="zAxis"||qi();var Oa=oi[eo];return B(B({},xr),{},se(se({},qr.axisType,Oa),"".concat(qr.axisType,"Ticks"),en(Oa)))},_t),Z=Ye[U],le=Ye["".concat(U,"Ticks")],de=C&&C[Ae]&&C[Ae].hasStack&&XX(Y,C[Ae].stackGroups),z=on(Y.type).indexOf("Bar")>=0,je=Bl(Z,le),ve=[],We=W&&MX({barSize:S,stackGroups:C,totalSize:xae(Ye,U)});if(z){var He,wt,wr=he(Pe)?R:Pe,Ur=(He=(wt=Bl(Z,le,!0))!==null&&wt!==void 0?wt:wr)!==null&&He!==void 0?He:0;ve=LX({barGap:O,barCategoryGap:N,bandSize:Ur!==je?Ur:je,sizeList:We[ht],maxBarSize:wr}),Ur!==je&&(ve=ve.map(function(xr){return B(B({},xr),{},{position:B(B({},xr.position),{},{offset:xr.position.offset-Ur/2})})}))}var xn=Y&&Y.type&&Y.type.getComposedData;xn&&K.push({props:B(B({},xn(B(B({},Ye),{},{displayedData:oe,props:A,dataKey:Q,item:Y,bandSize:je,barPosition:ve,offset:x,stackedData:de,layout:k,dataStartIndex:b,dataEndIndex:w}))),{},se(se(se({key:Y.key||"item-".concat(ne)},F,Ye[F]),U,Ye[U]),"animationId",I)),childIndex:LU(Y,A.children),item:Y})}),K},p=function(A,T){var P=A.props,C=A.dataStartIndex,x=A.dataEndIndex,I=A.updateId;if(!a_({props:P}))return null;var b=P.children,w=P.layout,S=P.stackOffset,k=P.data,O=P.reverseStackOrder,N=GA(w),R=N.numericAxisName,V=N.cateAxisName,F=Qt(b,n),U=GX(k,F,"".concat(R,"Id"),"".concat(V,"Id"),S,O),W=c.reduce(function(J,Q){var Pe="".concat(Q.axisType,"Map");return B(B({},J),{},se({},Pe,vae(P,B(B({},Q),{},{graphicalItems:F,stackGroups:Q.axisType===R&&U,dataStartIndex:C,dataEndIndex:x}))))},{}),K=wae(B(B({},W),{},{props:P,graphicalItems:F}),T==null?void 0:T.legendBBox);Object.keys(W).forEach(function(J){W[J]=l(P,W[J],K,J.replace("Map",""),r)});var Y=W["".concat(V,"Map")],ne=bae(Y),oe=d(P,B(B({},W),{},{dataStartIndex:C,dataEndIndex:x,updateId:I,graphicalItems:F,stackGroups:U,offset:K}));return B(B({formattedGraphicalItems:oe,graphicalItems:F,offset:K,stackGroups:U},ne),W)},m=function(g){function A(T){var P,C,x;return tae(this,A),x=iae(this,A,[T]),se(x,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),se(x,"accessibilityManager",new Boe),se(x,"handleLegendBBoxUpdate",function(I){if(I){var b=x.state,w=b.dataStartIndex,S=b.dataEndIndex,k=b.updateId;x.setState(B({legendBBox:I},p({props:x.props,dataStartIndex:w,dataEndIndex:S,updateId:k},B(B({},x.state),{},{legendBBox:I}))))}}),se(x,"handleReceiveSyncEvent",function(I,b,w){if(x.props.syncId===I){if(w===x.eventEmitterSymbol&&typeof x.props.syncMethod!="function")return;x.applySyncEvent(b)}}),se(x,"handleBrushChange",function(I){var b=I.startIndex,w=I.endIndex;if(b!==x.state.dataStartIndex||w!==x.state.dataEndIndex){var S=x.state.updateId;x.setState(function(){return B({dataStartIndex:b,dataEndIndex:w},p({props:x.props,dataStartIndex:b,dataEndIndex:w,updateId:S},x.state))}),x.triggerSyncEvent({dataStartIndex:b,dataEndIndex:w})}}),se(x,"handleMouseEnter",function(I){var b=x.getMouseInfo(I);if(b){var w=B(B({},b),{},{isTooltipActive:!0});x.setState(w),x.triggerSyncEvent(w);var S=x.props.onMouseEnter;ue(S)&&S(w,I)}}),se(x,"triggeredAfterMouseMove",function(I){var b=x.getMouseInfo(I),w=b?B(B({},b),{},{isTooltipActive:!0}):{isTooltipActive:!1};x.setState(w),x.triggerSyncEvent(w);var S=x.props.onMouseMove;ue(S)&&S(w,I)}),se(x,"handleItemMouseEnter",function(I){x.setState(function(){return{isTooltipActive:!0,activeItem:I,activePayload:I.tooltipPayload,activeCoordinate:I.tooltipPosition||{x:I.cx,y:I.cy}}})}),se(x,"handleItemMouseLeave",function(){x.setState(function(){return{isTooltipActive:!1}})}),se(x,"handleMouseMove",function(I){I.persist(),x.throttleTriggeredAfterMouseMove(I)}),se(x,"handleMouseLeave",function(I){x.throttleTriggeredAfterMouseMove.cancel();var b={isTooltipActive:!1};x.setState(b),x.triggerSyncEvent(b);var w=x.props.onMouseLeave;ue(w)&&w(b,I)}),se(x,"handleOuterEvent",function(I){var b=MU(I),w=Xt(x.props,"".concat(b));if(b&&ue(w)){var S,k;/.*touch.*/i.test(b)?k=x.getMouseInfo(I.changedTouches[0]):k=x.getMouseInfo(I),w((S=k)!==null&&S!==void 0?S:{},I)}}),se(x,"handleClick",function(I){var b=x.getMouseInfo(I);if(b){var w=B(B({},b),{},{isTooltipActive:!0});x.setState(w),x.triggerSyncEvent(w);var S=x.props.onClick;ue(S)&&S(w,I)}}),se(x,"handleMouseDown",function(I){var b=x.props.onMouseDown;if(ue(b)){var w=x.getMouseInfo(I);b(w,I)}}),se(x,"handleMouseUp",function(I){var b=x.props.onMouseUp;if(ue(b)){var w=x.getMouseInfo(I);b(w,I)}}),se(x,"handleTouchMove",function(I){I.changedTouches!=null&&I.changedTouches.length>0&&x.throttleTriggeredAfterMouseMove(I.changedTouches[0])}),se(x,"handleTouchStart",function(I){I.changedTouches!=null&&I.changedTouches.length>0&&x.handleMouseDown(I.changedTouches[0])}),se(x,"handleTouchEnd",function(I){I.changedTouches!=null&&I.changedTouches.length>0&&x.handleMouseUp(I.changedTouches[0])}),se(x,"triggerSyncEvent",function(I){x.props.syncId!==void 0&&Hd.emit(Kd,x.props.syncId,I,x.eventEmitterSymbol)}),se(x,"applySyncEvent",function(I){var b=x.props,w=b.layout,S=b.syncMethod,k=x.state.updateId,O=I.dataStartIndex,N=I.dataEndIndex;if(I.dataStartIndex!==void 0||I.dataEndIndex!==void 0)x.setState(B({dataStartIndex:O,dataEndIndex:N},p({props:x.props,dataStartIndex:O,dataEndIndex:N,updateId:k},x.state)));else if(I.activeTooltipIndex!==void 0){var R=I.chartX,V=I.chartY,F=I.activeTooltipIndex,U=x.state,W=U.offset,K=U.tooltipTicks;if(!W)return;if(typeof S=="function")F=S(K,I);else if(S==="value"){F=-1;for(var Y=0;Y<K.length;Y++)if(K[Y].value===I.activeLabel){F=Y;break}}var ne=B(B({},W),{},{x:W.left,y:W.top}),oe=Math.min(R,ne.x+ne.width),J=Math.min(V,ne.y+ne.height),Q=K[F]&&K[F].value,Pe=tg(x.state,x.props.data,F),Ae=K[F]?{x:w==="horizontal"?K[F].coordinate:oe,y:w==="horizontal"?J:K[F].coordinate}:VO;x.setState(B(B({},I),{},{activeLabel:Q,activeCoordinate:Ae,activePayload:Pe,activeTooltipIndex:F}))}else x.setState(I)}),se(x,"renderCursor",function(I){var b,w=x.state,S=w.isTooltipActive,k=w.activeCoordinate,O=w.activePayload,N=w.offset,R=w.activeTooltipIndex,V=w.tooltipAxisBandSize,F=x.getTooltipEventType(),U=(b=I.props.active)!==null&&b!==void 0?b:S,W=x.props.layout,K=I.key||"_recharts-cursor";return j.createElement(Goe,{key:K,activeCoordinate:k,activePayload:O,activeTooltipIndex:R,chartName:r,element:I,isActive:U,layout:W,offset:N,tooltipAxisBandSize:V,tooltipEventType:F})}),se(x,"renderPolarAxis",function(I,b,w){var S=Xt(I,"type.axisType"),k=Xt(x.state,"".concat(S,"Map")),O=I.type.defaultProps,N=O!==void 0?B(B({},O),I.props):I.props,R=k&&k[N["".concat(S,"Id")]];return D.cloneElement(I,B(B({},R),{},{className:ge(S,R.className),key:I.key||"".concat(b,"-").concat(w),ticks:en(R,!0)}))}),se(x,"renderPolarGrid",function(I){var b=I.props,w=b.radialLines,S=b.polarAngles,k=b.polarRadius,O=x.state,N=O.radiusAxisMap,R=O.angleAxisMap,V=$n(N),F=$n(R),U=F.cx,W=F.cy,K=F.innerRadius,Y=F.outerRadius;return D.cloneElement(I,{polarAngles:Array.isArray(S)?S:en(F,!0).map(function(ne){return ne.coordinate}),polarRadius:Array.isArray(k)?k:en(V,!0).map(function(ne){return ne.coordinate}),cx:U,cy:W,innerRadius:K,outerRadius:Y,key:I.key||"polar-grid",radialLines:w})}),se(x,"renderLegend",function(){var I=x.state.formattedGraphicalItems,b=x.props,w=b.children,S=b.width,k=b.height,O=x.props.margin||{},N=S-(O.left||0)-(O.right||0),R=dI({children:w,formattedGraphicalItems:I,legendWidth:N,legendContent:u});if(!R)return null;var V=R.item,F=WA(R,Yoe);return D.cloneElement(V,B(B({},F),{},{chartWidth:S,chartHeight:k,margin:O,onBBoxUpdate:x.handleLegendBBoxUpdate}))}),se(x,"renderTooltip",function(){var I,b=x.props,w=b.children,S=b.accessibilityLayer,k=Ht(w,Kt);if(!k)return null;var O=x.state,N=O.isTooltipActive,R=O.activeCoordinate,V=O.activePayload,F=O.activeLabel,U=O.offset,W=(I=k.props.active)!==null&&I!==void 0?I:N;return D.cloneElement(k,{viewBox:B(B({},U),{},{x:U.left,y:U.top}),active:W,label:F,payload:W?V:[],coordinate:R,accessibilityLayer:S})}),se(x,"renderBrush",function(I){var b=x.props,w=b.margin,S=b.data,k=x.state,O=k.offset,N=k.dataStartIndex,R=k.dataEndIndex,V=k.updateId;return D.cloneElement(I,{key:I.key||"_recharts-brush",onChange:Tu(x.handleBrushChange,I.props.onChange),data:S,x:G(I.props.x)?I.props.x:O.left,y:G(I.props.y)?I.props.y:O.top+O.height+O.brushBottom-(w.bottom||0),width:G(I.props.width)?I.props.width:O.width,startIndex:N,endIndex:R,updateId:"brush-".concat(V)})}),se(x,"renderReferenceElement",function(I,b,w){if(!I)return null;var S=x,k=S.clipPathId,O=x.state,N=O.xAxisMap,R=O.yAxisMap,V=O.offset,F=I.type.defaultProps||{},U=I.props,W=U.xAxisId,K=W===void 0?F.xAxisId:W,Y=U.yAxisId,ne=Y===void 0?F.yAxisId:Y;return D.cloneElement(I,{key:I.key||"".concat(b,"-").concat(w),xAxis:N[K],yAxis:R[ne],viewBox:{x:V.left,y:V.top,width:V.width,height:V.height},clipPathId:k})}),se(x,"renderActivePoints",function(I){var b=I.item,w=I.activePoint,S=I.basePoint,k=I.childIndex,O=I.isRange,N=[],R=b.props.key,V=b.item.type.defaultProps!==void 0?B(B({},b.item.type.defaultProps),b.item.props):b.item.props,F=V.activeDot,U=V.dataKey,W=B(B({index:k,dataKey:U,cx:w.x,cy:w.y,r:4,fill:iv(b.item),strokeWidth:2,stroke:"#fff",payload:w.payload,value:w.value},ie(F,!1)),dl(F));return N.push(A.renderActiveDot(F,W,"".concat(R,"-activePoint-").concat(k))),S?N.push(A.renderActiveDot(F,B(B({},W),{},{cx:S.x,cy:S.y}),"".concat(R,"-basePoint-").concat(k))):O&&N.push(null),N}),se(x,"renderGraphicChild",function(I,b,w){var S=x.filterFormatItem(I,b,w);if(!S)return null;var k=x.getTooltipEventType(),O=x.state,N=O.isTooltipActive,R=O.tooltipAxis,V=O.activeTooltipIndex,F=O.activeLabel,U=x.props.children,W=Ht(U,Kt),K=S.props,Y=K.points,ne=K.isRange,oe=K.baseLine,J=S.item.type.defaultProps!==void 0?B(B({},S.item.type.defaultProps),S.item.props):S.item.props,Q=J.activeDot,Pe=J.hide,Ae=J.activeBar,ht=J.activeShape,_t=!!(!Pe&&N&&W&&(Q||Ae||ht)),Ye={};k!=="axis"&&W&&W.props.trigger==="click"?Ye={onClick:Tu(x.handleItemMouseEnter,I.props.onClick)}:k!=="axis"&&(Ye={onMouseLeave:Tu(x.handleItemMouseLeave,I.props.onMouseLeave),onMouseEnter:Tu(x.handleItemMouseEnter,I.props.onMouseEnter)});var Z=D.cloneElement(I,B(B({},S.props),Ye));function le(qr){return typeof R.dataKey=="function"?R.dataKey(qr.payload):null}if(_t)if(V>=0){var de,z;if(R.dataKey&&!R.allowDuplicatedCategory){var je=typeof R.dataKey=="function"?le:"payload.".concat(R.dataKey.toString());de=hl(Y,je,F),z=ne&&oe&&hl(oe,je,F)}else de=Y==null?void 0:Y[V],z=ne&&oe&&oe[V];if(ht||Ae){var ve=I.props.activeIndex!==void 0?I.props.activeIndex:V;return[D.cloneElement(I,B(B(B({},S.props),Ye),{},{activeIndex:ve})),null,null]}if(!he(de))return[Z].concat(aa(x.renderActivePoints({item:S,activePoint:de,basePoint:z,childIndex:V,isRange:ne})))}else{var We,He=(We=x.getItemByXY(x.state.activeCoordinate))!==null&&We!==void 0?We:{graphicalItem:Z},wt=He.graphicalItem,wr=wt.item,Ur=wr===void 0?I:wr,xn=wt.childIndex,xr=B(B(B({},S.props),Ye),{},{activeIndex:xn});return[D.cloneElement(Ur,xr),null,null]}return ne?[Z,null,null]:[Z,null]}),se(x,"renderCustomized",function(I,b,w){return D.cloneElement(I,B(B({key:"recharts-customized-".concat(w)},x.props),x.state))}),se(x,"renderMap",{CartesianGrid:{handler:Cu,once:!0},ReferenceArea:{handler:x.renderReferenceElement},ReferenceLine:{handler:Cu},ReferenceDot:{handler:x.renderReferenceElement},XAxis:{handler:Cu},YAxis:{handler:Cu},Brush:{handler:x.renderBrush,once:!0},Bar:{handler:x.renderGraphicChild},Line:{handler:x.renderGraphicChild},Area:{handler:x.renderGraphicChild},Radar:{handler:x.renderGraphicChild},RadialBar:{handler:x.renderGraphicChild},Scatter:{handler:x.renderGraphicChild},Pie:{handler:x.renderGraphicChild},Funnel:{handler:x.renderGraphicChild},Tooltip:{handler:x.renderCursor,once:!0},PolarGrid:{handler:x.renderPolarGrid,once:!0},PolarAngleAxis:{handler:x.renderPolarAxis},PolarRadiusAxis:{handler:x.renderPolarAxis},Customized:{handler:x.renderCustomized}}),x.clipPathId="".concat((P=T.id)!==null&&P!==void 0?P:Qi("recharts"),"-clip"),x.throttleTriggeredAfterMouseMove=hP(x.triggeredAfterMouseMove,(C=T.throttleDelay)!==null&&C!==void 0?C:1e3/60),x.state={},x}return sae(A,g),nae(A,[{key:"componentDidMount",value:function(){var P,C;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(P=this.props.margin.left)!==null&&P!==void 0?P:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var P=this.props,C=P.children,x=P.data,I=P.height,b=P.layout,w=Ht(C,Kt);if(w){var S=w.props.defaultIndex;if(!(typeof S!="number"||S<0||S>this.state.tooltipTicks.length-1)){var k=this.state.tooltipTicks[S]&&this.state.tooltipTicks[S].value,O=tg(this.state,x,S,k),N=this.state.tooltipTicks[S].coordinate,R=(this.state.offset.top+I)/2,V=b==="horizontal",F=V?{x:N,y:R}:{y:N,x:R},U=this.state.formattedGraphicalItems.find(function(K){var Y=K.item;return Y.type.name==="Scatter"});U&&(F=B(B({},F),U.props.points[S].tooltipPosition),O=U.props.points[S].tooltipPayload);var W={activeTooltipIndex:S,isTooltipActive:!0,activeLabel:k,activePayload:O,activeCoordinate:F};this.setState(W),this.renderCursor(w),this.accessibilityManager.setIndex(S)}}}},{key:"getSnapshotBeforeUpdate",value:function(P,C){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==C.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==P.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==P.margin){var x,I;this.accessibilityManager.setDetails({offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(I=this.props.margin.top)!==null&&I!==void 0?I:0}})}return null}},{key:"componentDidUpdate",value:function(P){Op([Ht(P.children,Kt)],[Ht(this.props.children,Kt)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var P=Ht(this.props.children,Kt);if(P&&typeof P.props.shared=="boolean"){var C=P.props.shared?"axis":"item";return s.indexOf(C)>=0?C:o}return o}},{key:"getMouseInfo",value:function(P){if(!this.container)return null;var C=this.container,x=C.getBoundingClientRect(),I=l7(x),b={chartX:Math.round(P.pageX-I.left),chartY:Math.round(P.pageY-I.top)},w=x.width/C.offsetWidth||1,S=this.inRange(b.chartX,b.chartY,w);if(!S)return null;var k=this.state,O=k.xAxisMap,N=k.yAxisMap,R=this.getTooltipEventType();if(R!=="axis"&&O&&N){var V=$n(O).scale,F=$n(N).scale,U=V&&V.invert?V.invert(b.chartX):null,W=F&&F.invert?F.invert(b.chartY):null;return B(B({},b),{},{xValue:U,yValue:W})}var K=HA(this.state,this.props.data,this.props.layout,S);return K?B(B({},b),K):null}},{key:"inRange",value:function(P,C){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,I=this.props.layout,b=P/x,w=C/x;if(I==="horizontal"||I==="vertical"){var S=this.state.offset,k=b>=S.left&&b<=S.left+S.width&&w>=S.top&&w<=S.top+S.height;return k?{x:b,y:w}:null}var O=this.state,N=O.angleAxisMap,R=O.radiusAxisMap;if(N&&R){var V=$n(N);return mx({x:b,y:w},V)}return null}},{key:"parseEventsOfWrapper",value:function(){var P=this.props.children,C=this.getTooltipEventType(),x=Ht(P,Kt),I={};x&&C==="axis"&&(x.props.trigger==="click"?I={onClick:this.handleClick}:I={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var b=dl(this.props,this.handleOuterEvent);return B(B({},b),I)}},{key:"addListener",value:function(){Hd.on(Kd,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Hd.removeListener(Kd,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(P,C,x){for(var I=this.state.formattedGraphicalItems,b=0,w=I.length;b<w;b++){var S=I[b];if(S.item===P||S.props.key===P.key||C===on(S.item.type)&&x===S.childIndex)return S}return null}},{key:"renderClipPath",value:function(){var P=this.clipPathId,C=this.state.offset,x=C.left,I=C.top,b=C.height,w=C.width;return j.createElement("defs",null,j.createElement("clipPath",{id:P},j.createElement("rect",{x,y:I,height:b,width:w})))}},{key:"getXScales",value:function(){var P=this.state.xAxisMap;return P?Object.entries(P).reduce(function(C,x){var I=qA(x,2),b=I[0],w=I[1];return B(B({},C),{},se({},b,w.scale))},{}):null}},{key:"getYScales",value:function(){var P=this.state.yAxisMap;return P?Object.entries(P).reduce(function(C,x){var I=qA(x,2),b=I[0],w=I[1];return B(B({},C),{},se({},b,w.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(P){var C;return(C=this.state.xAxisMap)===null||C===void 0||(C=C[P])===null||C===void 0?void 0:C.scale}},{key:"getYScaleByAxisId",value:function(P){var C;return(C=this.state.yAxisMap)===null||C===void 0||(C=C[P])===null||C===void 0?void 0:C.scale}},{key:"getItemByXY",value:function(P){var C=this.state,x=C.formattedGraphicalItems,I=C.activeItem;if(x&&x.length)for(var b=0,w=x.length;b<w;b++){var S=x[b],k=S.props,O=S.item,N=O.type.defaultProps!==void 0?B(B({},O.type.defaultProps),O.props):O.props,R=on(O.type);if(R==="Bar"){var V=(k.data||[]).find(function(K){return DZ(P,K)});if(V)return{graphicalItem:S,payload:V}}else if(R==="RadialBar"){var F=(k.data||[]).find(function(K){return mx(P,K)});if(F)return{graphicalItem:S,payload:F}}else if(kh(S,I)||Nh(S,I)||cc(S,I)){var U=Ete({graphicalItem:S,activeTooltipItem:I,itemData:N.data}),W=N.activeIndex===void 0?U:N.activeIndex;return{graphicalItem:B(B({},S),{},{childIndex:W}),payload:cc(S,I)?N.data[U]:S.props.data[U]}}}return null}},{key:"render",value:function(){var P=this;if(!a_(this))return null;var C=this.props,x=C.children,I=C.className,b=C.width,w=C.height,S=C.style,k=C.compact,O=C.title,N=C.desc,R=WA(C,Xoe),V=ie(R,!1);if(k)return j.createElement(AA,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},j.createElement(Rp,bo({},V,{width:b,height:w,title:O,desc:N}),this.renderClipPath(),c_(x,this.renderMap)));if(this.props.accessibilityLayer){var F,U;V.tabIndex=(F=this.props.tabIndex)!==null&&F!==void 0?F:0,V.role=(U=this.props.role)!==null&&U!==void 0?U:"application",V.onKeyDown=function(K){P.accessibilityManager.keyboardEvent(K)},V.onFocus=function(){P.accessibilityManager.focus()}}var W=this.parseEventsOfWrapper();return j.createElement(AA,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},j.createElement("div",bo({className:ge("recharts-wrapper",I),style:B({position:"relative",cursor:"default",width:b,height:w},S)},W,{ref:function(Y){P.container=Y}}),j.createElement(Rp,bo({},V,{width:b,height:w,title:O,desc:N,style:dae}),this.renderClipPath(),c_(x,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(D.Component);se(m,"displayName",r),se(m,"defaultProps",B({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),se(m,"getDerivedStateFromProps",function(g,A){var T=g.dataKey,P=g.data,C=g.children,x=g.width,I=g.height,b=g.layout,w=g.stackOffset,S=g.margin,k=A.dataStartIndex,O=A.dataEndIndex;if(A.updateId===void 0){var N=KA(g);return B(B(B({},N),{},{updateId:0},p(B(B({props:g},N),{},{updateId:0}),A)),{},{prevDataKey:T,prevData:P,prevWidth:x,prevHeight:I,prevLayout:b,prevStackOffset:w,prevMargin:S,prevChildren:C})}if(T!==A.prevDataKey||P!==A.prevData||x!==A.prevWidth||I!==A.prevHeight||b!==A.prevLayout||w!==A.prevStackOffset||!Eo(S,A.prevMargin)){var R=KA(g),V={chartX:A.chartX,chartY:A.chartY,isTooltipActive:A.isTooltipActive},F=B(B({},HA(A,P,b)),{},{updateId:A.updateId+1}),U=B(B(B({},R),V),F);return B(B(B({},U),p(B({props:g},U),A)),{},{prevDataKey:T,prevData:P,prevWidth:x,prevHeight:I,prevLayout:b,prevStackOffset:w,prevMargin:S,prevChildren:C})}if(!Op(C,A.prevChildren)){var W,K,Y,ne,oe=Ht(C,Yo),J=oe&&(W=(K=oe.props)===null||K===void 0?void 0:K.startIndex)!==null&&W!==void 0?W:k,Q=oe&&(Y=(ne=oe.props)===null||ne===void 0?void 0:ne.endIndex)!==null&&Y!==void 0?Y:O,Pe=J!==k||Q!==O,Ae=!he(P),ht=Ae&&!Pe?A.updateId:A.updateId+1;return B(B({updateId:ht},p(B(B({props:g},A),{},{updateId:ht,dataStartIndex:J,dataEndIndex:Q}),A)),{},{prevChildren:C,dataStartIndex:J,dataEndIndex:Q})}return null}),se(m,"renderActiveDot",function(g,A,T){var P;return D.isValidElement(g)?P=D.cloneElement(g,A):ue(g)?P=g(A):P=j.createElement(Bc,A),j.createElement(be,{className:"recharts-active-dot",key:T},P)});var y=D.forwardRef(function(A,T){return j.createElement(m,bo({},A,{ref:T}))});return y.displayName=m.displayName,y},Aae=Vh({chartName:"LineChart",GraphicalChild:Uc,axisComponents:[{axisType:"xAxis",AxisComp:zn},{axisType:"yAxis",AxisComp:Hn}],formatAxisMap:av}),Eae=Vh({chartName:"BarChart",GraphicalChild:Qn,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:zn},{axisType:"yAxis",AxisComp:Hn}],formatAxisMap:av}),Tae=Vh({chartName:"PieChart",GraphicalChild:wn,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Rh},{axisType:"radiusAxis",AxisComp:Oh}],formatAxisMap:aQ,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Sae=Vh({chartName:"AreaChart",GraphicalChild:mn,axisComponents:[{axisType:"xAxis",AxisComp:zn},{axisType:"yAxis",AxisComp:Hn}],formatAxisMap:av});const Pae={SKALLARS:{primary:"#9333ea",secondary:"#a855f7",tertiary:"#c084fc",light:"#f3e8ff"},MKMs:{primary:"#2563eb",secondary:"#3b82f6",tertiary:"#60a5fa",light:"#e0f2fe"},Contax:{primary:"#d97706",secondary:"#f59e0b",tertiary:"#fbbf24",light:"#fef3c7"}};function Iae({metric:t}){return E.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("div",{className:"p-2 rounded-lg bg-indigo-50",children:E.jsx(t.icon,{className:"h-6 w-6 text-indigo-600"})}),E.jsxs("div",{className:`flex items-center ${t.trend==="up"?"text-green-600":"text-red-600"}`,children:[t.trend==="up"?E.jsx(t2,{className:"h-4 w-4 mr-1"}):E.jsx(ZM,{className:"h-4 w-4 mr-1"}),Math.abs(t.change),"%"]})]}),E.jsxs("div",{className:"mt-4",children:[E.jsx("h3",{className:"text-sm font-medium text-gray-500",children:t.label}),E.jsx("p",{className:"mt-2 text-3xl font-semibold text-gray-900",children:t.value})]})]})}function Ru({title:t,children:e}){return E.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[E.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:t}),E.jsx("div",{className:"h-80",children:e})]})}function Oae(){const{invoices:t}=da(),{user:e}=yn(),[r,n]=D.useState("3M"),i=D.useMemo(()=>{const l=new Date;return{"1M":new Date(l.setMonth(l.getMonth()-1)),"3M":new Date(l.setMonth(l.getMonth()-3)),"6M":new Date(l.setMonth(l.getMonth()-6)),"1Y":new Date(l.setFullYear(l.getFullYear()-1)),ALL:new Date(0)}[r]},[r]),o=D.useMemo(()=>t.filter(l=>l.isPaid&&new Date(l.date)>=i),[t,i]),a=D.useMemo(()=>{const l=o.reduce((p,m)=>p+m.amount,0),f=o.reduce((p,m)=>p+m.amount*m.commissionPercentage/100,0),d=o.reduce((p,m)=>p+m.commissionPercentage,0)/(o.length||1);return[{label:"Total Revenue",value:new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(l),change:12.5,trend:"up",icon:a2},{label:"Total Commissions",value:new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(f),change:8.3,trend:"up",icon:d2},{label:"Average Commission Rate",value:`${d.toFixed(1)}%`,change:2.1,trend:"down",icon:JM},{label:"Active Clients",value:new Set(o.map(p=>p.clientName)).size.toString(),change:15,trend:"up",icon:ey}]},[o]),s=D.useMemo(()=>{const l=o.reduce((f,d)=>{const m=new Date(d.date).toLocaleDateString("en-US",{month:"short",year:"numeric"}),y=d.amount*d.commissionPercentage/100;return f[m]||(f[m]={month:m,revenue:0,commissions:0,count:0}),f[m].revenue+=d.amount,f[m].commissions+=y,f[m].count+=1,f},{});return Object.values(l).sort((f,d)=>new Date(f.month).getTime()-new Date(d.month).getTime())},[o]),c=D.useMemo(()=>{const l=o.reduce((f,d)=>{const p=d.amount*d.commissionPercentage/100;return f[d.referredByFirm]=(f[d.referredByFirm]||0)+p,f},{});return Object.entries(l).map(([f,d])=>({name:f,value:Number(d.toFixed(2))}))},[o]);if(!e)return null;const u=Pae[e.firm];return E.jsxs("div",{className:"space-y-6",children:[E.jsx("div",{className:"flex justify-end space-x-2",children:["1M","3M","6M","1Y","ALL"].map(l=>E.jsx("button",{onClick:()=>n(l),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors
              ${r===l?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"}
            `,children:l},l))}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:a.map(l=>E.jsx(Iae,{metric:l},l.label))}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[E.jsx(Ru,{title:"Revenue & Commissions Trend",children:E.jsx(_u,{width:"100%",height:"100%",children:E.jsxs(Sae,{data:s,children:[E.jsxs("defs",{children:[E.jsxs("linearGradient",{id:"revenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[E.jsx("stop",{offset:"5%",stopColor:u.primary,stopOpacity:.1}),E.jsx("stop",{offset:"95%",stopColor:u.primary,stopOpacity:0})]}),E.jsxs("linearGradient",{id:"commission",x1:"0",y1:"0",x2:"0",y2:"1",children:[E.jsx("stop",{offset:"5%",stopColor:u.secondary,stopOpacity:.1}),E.jsx("stop",{offset:"95%",stopColor:u.secondary,stopOpacity:0})]})]}),E.jsx(Uu,{strokeDasharray:"3 3"}),E.jsx(zn,{dataKey:"month"}),E.jsx(Hn,{}),E.jsx(Kt,{formatter:l=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(l)}),E.jsx(Er,{}),E.jsx(mn,{type:"monotone",dataKey:"revenue",stroke:u.primary,fillOpacity:1,fill:"url(#revenue)",name:"Revenue"}),E.jsx(mn,{type:"monotone",dataKey:"commissions",stroke:u.secondary,fillOpacity:1,fill:"url(#commission)",name:"Commissions"})]})})}),E.jsx(Ru,{title:"Commission Distribution by Firm",children:E.jsx(_u,{width:"100%",height:"100%",children:E.jsxs(Tae,{children:[E.jsx(wn,{data:c,cx:"50%",cy:"50%",labelLine:!1,label:({name:l,value:f})=>`${l}: ${new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(f)}`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:c.map((l,f)=>E.jsx(yh,{fill:[u.primary,u.secondary,u.tertiary][f%3]},`cell-${f}`))}),E.jsx(Kt,{formatter:l=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(l)}),E.jsx(Er,{})]})})}),E.jsx(Ru,{title:"Invoice Count Trend",children:E.jsx(_u,{width:"100%",height:"100%",children:E.jsxs(Aae,{data:s,children:[E.jsx(Uu,{strokeDasharray:"3 3"}),E.jsx(zn,{dataKey:"month"}),E.jsx(Hn,{}),E.jsx(Kt,{}),E.jsx(Er,{}),E.jsx(Uc,{type:"monotone",dataKey:"count",stroke:u.primary,name:"Number of Invoices"})]})})}),E.jsx(Ru,{title:"Monthly Performance",children:E.jsx(_u,{width:"100%",height:"100%",children:E.jsxs(Eae,{data:s,children:[E.jsx(Uu,{strokeDasharray:"3 3"}),E.jsx(zn,{dataKey:"month"}),E.jsx(Hn,{}),E.jsx(Kt,{formatter:l=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(l)}),E.jsx(Er,{}),E.jsx(Qn,{dataKey:"revenue",fill:u.primary,name:"Revenue",opacity:.8}),E.jsx(Qn,{dataKey:"commissions",fill:u.secondary,name:"Commissions",opacity:.8})]})})})]})]})}const Cae={SKALLARS:{primary:"bg-purple-100",secondary:"bg-purple-50",text:"text-purple-600",border:"border-purple-200",light:"text-purple-500",accent:"#9333ea"},MKMs:{primary:"bg-blue-100",secondary:"bg-blue-50",text:"text-blue-600",border:"border-blue-200",light:"text-blue-500",accent:"#2563eb"},Contax:{primary:"bg-yellow-100",secondary:"bg-yellow-50",text:"text-yellow-600",border:"border-yellow-200",light:"text-yellow-500",accent:"#d97706"}};function Rae(){const{user:t,logout:e}=yn(),{currentYear:r,currentQuarter:n}=Ic(),[i,o]=D.useState(!1);if(!t)return null;const a=Cae[t.firm],s=`Q${n} ${r}`,c={start:new Date(r,(n-1)*3),end:new Date(r,n*3-1)},u=`${c.start.toLocaleDateString("en-US",{month:"long"})} - ${c.end.toLocaleDateString("en-US",{month:"long"})}`;return E.jsxs("div",{className:`min-h-screen ${a.secondary}`,children:[E.jsx("header",{className:"bg-white shadow-sm",children:E.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"flex justify-between items-center py-4",children:[E.jsxs("div",{className:"flex items-center",children:[E.jsxs("h1",{className:`text-2xl font-semibold ${a.text}`,children:[t.firm," Commission Dashboard"]}),E.jsx("span",{className:"ml-4 px-3 py-1 rounded-md bg-gray-100 text-gray-600 text-sm",children:s})]}),E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsxs("span",{className:"text-sm text-gray-500",children:["Welcome, ",t.name]}),E.jsxs("button",{onClick:()=>o(!0),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[E.jsx(I1,{className:"h-4 w-4 mr-2"}),"Reset Data"]}),E.jsxs("button",{onClick:e,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[E.jsx(c2,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})})}),E.jsxs("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[E.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[E.jsx("h2",{className:"text-lg font-medium mb-4",children:"Create New Invoice"}),E.jsx(kL,{})]}),E.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[E.jsx("h2",{className:"text-lg font-medium mb-4",children:"Current Quarter Summary"}),E.jsx(WL,{})]})]}),E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-amber-500 unpaid-invoices-section",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("h2",{className:"text-lg font-medium",children:"Pending Payments"}),E.jsx("div",{className:"text-sm text-gray-500",children:u})]}),E.jsx(KL,{})]}),E.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("h2",{className:"text-lg font-medium",children:"All Invoices"}),E.jsx("div",{className:"text-sm text-gray-500",children:s})]}),E.jsx(VL,{})]})]}),E.jsx("div",{className:"mt-8",children:E.jsx(bd,{children:({open:l})=>E.jsxs(E.Fragment,{children:[E.jsxs(bd.Button,{className:"flex w-full justify-between rounded-lg bg-gray-100 px-4 py-2 text-left text-sm font-medium hover:bg-gray-200 focus:outline-none focus-visible:ring focus-visible:ring-indigo-500 focus-visible:ring-opacity-75",children:[E.jsx("span",{children:"View Detailed Analytics"}),E.jsx(qf,{className:`${l?"transform rotate-180":""} h-5 w-5 text-gray-500 transition-transform duration-200`})]}),E.jsx(pL,{enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:E.jsx(bd.Panel,{className:"mt-4",children:E.jsx(Oae,{})})})]})})})]}),i&&E.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:E.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:E.jsxs("div",{className:"mt-3 text-center",children:[E.jsx("div",{className:"flex items-center justify-center text-red-500 mb-4",children:E.jsx(E1,{size:48})}),E.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Reset All Data"}),E.jsx("div",{className:"mt-2 px-7 py-3",children:E.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to reset all data? This action cannot be undone and will delete all invoices and commission records."})}),E.jsxs("div",{className:"flex justify-center space-x-4 mt-4",children:[E.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 text-sm font-medium rounded-md",children:"Cancel"}),E.jsx("button",{onClick:()=>{o(!1)},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md",children:"Reset All Data"})]})]})})})]})}function kae(){const{user:t}=yn();return t?E.jsx(Rae,{}):E.jsx(g2,{})}function Nae(){return E.jsx(v1,{children:E.jsx(zM,{children:E.jsx(YM,{children:E.jsx(_1,{children:E.jsx(KM,{children:E.jsx(kae,{})})})})})})}JA(document.getElementById("root")).render(E.jsx(D.StrictMode,{children:E.jsx(v1,{children:E.jsx(_1,{children:E.jsx(Nae,{})})})}));
